<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 5: Geometry â€” PSAT 8/9 Math â€” PantherPrep</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--ink:#f0f0f0;--paper:#121212;--accent:#0891b2;--accent-light:rgba(8,145,178,.12);--border:#2a2a2a;--muted:#999;--surface:#1a1a1a;--math:#60a5fa;--math-bg:rgba(96,165,250,.1);--algebra:#34d399;--advanced:#a78bfa;--psda:#fbbf24;--geo:#f87171;--correct:#22c55e;--correct-bg:rgba(34,197,94,.12);--wrong:#ef4444;--wrong-bg:rgba(239,68,68,.12);--danger:#ef4444;--danger-bg:rgba(239,68,68,.08)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);line-height:1.65;overflow-x:hidden}
.top-stripe{height:4px;background:linear-gradient(90deg,#0891b2 0%,#0891b2 50%,#fff 50%,#fff 100%);position:fixed;top:0;left:0;right:0;z-index:100}

/* â”€â”€ Screen System â”€â”€ */
.screen{display:none;opacity:0;transition:opacity .4s ease;min-height:100vh}
.screen.active{display:block;opacity:1}
.screen.fade-in{animation:fadeIn .4s ease forwards}
.screen.fade-out{animation:fadeOut .3s ease forwards}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeOut{from{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-12px)}}

/* â”€â”€ Progress Dots â”€â”€ */
.screen-progress{position:fixed;top:12px;left:50%;transform:translateX(-50%);display:flex;gap:8px;z-index:101;padding:6px 14px;background:rgba(18,18,18,.85);backdrop-filter:blur(8px);border-radius:20px;border:1px solid var(--border)}
.screen-dot{width:8px;height:8px;border-radius:50%;background:var(--border);transition:all .3s;cursor:pointer}
.screen-dot.completed{background:var(--geo)}
.screen-dot.current{background:var(--accent);box-shadow:0 0 8px rgba(8,145,178,.5);transform:scale(1.25)}
.screen-dot:hover{transform:scale(1.3)}

/* â”€â”€ Container â”€â”€ */
.container{max-width:800px;margin:0 auto;padding:20px 20px 60px}

/* â”€â”€ Welcome Screen â”€â”€ */
.welcome-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:40px 20px;text-align:center}
.welcome-badge{display:inline-block;background:var(--geo);color:#fff;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:18px}
.welcome-screen h1{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,5vw,3rem);font-weight:700;margin-bottom:8px;max-width:600px}
.welcome-sub{color:var(--muted);font-size:1.05rem;max-width:500px;margin:0 auto 32px}
.welcome-meta{display:flex;gap:24px;justify-content:center;margin-bottom:36px;font-size:.85rem;color:var(--muted)}
.preview-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;max-width:600px;width:100%;margin-bottom:40px}
.preview-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px 14px;text-align:left;transition:all .2s}
.preview-card:hover{border-color:var(--geo);transform:translateY(-2px)}
.preview-icon{font-size:1.4rem;margin-bottom:8px}
.preview-title{font-size:.82rem;font-weight:700;margin-bottom:3px}
.preview-desc{font-size:.72rem;color:var(--muted);line-height:1.4}
.start-btn{padding:14px 36px;background:var(--geo);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s;font-family:'Source Sans 3',sans-serif}
.start-btn:hover{filter:brightness(1.15);transform:translateY(-1px);box-shadow:0 6px 20px rgba(248,113,113,.3)}

/* â”€â”€ Retrieval Warm-Up â”€â”€ */
.warmup-container{max-width:600px;margin:0 auto;padding:60px 20px}
.warmup-header{text-align:center;margin-bottom:32px}
.warmup-badge{display:inline-block;background:var(--psda);color:#000;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:4px 12px;border-radius:12px;margin-bottom:12px}
.warmup-dots{display:flex;gap:8px;justify-content:center;margin-top:16px}
.warmup-dot{width:10px;height:10px;border-radius:50%;background:var(--border);transition:all .3s}
.warmup-dot.done-correct{background:var(--correct)}
.warmup-dot.done-wrong{background:var(--wrong)}
.warmup-dot.active{background:var(--psda);box-shadow:0 0 8px rgba(251,191,36,.4)}
.warmup-q{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:24px;margin-bottom:16px}
.warmup-q .source-tag{font-size:.7rem;color:var(--psda);font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-bottom:8px}
.warmup-q .q-text{font-size:.95rem;line-height:1.7;margin-bottom:14px}
.warmup-choices{display:flex;flex-direction:column;gap:8px}
.warmup-choice{display:flex;align-items:center;gap:10px;padding:11px 14px;background:var(--paper);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.88rem;transition:all .15s}
.warmup-choice:hover:not(.wu-dis){border-color:var(--psda);background:rgba(251,191,36,.05)}
.warmup-choice.wu-correct{border-color:var(--correct);background:var(--correct-bg)}
.warmup-choice.wu-wrong{border-color:var(--wrong);background:var(--wrong-bg)}
.warmup-choice.wu-dis{pointer-events:none;opacity:.7}
.warmup-choice.wu-correct{opacity:1}
.warmup-fb{font-size:.85rem;color:var(--muted);line-height:1.6;margin-top:12px;padding:10px;background:var(--paper);border-radius:8px;border-left:3px solid var(--correct)}
.warmup-next{padding:10px 24px;background:var(--psda);color:#000;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-size:.88rem;margin-top:12px;font-family:'Source Sans 3',sans-serif}
.warmup-next:hover{filter:brightness(1.1)}
.warmup-summary{text-align:center;padding:40px 20px}
.warmup-score{font-family:'JetBrains Mono',monospace;font-size:2.4rem;font-weight:700;color:var(--psda);margin:12px 0}
.warmup-continue{padding:12px 28px;background:var(--geo);color:#fff;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-size:.95rem;margin-top:20px;font-family:'Source Sans 3',sans-serif}
.warmup-continue:hover{filter:brightness(1.15)}

/* â”€â”€ Lesson Content â”€â”€ */
.back-link{display:inline-flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem;padding:8px 0;margin-top:8px;cursor:pointer;text-decoration:none}
.back-link:hover{color:var(--accent)}
.mod-header{padding:40px 0 30px;border-bottom:1px solid var(--border);margin-bottom:32px}
.mod-badge{display:inline-block;background:var(--geo);color:#fff;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:14px}
.mod-header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700;margin-bottom:6px}
.mod-header .subtitle{color:var(--muted);font-size:1rem}
.mod-meta{display:flex;gap:20px;margin-top:14px;font-size:.82rem;color:var(--muted)}
.section{margin-bottom:36px}
.section-label{font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--geo);margin-bottom:6px}
.section h2{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:700;margin-bottom:12px}
.section p{color:#ccc;font-size:.93rem;margin-bottom:12px;line-height:1.7}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:12px}
.card-accent{border-left:3px solid var(--accent)}
.callout{background:var(--accent-light);border:1px solid rgba(8,145,178,.3);border-radius:10px;padding:14px 18px;margin-bottom:16px;font-size:.9rem}
.callout strong{color:var(--accent)}
.callout-blue{background:var(--math-bg);border-color:rgba(96,165,250,.3)}.callout-blue strong{color:var(--math)}
.callout-gold{background:rgba(248,113,113,.08);border-color:rgba(248,113,113,.3)}.callout-gold strong{color:var(--geo)}
.topic{background:var(--surface);border:1px solid var(--border);border-radius:14px;margin-bottom:12px;overflow:hidden;transition:all .3s}
.topic-header{display:flex;align-items:center;gap:14px;padding:16px 20px;cursor:pointer}
.topic-badge{width:38px;height:38px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.82rem;color:#fff;flex-shrink:0}
.topic-info{flex:1}.topic-title{font-weight:700;font-size:.95rem}.topic-sub{font-size:.82rem;color:var(--muted);margin-top:2px}
.topic-arrow{color:var(--muted);transition:transform .2s;font-size:.9rem}
.topic.open .topic-arrow{transform:rotate(90deg)}
.topic-body{display:none;padding:0 20px 18px;font-size:.9rem;color:#ccc;line-height:1.7}
.topic.open .topic-body{display:block}
.topic-body h4{font-size:.95rem;color:var(--ink);margin:14px 0 6px;font-weight:700}
.topic-body ul{padding-left:18px;margin-bottom:10px}.topic-body li{margin-bottom:6px}
.formula-box{background:var(--paper);border:1px solid var(--border);border-radius:10px;padding:14px 16px;margin:10px 0;font-family:'JetBrains Mono',monospace;font-size:.85rem;line-height:1.8}
.formula-box .fn{color:var(--geo);font-weight:700}.formula-box .fl{color:var(--math);font-weight:700}
.exercise{background:var(--surface);border:2px solid var(--geo);border-radius:14px;padding:22px;margin-bottom:16px}
.exercise h3{font-family:'Cormorant Garamond',serif;font-size:1.2rem;margin-bottom:4px}
.exercise-sub{font-size:.82rem;color:var(--muted);margin-bottom:14px}
.ex-item{background:var(--paper);border:1px solid var(--border);border-radius:10px;padding:14px;margin-bottom:10px}
.ex-prompt{font-size:.92rem;line-height:1.6;margin-bottom:10px;color:#ddd}
.ex-prompt code{background:rgba(96,165,250,.1);color:var(--math);padding:1px 6px;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:.85rem}
.ex-input-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.ex-input{padding:8px 12px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1rem;width:100px;text-align:center}
.ex-input:focus{border-color:var(--geo);outline:none}
.ex-btn{padding:8px 16px;background:var(--geo);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:.82rem;font-weight:600}.ex-btn:hover{filter:brightness(1.15)}
.ex-fb{font-size:.82rem;padding:8px 10px;border-radius:6px;margin-top:8px;display:none;line-height:1.5}
.ex-fb.show{display:block}.ex-fb.correct{background:var(--correct-bg);color:var(--correct)}.ex-fb.wrong{background:var(--wrong-bg);color:var(--wrong)}
.tier{display:inline-block;padding:2px 8px;border-radius:4px;font-size:.68rem;font-weight:700;letter-spacing:1px;text-transform:uppercase}
.tier-1{background:rgba(52,211,153,.15);color:var(--algebra)}.tier-2{background:var(--math-bg);color:var(--math)}.tier-3{background:rgba(167,139,250,.15);color:var(--advanced)}
.classify-opts{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:4px}
.classify-opt{padding:6px 14px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.82rem;transition:all .15s}
.classify-opt:hover:not(.cl-dis){border-color:var(--geo);background:rgba(248,113,113,.08)}
.classify-opt.cl-correct{border-color:var(--correct);background:var(--correct-bg);color:var(--correct);opacity:1}
.classify-opt.cl-wrong{border-color:var(--wrong);background:var(--wrong-bg);color:var(--wrong)}
.classify-opt.cl-dis{pointer-events:none;opacity:.6}.classify-opt.cl-correct{opacity:1}

/* â”€â”€ Trap Taxonomy â”€â”€ */
.trap-taxonomy{margin-bottom:24px}
.trap-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px 18px;margin-bottom:10px;display:flex;gap:14px;align-items:flex-start;transition:all .2s}
.trap-card:hover{border-color:var(--accent);transform:translateX(3px)}
.trap-number{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.78rem;color:#fff;flex-shrink:0}
.trap-card-body{flex:1}
.trap-card-name{font-weight:700;font-size:.92rem;margin-bottom:3px}
.trap-card-desc{font-size:.82rem;color:var(--muted);line-height:1.5}
.trap-card-example{font-size:.78rem;color:var(--math);font-family:'JetBrains Mono',monospace;margin-top:4px}

/* â”€â”€ Confidence Tags â”€â”€ */
.confidence-row{display:flex;gap:6px;margin-bottom:10px;flex-wrap:wrap}
.conf-tag{padding:5px 12px;border-radius:6px;font-size:.75rem;font-weight:600;cursor:pointer;border:2px solid var(--border);background:var(--surface);transition:all .15s;letter-spacing:.5px}
.conf-tag:hover{border-color:var(--geo)}
.conf-tag.selected{border-color:var(--geo);background:rgba(248,113,113,.12);color:var(--geo)}
.conf-tag[data-conf="guessing"].selected{border-color:var(--psda);background:rgba(251,191,36,.12);color:var(--psda)}
.conf-tag[data-conf="unsure"].selected{border-color:var(--math);background:var(--math-bg);color:var(--math)}
.conf-tag[data-conf="confident"].selected{border-color:var(--geo);background:rgba(248,113,113,.12);color:var(--geo)}

/* â”€â”€ Timed Practice â”€â”€ */
.timer-bar{position:sticky;top:8px;z-index:50;background:rgba(18,18,18,.92);backdrop-filter:blur(8px);border:1px solid var(--border);border-radius:12px;padding:10px 16px;margin-bottom:20px;display:flex;align-items:center;gap:14px}
.timer-display{font-family:'JetBrains Mono',monospace;font-size:1.1rem;font-weight:700;color:var(--geo);min-width:60px}
.timer-display.warning{color:var(--psda)}
.timer-display.danger{color:var(--wrong);animation:pulse 1s ease infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.timer-track{flex:1;height:4px;background:var(--border);border-radius:2px;overflow:hidden}
.timer-fill{height:100%;background:var(--geo);transition:width 1s linear;border-radius:2px}
.timer-fill.warning{background:var(--psda)}
.timer-fill.danger{background:var(--wrong)}
.timer-toggle{padding:5px 12px;background:var(--surface);border:1px solid var(--border);border-radius:6px;font-size:.75rem;color:var(--muted);cursor:pointer;font-family:'Source Sans 3',sans-serif;font-weight:600}
.timer-toggle:hover{border-color:var(--accent);color:var(--ink)}
.timer-toggle.active{background:var(--accent-light);border-color:var(--accent);color:var(--accent)}
.q-dots{display:flex;gap:4px}
.q-dot{width:8px;height:8px;border-radius:50%;background:var(--border)}
.q-dot.correct{background:var(--correct)}
.q-dot.wrong{background:var(--wrong)}
.q-dot.current{background:var(--accent);box-shadow:0 0 6px rgba(8,145,178,.5)}

/* â”€â”€ MC Choices â”€â”€ */
.mc-choices{display:flex;flex-direction:column;gap:6px}
.mc-choice{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--paper);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.88rem;transition:all .15s}
.mc-choice:hover:not(.mc-dis){border-color:var(--geo);background:rgba(248,113,113,.05)}
.mc-letter{font-weight:700;color:var(--muted);min-width:20px}
.mc-choice.mc-correct{border-color:var(--correct);background:var(--correct-bg);opacity:1}
.mc-choice.mc-wrong{border-color:var(--wrong);background:var(--wrong-bg)}
.mc-choice.mc-dis{pointer-events:none;opacity:.7}.mc-choice.mc-correct{opacity:1}
.mc-choice.mc-correct .mc-letter{color:var(--correct)}.mc-choice.mc-wrong .mc-letter{color:var(--wrong)}
.mc-fb{font-size:.85rem;color:var(--muted);line-height:1.6;margin-top:10px;padding:10px;background:var(--paper);border-radius:8px;display:none;border-left:3px solid var(--correct)}.mc-fb.show{display:block}
.score-bar{display:flex;align-items:center;gap:10px;margin-top:14px;padding-top:10px;border-top:1px solid var(--border)}
.score-bar-label{font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted)}
.score-bar-track{flex:1;height:6px;border-radius:3px;background:var(--border);overflow:hidden}
.score-bar-fill{height:100%;border-radius:3px;background:var(--correct);transition:width .4s ease}
.score-bar-val{font-family:'JetBrains Mono',monospace;font-size:.85rem;font-weight:700;color:var(--correct);min-width:36px;text-align:right}

/* â”€â”€ Results Enhancement â”€â”€ */
.results-section{margin-top:24px;padding:20px;background:var(--surface);border:1px solid var(--border);border-radius:14px}
.results-section h3{font-family:'Cormorant Garamond',serif;font-size:1.3rem;margin-bottom:14px}
.results-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:2px;margin-bottom:16px;background:var(--border);border-radius:10px;overflow:hidden}
.results-grid-header{background:var(--surface);padding:8px;text-align:center;font-size:.68rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted)}
.results-grid-cell{background:var(--paper);padding:10px 8px;text-align:center;font-size:.78rem;min-height:50px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px}
.results-grid-cell.danger-cell{background:var(--danger-bg);border:1px solid rgba(239,68,68,.3)}
.cell-label{font-size:.65rem;color:var(--muted);font-weight:600}
.cell-dots{display:flex;gap:3px;flex-wrap:wrap;justify-content:center}
.cell-dot{width:8px;height:8px;border-radius:50%}
.difficulty-bars{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}
.diff-row{display:flex;align-items:center;gap:10px}
.diff-label{font-size:.78rem;font-weight:600;min-width:60px}
.diff-track{flex:1;height:8px;background:var(--border);border-radius:4px;overflow:hidden}
.diff-fill{height:100%;border-radius:4px;transition:width .5s ease}
.diff-val{font-family:'JetBrains Mono',monospace;font-size:.78rem;font-weight:700;min-width:40px;text-align:right}
.error-category{padding:12px 16px;border-radius:10px;margin-bottom:8px;font-size:.85rem;line-height:1.6}
.error-category .error-label{font-weight:700;margin-bottom:4px}
.error-category .error-items{color:var(--muted);font-size:.82rem}

/* â”€â”€ Module Complete â”€â”€ */
.complete-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:40px 20px;text-align:center}
.complete-icon{font-size:4rem;margin-bottom:16px;animation:celebrateBounce .6s ease}
@keyframes celebrateBounce{0%{transform:scale(0)}50%{transform:scale(1.2)}100%{transform:scale(1)}}
.complete-screen h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.4rem);margin-bottom:8px}
.complete-sub{color:var(--muted);font-size:1rem;margin-bottom:28px}
.takeaway-list{text-align:left;max-width:500px;width:100%;margin-bottom:32px}
.takeaway-item{display:flex;gap:10px;align-items:flex-start;padding:8px 0;font-size:.88rem;color:#ccc}
.takeaway-check{color:var(--correct);flex-shrink:0;font-weight:700}
.nav-cards{display:grid;grid-template-columns:1fr 1fr;gap:12px;max-width:500px;width:100%}
.nav-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px;text-align:center;cursor:pointer;transition:all .2s;text-decoration:none;color:var(--ink)}
.nav-card:hover{border-color:var(--geo);transform:translateY(-2px)}
.nav-card-label{font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
.nav-card-title{font-weight:700;font-size:.95rem}

/* â”€â”€ Geometry-Specific Styles â”€â”€ */
.fm-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px;margin:12px 0}
.fm-card{background:var(--paper);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center}
.fm-name{font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:4px}
.fm-eq{font-family:'JetBrains Mono',monospace;font-size:.95rem;font-weight:700;color:var(--math)}
.tri-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px;margin:12px 0}
.tri-card{background:var(--paper);border:2px solid var(--geo);border-radius:12px;padding:16px;text-align:center}
.tri-name{font-family:'Cormorant Garamond',serif;font-size:1.1rem;font-weight:700;margin-bottom:4px}
.tri-ratio{font-family:'JetBrains Mono',monospace;font-size:1.2rem;font-weight:700;color:var(--geo);margin-bottom:6px}
.tri-sides{font-size:.82rem;color:var(--muted);line-height:1.5}
.triples-row{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
.triple{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:6px 14px;font-family:'JetBrains Mono',monospace;font-size:.88rem;font-weight:700;color:var(--math)}
.tw-table{width:100%;border-collapse:collapse;font-size:.85rem;margin:12px 0}
.tw-table th,.tw-table td{padding:8px 10px;border:1px solid var(--border);text-align:center}
.tw-table th{background:var(--surface);font-weight:700;color:var(--geo);font-size:.78rem;text-transform:uppercase;letter-spacing:.5px}
.tw-table td{color:#ccc}

/* â”€â”€ Responsive â”€â”€ */
@media(max-width:600px){
  .mod-meta{flex-wrap:wrap;gap:10px}
  .classify-opts{gap:4px}
  .preview-grid{grid-template-columns:1fr 1fr}
  .welcome-meta{flex-wrap:wrap;gap:12px}
  .results-grid{grid-template-columns:1fr;gap:1px}
  .nav-cards{grid-template-columns:1fr}
  .timer-bar{flex-wrap:wrap;gap:8px}
}
</style>
</head>
<body>
<div class="top-stripe"></div>

<!-- â”€â”€ Screen Progress Dots â”€â”€ -->
<div class="screen-progress" id="screenProgress"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SCREEN 1: WELCOME                             -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen active fade-in" id="screen-welcome">
  <div class="welcome-screen">
    <div class="welcome-badge">Module 5</div>
    <h1>Geometry â€” Shapes, Angles, Area & Volume</h1>
    <p class="welcome-sub">~15% of the test. No trigonometry â€” just core geometry you already know, applied to PSAT-style problems.</p>
    <div class="welcome-meta">
      <span>â± ~60 min</span>
      <span>ğŸ“‹ 5 topics</span>
      <span>ğŸ”¨ 5 exercises</span>
      <span>ğŸ¯ 10 practice Qs</span>
    </div>
    <div class="preview-grid">
      <div class="preview-card">
        <div class="preview-icon">ğŸ”„</div>
        <div class="preview-title">Retrieval Warm-Up</div>
        <div class="preview-desc">5 questions from Module 4 to activate prior knowledge</div>
      </div>
      <div class="preview-card">
        <div class="preview-icon">ğŸ“</div>
        <div class="preview-title">Angles & Triangles</div>
        <div class="preview-desc">Angle pairs, parallel lines, triangle properties</div>
      </div>
      <div class="preview-card">
        <div class="preview-icon">ğŸ“</div>
        <div class="preview-title">Pythagorean Theorem</div>
        <div class="preview-desc">Triples, special right triangles, no trig needed</div>
      </div>
      <div class="preview-card">
        <div class="preview-icon">ğŸ”²</div>
        <div class="preview-title">Area & Volume</div>
        <div class="preview-desc">Formulas, composite shapes, shaded regions</div>
      </div>
      <div class="preview-card">
        <div class="preview-icon">â­•</div>
        <div class="preview-title">Circles</div>
        <div class="preview-desc">Equations, arcs, sectors, central & inscribed angles</div>
      </div>
      <div class="preview-card">
        <div class="preview-icon">â±</div>
        <div class="preview-title">Timed Practice</div>
        <div class="preview-desc">10 PSAT-style questions with confidence tracking</div>
      </div>
    </div>
    <button class="start-btn" onclick="goScreen(1)">Start Learning â†’</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SCREEN 2: RETRIEVAL WARM-UP                   -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-warmup">
  <div class="warmup-container">
    <div class="warmup-header">
      <div class="warmup-badge">Retrieval Warm-Up</div>
      <h2 style="font-family:'Cormorant Garamond',serif;font-size:1.6rem">Module 4 Review</h2>
      <p style="color:var(--muted);font-size:.9rem;margin-top:4px">Quick recall from Problem-Solving & Data Analysis â€” keep those skills sharp.</p>
      <div class="warmup-dots" id="warmupDots"></div>
    </div>
    <div id="warmupContent"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SCREEN 3: LESSON CONTENT                      -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-lesson">
<div class="container">
<div class="mod-header">
  <div class="mod-badge" style="background:var(--geo)">Module 5</div>
  <h1>Geometry â€” Shapes, Angles, Area & Volume</h1>
  <p class="subtitle">~15% of the test. No trigonometry â€” just core geometry you already know, applied to PSAT-style problems.</p>
  <div class="mod-meta"><span>â± ~60 min</span><span>ğŸ“‹ 5 topics + 5 exercises</span><span>ğŸ”¨ Phase 2: Build</span></div>
</div>

<div class="callout" style="background:rgba(248,113,113,.08);border-color:rgba(248,113,113,.3)"><strong style="color:var(--geo)">No Trig on the PSAT 8/9!</strong> Unlike the PSAT/NMSQT and SAT, the PSAT 8/9 does NOT test sine, cosine, tangent, or radians. All triangle problems can be solved with the Pythagorean theorem and side ratios. If you see a right triangle, think ratios and aÂ² + bÂ² = cÂ², never SOH-CAH-TOA.</div>

<!-- TOPIC 5A: Lines, Angles & Triangles -->
<div class="section">
  <div class="section-label">Topic 5A</div>
  <h2>Lines, Angles & Triangles</h2>
</div>

<div class="topic open" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
  <div class="topic-header">
    <div class="topic-badge" style="background:var(--geo)">5A</div>
    <div class="topic-info"><div class="topic-title">Angle Relationships</div><div class="topic-sub">Vertical, supplementary, complementary, parallel lines + transversal</div></div>
    <div class="topic-arrow">â–¸</div>
  </div>
  <div class="topic-body">
    <h4>Basic Angle Pairs</h4>
    <ul>
      <li><strong>Vertical angles:</strong> Formed by intersecting lines, across from each other â†’ EQUAL</li>
      <li><strong>Supplementary angles:</strong> On a straight line â†’ add to <strong>180Â°</strong></li>
      <li><strong>Complementary angles:</strong> Form a right angle â†’ add to <strong>90Â°</strong></li>
    </ul>
    <h4>Parallel Lines + Transversal</h4>
    <p>When a line crosses two parallel lines, it creates 8 angles. You only need to know two values â€” all angles are either equal or supplementary.</p>
    <ul>
      <li><strong>Corresponding angles:</strong> Same position at each intersection â†’ EQUAL</li>
      <li><strong>Alternate interior angles:</strong> Opposite sides, between the parallels â†’ EQUAL</li>
      <li><strong>Co-interior (same-side interior):</strong> Same side, between the parallels â†’ SUPPLEMENTARY (add to 180Â°)</li>
    </ul>
    <div class="callout" style="background:rgba(248,113,113,.08);border-color:rgba(248,113,113,.3)"><strong style="color:var(--geo)">Quick Rule:</strong> At a parallel lines + transversal crossing, every angle is either xÂ° or (180 âˆ’ x)Â°. If you know one angle, you know all eight.</div>
  </div>
</div>

<div class="topic" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
  <div class="topic-header">
    <div class="topic-badge" style="background:var(--geo)">5A+</div>
    <div class="topic-info"><div class="topic-title">Triangle Properties</div><div class="topic-sub">Angle sum, exterior angle theorem, similar triangles, triangle inequality</div></div>
    <div class="topic-arrow">â–¸</div>
  </div>
  <div class="topic-body">
    <div class="formula-box">
      <div><span class="fn">Angle Sum:</span> Interior angles always add to 180Â°</div>
      <div><span class="fn">Exterior Angle:</span> = sum of the two remote (non-adjacent) interior angles</div>
      <div><span class="fn">Similar Triangles:</span> Same shape â†’ proportional sides. Set up a proportion.</div>
      <div><span class="fn">Triangle Inequality:</span> Any side &lt; sum of the other two sides</div>
    </div>
    <p><strong>Example:</strong> A triangle has angles 40Â° and 65Â°. The third angle = 180Â° âˆ’ 40Â° âˆ’ 65Â° = 75Â°.</p>
    <p><strong>Exterior angle example:</strong> If two interior angles are 50Â° and 70Â°, the exterior angle at the third vertex = 50Â° + 70Â° = 120Â°.</p>
    <div class="callout"><strong>Similar triangles shortcut:</strong> If two triangles share an angle AND have parallel sides, they're similar. Set up proportions: short/short = long/long = hyp/hyp.</div>
  </div>
</div>

<!-- TOPIC 5B: Pythagorean Theorem & Special Right Triangles -->
<div class="section">
  <div class="section-label">Topic 5B</div>
  <h2>Pythagorean Theorem & Special Right Triangles</h2>
</div>

<div class="topic open" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
  <div class="topic-header">
    <div class="topic-badge" style="background:var(--geo)">5B</div>
    <div class="topic-info"><div class="topic-title">Pythagorean Theorem & Common Triples</div><div class="topic-sub">aÂ² + bÂ² = cÂ² and the triples you should memorize</div></div>
    <div class="topic-arrow">â–¸</div>
  </div>
  <div class="topic-body">
    <div class="formula-box">
      <div><span class="fn">Pythagorean Theorem:</span> aÂ² + bÂ² = cÂ²</div>
      <div style="color:var(--muted);font-size:.82rem">c = hypotenuse (longest side, opposite the right angle). a and b = legs.</div>
    </div>
    <p><strong>Example:</strong> Legs are 6 and 8. Hypotenuse = âˆš(36 + 64) = âˆš100 = 10.</p>
    <p>Recognizing triples saves time â€” you don't need to calculate!</p>
    <p style="font-weight:700;font-size:.9rem;margin:10px 0 6px">Common Pythagorean Triples (memorize these!):</p>
    <div class="triples-row">
      <div class="triple">3 â€“ 4 â€“ 5</div>
      <div class="triple">5 â€“ 12 â€“ 13</div>
      <div class="triple">8 â€“ 15 â€“ 17</div>
      <div class="triple">7 â€“ 24 â€“ 25</div>
    </div>
    <p style="font-size:.85rem;color:var(--muted);margin-top:4px">Multiples work too! 6-8-10 and 9-12-15 are both from the 3-4-5 family.</p>
    <div class="callout"><strong>PSAT Trap:</strong> Don't assume c is the longest number you see â€” c must be the <em>hypotenuse</em> (opposite the right angle). If the problem asks for a leg, rearrange: aÂ² = cÂ² âˆ’ bÂ².</div>
  </div>
</div>

<div class="topic" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
  <div class="topic-header">
    <div class="topic-badge" style="background:var(--geo)">5B+</div>
    <div class="topic-info"><div class="topic-title">Special Right Triangles (by Side Ratios)</div><div class="topic-sub">30-60-90 and 45-45-90 â€” no trig needed</div></div>
    <div class="topic-arrow">â–¸</div>
  </div>
  <div class="topic-body">
    <p>These triangles appear on nearly every PSAT. Learn the <strong>side ratios</strong> and you can find any missing side.</p>
    <div class="tri-grid">
      <div class="tri-card">
        <div class="tri-name">30-60-90</div>
        <div class="tri-ratio">1 : âˆš3 : 2</div>
        <div class="tri-sides">Short leg : Long leg : Hypotenuse<br>(Opp 30Â° : Opp 60Â° : Opp 90Â°)</div>
      </div>
      <div class="tri-card">
        <div class="tri-name">45-45-90</div>
        <div class="tri-ratio">1 : 1 : âˆš2</div>
        <div class="tri-sides">Leg : Leg : Hypotenuse<br>(Two legs always equal)</div>
      </div>
    </div>
    <h4>How to Use Ratios</h4>
    <p><strong>30-60-90 example:</strong> If the short leg (opposite 30Â°) is 5, then long leg = 5âˆš3 â‰ˆ 8.66, hypotenuse = 10.</p>
    <p><strong>45-45-90 example:</strong> If each leg is 7, then hypotenuse = 7âˆš2 â‰ˆ 9.90.</p>
    <p><strong>Working backwards:</strong> If the hypotenuse of a 30-60-90 is 12, the short leg = 12/2 = 6, long leg = 6âˆš3.</p>
    <div class="callout-blue callout"><strong>No Trig Needed:</strong> On the PSAT 8/9, every "find the missing side" right triangle problem can be solved with either the Pythagorean theorem or these ratios. You never need sin/cos/tan.</div>
  </div>
</div>

<!-- TOPIC 5C: Area, Perimeter & Volume -->
<div class="section">
  <div class="section-label">Topic 5C</div>
  <h2>Area, Perimeter & Volume</h2>
  <p>These formulas are on the reference sheet, but knowing them cold saves time and helps you pick the right one faster.</p>
</div>

<div class="fm-grid">
  <div class="fm-card"><div class="fm-name">Rectangle</div><div class="fm-eq">A = lw</div></div>
  <div class="fm-card"><div class="fm-name">Triangle</div><div class="fm-eq">A = Â½bh</div></div>
  <div class="fm-card"><div class="fm-name">Parallelogram</div><div class="fm-eq">A = bh</div></div>
  <div class="fm-card"><div class="fm-name">Trapezoid</div><div class="fm-eq">A = Â½(bâ‚+bâ‚‚)h</div></div>
  <div class="fm-card"><div class="fm-name">Rect. Prism</div><div class="fm-eq">V = lwh</div></div>
  <div class="fm-card"><div class="fm-name">Cylinder</div><div class="fm-eq">V = Ï€rÂ²h</div></div>
  <div class="fm-card"><div class="fm-name">Cone</div><div class="fm-eq">V = â…“Ï€rÂ²h</div></div>
  <div class="fm-card"><div class="fm-name">Pyramid</div><div class="fm-eq">V = â…“Bh</div></div>
  <div class="fm-card"><div class="fm-name">Sphere</div><div class="fm-eq">V = â´â„â‚ƒÏ€rÂ³</div></div>
</div>

<div class="topic" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
  <div class="topic-header">
    <div class="topic-badge" style="background:var(--geo)">5C</div>
    <div class="topic-info"><div class="topic-title">Key Patterns & Composite Shapes</div><div class="topic-sub">The â…“ pattern, shaded regions, and hidden triangles</div></div>
    <div class="topic-arrow">â–¸</div>
  </div>
  <div class="topic-body">
    <h4>The â…“ Pattern</h4>
    <p>Cones and pyramids are always <strong>â…“</strong> of the "full" version. Cone = â…“ Ã— cylinder. Pyramid = â…“ Ã— prism. This is the easiest way to remember them.</p>
    <h4>Composite Shapes (Shaded Regions)</h4>
    <p>The PSAT loves shaded region problems. The strategy is always:</p>
    <div class="formula-box">
      <div><span class="fn">Shaded Area =</span> Area of OUTER shape âˆ’ Area of INNER shape</div>
    </div>
    <p><strong>Example:</strong> A circle with radius 5 is inscribed in a square. Shaded area = square âˆ’ circle = (10)Â² âˆ’ Ï€(5)Â² = 100 âˆ’ 25Ï€.</p>
    <h4>Hidden Right Triangles</h4>
    <p>Many PSAT problems contain a hidden right triangle. Look for:</p>
    <ul>
      <li>Diagonals of rectangles â†’ creates right triangles</li>
      <li>Heights dropped inside triangles â†’ creates two right triangles</li>
      <li>Distances between two points â†’ horizontal + vertical = legs of a right triangle</li>
    </ul>
    <div class="callout"><strong>Common trap:</strong> Height â‰  slant side! The height of a triangle is ALWAYS perpendicular to the base. If they give a slant height, you may need Pythagorean theorem to find the actual height first.</div>
  </div>
</div>

<!-- TOPIC 5D: Circles -->
<div class="section">
  <div class="section-label">Topic 5D</div>
  <h2>Circles</h2>
</div>

<div class="fm-grid">
  <div class="fm-card"><div class="fm-name">Equation</div><div class="fm-eq">(xâˆ’h)Â²+(yâˆ’k)Â²=rÂ²</div></div>
  <div class="fm-card"><div class="fm-name">Center</div><div class="fm-eq">(h, k)</div></div>
  <div class="fm-card"><div class="fm-name">Area</div><div class="fm-eq">A = Ï€rÂ²</div></div>
  <div class="fm-card"><div class="fm-name">Circumference</div><div class="fm-eq">C = 2Ï€r</div></div>
  <div class="fm-card"><div class="fm-name">Arc Length</div><div class="fm-eq">(Î¸/360) Ã— 2Ï€r</div></div>
  <div class="fm-card"><div class="fm-name">Sector Area</div><div class="fm-eq">(Î¸/360) Ã— Ï€rÂ²</div></div>
</div>

<div class="topic open" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
  <div class="topic-header">
    <div class="topic-badge" style="background:var(--geo)">5D</div>
    <div class="topic-info"><div class="topic-title">Circle Equations, Arcs & Angles</div><div class="topic-sub">Reading center-radius form, arc/sector fractions, central vs. inscribed angles</div></div>
    <div class="topic-arrow">â–¸</div>
  </div>
  <div class="topic-body">
    <h4>Reading the Circle Equation</h4>
    <p><code>(x âˆ’ 3)Â² + (y + 2)Â² = 25</code> â†’ Center = <strong>(3, âˆ’2)</strong>, Radius = <strong>5</strong> (because âˆš25 = 5)</p>
    <p><strong>Watch the signs:</strong> (x âˆ’ h) means center x = +h. (y + 2) means (y âˆ’ (âˆ’2)), so center y = âˆ’2.</p>

    <h4>Arc Length & Sector Area</h4>
    <p>Both use the same fraction: <strong>central angle / 360</strong>. Then multiply by the full circumference (arc length) or full area (sector area).</p>
    <p><strong>Example:</strong> A circle with radius 6 has a 90Â° sector.</p>
    <p>Arc length = (90/360) Ã— 2Ï€(6) = Â¼ Ã— 12Ï€ = 3Ï€</p>
    <p>Sector area = (90/360) Ã— Ï€(6)Â² = Â¼ Ã— 36Ï€ = 9Ï€</p>

    <h4>Angle Rules</h4>
    <ul>
      <li><strong>Central angle</strong> (vertex at center) = intercepted arc</li>
      <li><strong>Inscribed angle</strong> (vertex on circle) = <strong>HALF</strong> the intercepted arc</li>
      <li><strong>Tangent line:</strong> Touches circle at one point and is perpendicular to the radius (90Â°)</li>
    </ul>
    <div class="callout-blue callout"><strong>Desmos Power Move:</strong> Type <code>(xâˆ’2)Â²+(y+3)Â²=25</code> directly to graph any circle. Click intersection points with lines.</div>
  </div>
</div>

<!-- TOPIC 5E: Coordinate Geometry -->
<div class="section">
  <div class="section-label">Topic 5E</div>
  <h2>Coordinate Geometry</h2>
</div>

<div class="topic" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
  <div class="topic-header">
    <div class="topic-badge" style="background:var(--geo)">5E</div>
    <div class="topic-info"><div class="topic-title">Distance & Midpoint Formulas</div><div class="topic-sub">Finding lengths and midpoints on the coordinate plane</div></div>
    <div class="topic-arrow">â–¸</div>
  </div>
  <div class="topic-body">
    <div class="formula-box">
      <div><span class="fn">Distance:</span> d = âˆš[(xâ‚‚âˆ’xâ‚)Â² + (yâ‚‚âˆ’yâ‚)Â²]</div>
      <div style="color:var(--muted);font-size:.82rem;margin-bottom:4px">This IS the Pythagorean theorem in disguise!</div>
      <div><span class="fn">Midpoint:</span> M = ((xâ‚+xâ‚‚)/2, (yâ‚+yâ‚‚)/2)</div>
      <div style="color:var(--muted);font-size:.82rem">Average the x's and average the y's</div>
    </div>
    <p><strong>Example:</strong> Distance from (1, 2) to (4, 6) = âˆš[(4âˆ’1)Â² + (6âˆ’2)Â²] = âˆš[9 + 16] = âˆš25 = 5.</p>
    <p>That's a 3-4-5 right triangle! Horizontal distance = 3, vertical distance = 4.</p>
    <div class="callout"><strong>Don't memorize the distance formula separately.</strong> Just draw a right triangle on the coordinate plane. The horizontal and vertical distances are the legs. Use aÂ² + bÂ² = cÂ².</div>
  </div>
</div>

<!-- â”€â”€ Trap Taxonomy Section â”€â”€ -->
<div class="section">
  <div class="section-label">Math Trap Taxonomy</div>
  <h2>Four Traps in Geometry</h2>
  <p>These traps catch students who rush through geometry problems. Know them and you'll dodge easy-to-lose points.</p>
  <div class="trap-taxonomy">
    <div class="trap-card">
      <div class="trap-number" style="background:var(--wrong)">1</div>
      <div class="trap-card-body">
        <div class="trap-card-name">ğŸ¯ The Wrong Target</div>
        <div class="trap-card-desc">Found the value of x but the question asked for 2x, the perimeter, or the area. Always re-read what they're actually asking.</div>
        <div class="trap-card-example">Found leg = 5, but they asked for hypotenuse. Answer: âˆš(25+144) = 13, not 5</div>
      </div>
    </div>
    <div class="trap-card">
      <div class="trap-number" style="background:var(--math)">2</div>
      <div class="trap-card-body">
        <div class="trap-card-name">ğŸ“ The Phantom Height</div>
        <div class="trap-card-desc">Used the slant side as the height. Height must ALWAYS be perpendicular to the base â€” if they give a slant, you need Pythagorean theorem first.</div>
        <div class="trap-card-example">Triangle: base=10, slant=13, actual height=12 (from 5-12-13 triple). A=Â½(10)(12)=60, NOT 65</div>
      </div>
    </div>
    <div class="trap-card">
      <div class="trap-number" style="background:var(--geo)">3</div>
      <div class="trap-card-body">
        <div class="trap-card-name">ğŸ”„ The Sign Flip</div>
        <div class="trap-card-desc">Misread the signs in circle equations. (x+4) means center x = âˆ’4, not +4. The signs in (xâˆ’h)Â²+(yâˆ’k)Â²=rÂ² are opposite to what you see.</div>
        <div class="trap-card-example">(x+3)Â²+(yâˆ’2)Â²=49 â†’ Center (âˆ’3, 2), NOT (3, âˆ’2). Radius = 7</div>
      </div>
    </div>
    <div class="trap-card">
      <div class="trap-number" style="background:var(--advanced)">4</div>
      <div class="trap-card-body">
        <div class="trap-card-name">ğŸ“ The Unit Mismatch</div>
        <div class="trap-card-desc">Mixed inches and feet, or cm and m, without converting. All measurements must be in the same unit before computing area or volume.</div>
        <div class="trap-card-example">Rectangle: 2 ft by 18 in. Convert first: 2ft = 24in. A = 24Ã—18 = 432 sq in, NOT 36</div>
      </div>
    </div>
  </div>
</div>

<!-- EXERCISES -->
<div class="section"><div class="section-label">Interactive Exercise 1</div><h2>Angle & Triangle Solver</h2><p>Find the missing angle or side in each problem.</p><div class="exercise" style="border-color:var(--geo)" id="angleEx"></div></div>

<div class="section"><div class="section-label">Interactive Exercise 2</div><h2>Special Right Triangles Drill</h2><p>Find the missing side using the ratio. No calculator needed â€” leave answers in exact form.</p><div class="exercise" style="border-color:var(--geo)" id="triEx"></div></div>

<div class="section"><div class="section-label">Interactive Exercise 3</div><h2>Which Formula Do I Need?</h2><p>Read the problem and pick the correct formula. Building this skill saves time on test day.</p><div class="exercise" style="border-color:var(--accent)" id="formulaEx"></div></div>

<div class="section"><div class="section-label">Interactive Exercise 4</div><h2>Circle Equation Workshop</h2><p>Read each equation and identify the center and radius.</p><div class="exercise" style="border-color:var(--geo)" id="circleEx"></div></div>

<div class="section"><div class="section-label">Interactive Exercise 5</div><h2>Composite Shape Calculator</h2><p>Find the shaded area in each problem. Leave answers in terms of Ï€ where appropriate.</p><div class="exercise" style="border-color:var(--geo)" id="compEx"></div></div>

<div style="text-align:center;padding:24px 0">
  <button class="start-btn" onclick="goScreen(3)">Continue to Practice Questions â†’</button>
</div>
</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SCREEN 4: TIMED PRACTICE                      -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-practice">
<div class="container">
  <div class="section-label">PSAT 8/9 Practice</div>
  <h2 style="font-family:'Cormorant Garamond',serif;font-size:1.6rem;margin-bottom:4px">Practice Questions</h2>
  <p style="color:var(--muted);font-size:.9rem;margin-bottom:16px">10 questions at three difficulty tiers. Tag your confidence before answering.</p>

  <div class="timer-bar" id="timerBar">
    <div class="timer-display" id="timerDisplay">--:--</div>
    <div class="timer-track"><div class="timer-fill" id="timerFill"></div></div>
    <div class="q-dots" id="qDots"></div>
    <button class="timer-toggle" id="timerToggle" onclick="toggleTimer()">â± Timer OFF</button>
  </div>

  <div id="psatPractice"></div>
  <div id="practiceResults" style="display:none"></div>

  <div id="practiceNav" style="display:none;text-align:center;padding:24px 0">
    <button class="start-btn" onclick="goScreen(4)">View Summary & Complete Module â†’</button>
  </div>
</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SCREEN 5: MODULE COMPLETE                     -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-complete">
  <div class="complete-screen">
    <div class="complete-icon">ğŸ“</div>
    <h1>Module 5 Complete!</h1>
    <p class="complete-sub">You've conquered Geometry â€” the most visual section of the PSAT 8/9.</p>

    <div class="takeaway-list">
      <div style="font-weight:700;margin-bottom:12px;font-size:.85rem;color:var(--geo);text-transform:uppercase;letter-spacing:1px">Key Takeaways</div>
      <div class="takeaway-item"><span class="takeaway-check">âœ“</span> Geometry is ~15% of the PSAT 8/9 â€” and there is NO trigonometry.</div>
      <div class="takeaway-item"><span class="takeaway-check">âœ“</span> Parallel lines + transversal: every angle is either xÂ° or (180 âˆ’ x)Â°.</div>
      <div class="takeaway-item"><span class="takeaway-check">âœ“</span> Triangle angles sum to 180Â°. Exterior angle = sum of the two remote interior angles.</div>
      <div class="takeaway-item"><span class="takeaway-check">âœ“</span> Memorize Pythagorean triples: 3-4-5, 5-12-13, 8-15-17 (and their multiples).</div>
      <div class="takeaway-item"><span class="takeaway-check">âœ“</span> Special right triangles: 30-60-90 â†’ 1:âˆš3:2 | 45-45-90 â†’ 1:1:âˆš2.</div>
      <div class="takeaway-item"><span class="takeaway-check">âœ“</span> Cones and pyramids = â…“ of the full shape. Shaded region = outer âˆ’ inner.</div>
      <div class="takeaway-item"><span class="takeaway-check">âœ“</span> Circle equation: (xâˆ’h)Â²+(yâˆ’k)Â²=rÂ². Center = (h,k), radius = âˆš(rÂ²). Watch the signs!</div>
      <div class="takeaway-item"><span class="takeaway-check">âœ“</span> Arc/sector: use the fraction (central angle / 360) Ã— full circumference or area.</div>
      <div class="takeaway-item"><span class="takeaway-check">âœ“</span> Distance formula IS the Pythagorean theorem. Draw the right triangle on the coordinate plane.</div>
    </div>

    <div id="completePracticeStats"></div>

    <div class="nav-cards">
      <a class="nav-card" href="module-4.html">
        <div class="nav-card-label">â† Previous</div>
        <div class="nav-card-title">Module 4: Data Analysis</div>
      </a>
      <a class="nav-card" href="module-6.html" style="border-color:var(--geo)">
        <div class="nav-card-label">Next â†’</div>
        <div class="nav-card-title">Module 6: Desmos Mastery</div>
      </a>
    </div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCREEN NAVIGATION SYSTEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SCREENS = ['screen-welcome','screen-warmup','screen-lesson','screen-practice','screen-complete'];
let currentScreen = 0;

function goScreen(idx) {
  if (idx < 0 || idx >= SCREENS.length) return;
  const cur = document.getElementById(SCREENS[currentScreen]);
  const nxt = document.getElementById(SCREENS[idx]);
  cur.classList.remove('fade-in');
  cur.classList.add('fade-out');
  setTimeout(() => {
    cur.classList.remove('active','fade-out');
    nxt.classList.add('active','fade-in');
    currentScreen = idx;
    updateProgressDots();
    window.scrollTo(0, 0);
    if (idx === 3 && timerEnabled) startTimer();
  }, 300);
}

function updateProgressDots() {
  const cont = document.getElementById('screenProgress');
  cont.innerHTML = SCREENS.map((s, i) => {
    let cls = 'screen-dot';
    if (i < currentScreen) cls += ' completed';
    if (i === currentScreen) cls += ' current';
    return `<div class="${cls}" onclick="${i <= currentScreen ? 'goScreen('+i+')' : ''}" title="${['Welcome','Warm-Up','Lesson','Practice','Complete'][i]}"></div>`;
  }).join('');
}
updateProgressDots();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RETRIEVAL WARM-UP (Module 4 content)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const WARMUP_QS = [
  {
    source: 'Module 4 â€” Ratios',
    q: 'A recipe uses 3 cups of flour for every 2 cups of sugar. If you use 12 cups of flour, how many cups of sugar do you need?',
    ch: ['6','8','9','18'],
    c: 1,
    fb: 'Set up a proportion: 3/2 = 12/x. Cross-multiply: 3x = 24, so x = 8 cups of sugar.'
  },
  {
    source: 'Module 4 â€” Percent Increase',
    q: 'A shirt originally costs $40 and is marked up 25%. What is the new price?',
    ch: ['$45','$50','$55','$65'],
    c: 1,
    fb: '25% of $40 = $10. New price = $40 + $10 = $50. Or: $40 Ã— 1.25 = $50.'
  },
  {
    source: 'Module 4 â€” Probability',
    q: 'A bag has 3 red, 5 blue, and 2 green marbles. What is the probability of drawing a blue marble?',
    ch: ['1/5','3/10','1/2','5/10'],
    c: 2,
    fb: 'Total marbles = 10. P(blue) = 5/10 = 1/2.'
  },
  {
    source: 'Module 4 â€” Two-Way Tables',
    q: 'In a class, 12 students play sports and get A\'s, 8 play sports but don\'t get A\'s. What fraction of athletes get A\'s?',
    ch: ['12/20','8/20','12/8','20/12'],
    c: 0,
    fb: 'Total athletes = 12 + 8 = 20. Fraction with A\'s = 12/20 = 3/5.'
  },
  {
    source: 'Module 4 â€” Correlation',
    q: 'A study finds that students who sleep more tend to score higher on tests. Can we conclude that sleeping more CAUSES higher test scores?',
    ch: ['Yes, the data proves it','No â€” correlation â‰  causation','Yes, if the sample is large','Only with a randomized experiment'],
    c: 1,
    fb: 'Observational studies show association, not causation. Lurking variables (like study habits) could explain both.'
  }
];

let warmupIdx = 0;
let warmupAnswers = [];
let warmupAnswered = false;

function renderWarmup() {
  document.getElementById('warmupDots').innerHTML = WARMUP_QS.map((_, i) => {
    let cls = 'warmup-dot';
    if (i < warmupIdx) cls += warmupAnswers[i] ? ' done-correct' : ' done-wrong';
    if (i === warmupIdx && warmupIdx < WARMUP_QS.length) cls += ' active';
    return `<div class="${cls}"></div>`;
  }).join('');

  const cont = document.getElementById('warmupContent');

  if (warmupIdx >= WARMUP_QS.length) {
    const cor = warmupAnswers.filter(Boolean).length;
    cont.innerHTML = `
      <div class="warmup-summary">
        <div class="warmup-badge">Warm-Up Complete</div>
        <div class="warmup-score">${cor} / ${WARMUP_QS.length}</div>
        <p style="color:var(--muted);font-size:.9rem;margin-bottom:8px">
          ${cor === 5 ? 'Perfect recall! Module 4 knowledge is locked in.' :
            cor >= 3 ? 'Good recall! A couple of PSDA topics to revisit.' :
            'Some gaps from Module 4 â€” consider a quick review before continuing.'}
        </p>
        <button class="warmup-continue" onclick="goScreen(2)">Continue to Lesson â†’</button>
      </div>`;
    return;
  }

  const q = WARMUP_QS[warmupIdx];
  warmupAnswered = false;
  cont.innerHTML = `
    <div class="warmup-q">
      <div class="source-tag">From ${q.source}</div>
      <div class="q-text">${q.q}</div>
      <div class="warmup-choices" id="warmupChoices">
        ${q.ch.map((ch, ci) => `<div class="warmup-choice" onclick="answerWarmup(${ci})">${ch}</div>`).join('')}
      </div>
      <div id="warmupFb" style="display:none"></div>
    </div>`;
}

function answerWarmup(ci) {
  if (warmupAnswered) return;
  warmupAnswered = true;
  const q = WARMUP_QS[warmupIdx];
  const correct = ci === q.c;
  warmupAnswers.push(correct);

  const choices = document.querySelectorAll('.warmup-choice');
  choices.forEach((ch, i) => {
    ch.classList.add('wu-dis');
    if (i === q.c) ch.classList.add('wu-correct');
    else if (i === ci && !correct) ch.classList.add('wu-wrong');
  });

  const fb = document.getElementById('warmupFb');
  fb.style.display = 'block';
  fb.innerHTML = `<div class="warmup-fb">${correct ? 'âœ“ ' : 'âœ— '}${q.fb}</div>
    <button class="warmup-next" onclick="warmupIdx++;renderWarmup()">
      ${warmupIdx < WARMUP_QS.length - 1 ? 'Next Question â†’' : 'See Results â†’'}
    </button>`;

  document.getElementById('warmupDots').innerHTML = WARMUP_QS.map((_, i) => {
    let cls = 'warmup-dot';
    if (i < warmupAnswers.length) cls += warmupAnswers[i] ? ' done-correct' : ' done-wrong';
    else if (i === warmupIdx + 1) cls += ' active';
    return `<div class="${cls}"></div>`;
  }).join('');
}

renderWarmup();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GENERIC HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function mkSc(c,t){return `<div class="score-bar"><div class="score-bar-label">Score</div><div class="score-bar-track"><div class="score-bar-fill" style="width:${t?c/t*100:0}%"></div></div><div class="score-bar-val">${c}/${t}</div></div>`;}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EXERCISE 1: ANGLE & TRIANGLE SOLVER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const ANG=[
  {p:'Two angles on a straight line. One is 65Â°. What is the other?',a:115,s:'Supplementary: 180Â° âˆ’ 65Â° = 115Â°.',t:1},
  {p:'Two vertical angles. One is 42Â°. What is the other?',a:42,s:'Vertical angles are equal: 42Â°.',t:1},
  {p:'A triangle has angles 50Â° and 70Â°. What is the third angle?',a:60,s:'180Â° âˆ’ 50Â° âˆ’ 70Â° = 60Â°.',t:1},
  {p:'Parallel lines cut by a transversal. One angle is 130Â°. What is the alternate interior angle?',a:130,s:'Alternate interior angles are equal: 130Â°.',t:1},
  {p:'An exterior angle of a triangle equals the sum of the two non-adjacent interior angles. If those are 45Â° and 55Â°, what is the exterior angle?',a:100,s:'45Â° + 55Â° = 100Â°.',t:2},
  {p:'Two angles are complementary. One is 3x and the other is 2x + 10. Solve for x.',a:16,s:'3x + 2x + 10 = 90 â†’ 5x = 80 â†’ x = 16.',t:2},
  {p:'In similar triangles, the sides of the smaller are 3, 4, 5. The longest side of the larger is 15. What is the shortest side of the larger?',a:9,s:'Scale factor: 15/5 = 3. Shortest = 3 Ã— 3 = 9.',t:2},
  {p:'A triangle has sides 7, 10, and x. What is the largest possible integer value of x?',a:16,s:'Triangle inequality: x < 7 + 10 = 17. Largest integer: 16.',t:3},
];
function renderAng(){
  document.getElementById('angleEx').innerHTML='<h3>ğŸ“ Angles & Triangles</h3><div class="exercise-sub">Find the missing value.</div>'+
    ANG.map((q,i)=>`<div class="ex-item"><div style="margin-bottom:4px"><span class="tier tier-${q.t}">${q.t===1?'Easy':q.t===2?'Medium':'Hard'}</span></div><div class="ex-prompt">${q.p}</div><div class="ex-input-row"><span style="font-size:.85rem;color:var(--muted)">= </span><input class="ex-input" type="number" step="any" id="ang${i}" placeholder="?"><button class="ex-btn" style="background:var(--geo)" onclick="chkAng(${i})">Check</button></div><div class="ex-fb" id="angFb${i}"></div></div>`).join('');
}
function chkAng(i){
  var v=parseFloat(document.getElementById('ang'+i).value),fb=document.getElementById('angFb'+i),q=ANG[i];
  if(isNaN(v)){fb.className='ex-fb show wrong';fb.textContent='Enter a number.';return;}
  var ok=Math.abs(v-q.a)<0.1;
  fb.className='ex-fb show '+(ok?'correct':'wrong');
  fb.textContent=(ok?'âœ“ Correct! ':'âœ— Not quite. ')+q.s;
}
renderAng();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EXERCISE 2: SPECIAL RIGHT TRIANGLES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TRI=[
  {p:'<strong>45-45-90:</strong> Each leg = 5. Hypotenuse = ?',acc:['5âˆš2','5*sqrt(2)','5sqrt2','7.07'],s:'45-45-90 ratio: hyp = leg Ã— âˆš2 = 5âˆš2 â‰ˆ 7.07.'},
  {p:'<strong>30-60-90:</strong> Short leg = 4. Hypotenuse = ?',acc:['8'],s:'30-60-90: hyp = 2 Ã— short leg = 2 Ã— 4 = 8.'},
  {p:'<strong>30-60-90:</strong> Short leg = 4. Long leg = ?',acc:['4âˆš3','4*sqrt(3)','4sqrt3','6.93'],s:'30-60-90: long leg = short Ã— âˆš3 = 4âˆš3 â‰ˆ 6.93.'},
  {p:'<strong>45-45-90:</strong> Hypotenuse = 10. Each leg = ?',acc:['5âˆš2','5*sqrt(2)','5sqrt2','7.07'],s:'leg = hyp/âˆš2 = 10/âˆš2 = 5âˆš2 â‰ˆ 7.07.'},
  {p:'<strong>30-60-90:</strong> Hypotenuse = 14. Short leg = ?',acc:['7'],s:'short = hyp/2 = 14/2 = 7.'},
  {p:'Right triangle with legs 6 and 8. Hypotenuse = ?',acc:['10'],s:'6Â² + 8Â² = 36 + 64 = 100. âˆš100 = 10. (3-4-5 triple Ã— 2!)'},
];
function renderTri(){
  document.getElementById('triEx').innerHTML='<h3>ğŸ“ Special Triangles</h3><div class="exercise-sub">Use ratios. Write exact form like 5âˆš2, or a decimal.</div>'+
    TRI.map((q,i)=>`<div class="ex-item"><div class="ex-prompt">${q.p}</div><div class="ex-input-row"><span style="font-size:.85rem;color:var(--muted)">= </span><input class="ex-input" type="text" id="tri${i}" placeholder="?" style="width:120px"><button class="ex-btn" style="background:var(--geo)" onclick="chkTri(${i})">Check</button></div><div class="ex-fb" id="triFb${i}"></div></div>`).join('');
}
function chkTri(i){
  var v=document.getElementById('tri'+i).value.trim().replace(/\s/g,''),fb=document.getElementById('triFb'+i),q=TRI[i];
  if(!v){fb.className='ex-fb show wrong';fb.textContent='Enter an answer.';return;}
  var ok=q.acc.some(function(a){return v.toLowerCase()===a.toLowerCase()||Math.abs(parseFloat(v)-parseFloat(a))<0.1;});
  fb.className='ex-fb show '+(ok?'correct':'wrong');
  fb.textContent=(ok?'âœ“ Correct! ':'âœ— Answer: '+q.acc[0]+'. ')+q.s;
}
renderTri();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EXERCISE 3: WHICH FORMULA DO I NEED?
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const FRM=[
  {q:'Find the area of a triangle with base 10 and height 6.',c:'A = Â½bh',fb:'Â½ Ã— 10 Ã— 6 = 30.'},
  {q:'Find the volume of a cylinder with radius 3 and height 10.',c:'V = Ï€rÂ²h',fb:'Ï€(3Â²)(10) = 90Ï€.'},
  {q:'Find the circumference of a circle with radius 7.',c:'C = 2Ï€r',fb:'2Ï€(7) = 14Ï€.'},
  {q:'Find the area of a sector with central angle 60Â° and radius 9.',c:'(Î¸/360)Ï€rÂ²',fb:'(60/360)Ï€(81) = 13.5Ï€.'},
  {q:'Find the volume of a cone with radius 4 and height 9.',c:'V = â…“Ï€rÂ²h',fb:'â…“Ï€(16)(9) = 48Ï€.'},
  {q:'Find the area of a trapezoid with parallel sides 5 and 11, height 4.',c:'A = Â½(bâ‚+bâ‚‚)h',fb:'Â½(5+11)(4) = 32.'},
  {q:'Find the area of a shaded region between a square (side 10) and an inscribed circle.',c:'A(square)âˆ’A(circle)',fb:'100 âˆ’ Ï€(25) = 100 âˆ’ 25Ï€.'},
  {q:'Find the volume of a sphere with radius 6.',c:'V = â´â„â‚ƒÏ€rÂ³',fb:'â´â„â‚ƒÏ€(216) = 288Ï€.'},
];
const FOPTS=['A = Â½bh','V = Ï€rÂ²h','C = 2Ï€r','(Î¸/360)Ï€rÂ²','V = â…“Ï€rÂ²h','A = Â½(bâ‚+bâ‚‚)h','A(square)âˆ’A(circle)','V = â´â„â‚ƒÏ€rÂ³'];
var frmA={};
function renderFrm(){
  var tot=FRM.length,cor=Object.entries(frmA).filter(function(e){return e[1]===FRM[e[0]].c;}).length;
  document.getElementById('formulaEx').innerHTML='<h3>ğŸ¤” Pick the Formula</h3><div class="exercise-sub">Which formula solves this problem?</div>'+
    FRM.map(function(q,i){var a=frmA[i],h=a!==undefined;
      return '<div class="ex-item"><div class="ex-prompt">'+q.q+'</div><div class="classify-opts">'+FOPTS.map(function(o,oi){var c='classify-opt';if(h){c+=' cl-dis';if(o===q.c)c+=' cl-correct';else if(o===a)c+=' cl-wrong';}return '<div class="'+c+'" onclick="aFrm('+i+','+oi+')">'+o+'</div>';}).join('')+'</div><div class="ex-fb'+(h?' show':'')+(h?(a===q.c?' correct':' wrong'):'')+'">'+(h?(a===q.c?'\u2713 ':'\u2717 ')+q.fb:'')+'</div></div>';
    }).join('')+mkSc(cor,tot);
}
function aFrm(i,idx){if(frmA[i]!==undefined)return;frmA[i]=FOPTS[idx];renderFrm();}
renderFrm();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EXERCISE 4: CIRCLE EQUATIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CIR=[
  {eq:'(x âˆ’ 3)Â² + (y âˆ’ 5)Â² = 16',center:'(3, 5)',r:'4'},
  {eq:'(x + 1)Â² + (y âˆ’ 4)Â² = 49',center:'(âˆ’1, 4)',r:'7'},
  {eq:'xÂ² + (y + 6)Â² = 9',center:'(0, âˆ’6)',r:'3'},
  {eq:'(x âˆ’ 7)Â² + (y + 2)Â² = 100',center:'(7, âˆ’2)',r:'10'},
  {eq:'(x + 5)Â² + yÂ² = 36',center:'(âˆ’5, 0)',r:'6'},
];
function renderCir(){
  document.getElementById('circleEx').innerHTML='<h3>â­• Read the Circle</h3><div class="exercise-sub">For each equation, type the center as (h, k) and the radius.</div>'+
    CIR.map((q,i)=>`<div class="ex-item"><div class="ex-prompt" style="font-family:'JetBrains Mono',monospace;color:var(--math)">${q.eq}</div><div class="ex-input-row"><span style="font-size:.85rem;color:var(--muted)">Center:</span><input class="ex-input" type="text" id="cirC${i}" placeholder="(h, k)" style="width:110px"><span style="font-size:.85rem;color:var(--muted)">Radius:</span><input class="ex-input" type="text" id="cirR${i}" placeholder="r" style="width:60px"><button class="ex-btn" style="background:var(--geo)" onclick="chkCir(${i})">Check</button></div><div class="ex-fb" id="cirFb${i}"></div></div>`).join('');
}
function chkCir(i){
  var vc=document.getElementById('cirC'+i).value.trim().replace(/\s/g,''),vr=document.getElementById('cirR'+i).value.trim(),fb=document.getElementById('cirFb'+i),q=CIR[i];
  if(!vc||!vr){fb.className='ex-fb show wrong';fb.textContent='Fill in both fields.';return;}
  var cOk=vc===q.center.replace(/\s/g,''),rOk=vr===q.r||parseFloat(vr)===parseFloat(q.r);
  var ok=cOk&&rOk;
  fb.className='ex-fb show '+(ok?'correct':'wrong');
  if(ok)fb.textContent='âœ“ Correct! Center '+q.center+', radius '+q.r+'.';
  else fb.textContent='âœ— Center = '+q.center+', Radius = '+q.r+'. Remember: (xâˆ’h) â†’ h is positive, (x+h) â†’ center is âˆ’h. Radius = âˆš(rÂ²).';
}
renderCir();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EXERCISE 5: COMPOSITE SHAPES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CMP=[
  {p:'A square with side 10 has a circle of radius 5 inscribed inside it. Find the shaded area (square minus circle). Leave in terms of Ï€.',acc:['100-25Ï€','100-25pi','100 - 25Ï€','100 - 25pi'],s:'Square: 10Â² = 100. Circle: Ï€(5Â²) = 25Ï€. Shaded: 100 âˆ’ 25Ï€.'},
  {p:'A circle with radius 8 has a square inscribed inside it (corners touch the circle). The square diagonal = 16. Find the square\'s area.',acc:['128'],s:'Diagonal = 16. Side = 16/âˆš2 = 8âˆš2. Area = (8âˆš2)Â² = 128. Or: Â½dÂ² = Â½(16Â²) = 128.'},
  {p:'A rectangle is 12 Ã— 8. A semicircle with diameter 8 is cut from one end. Find the remaining area in terms of Ï€.',acc:['96-8Ï€','96-8pi','96 - 8Ï€','96 - 8pi'],s:'Rectangle: 96. Semicircle: Â½Ï€(4Â²) = 8Ï€. Remaining: 96 âˆ’ 8Ï€.'},
  {p:'Two concentric circles have radii 10 and 6. Find the area of the ring (annulus) between them in terms of Ï€.',acc:['64Ï€','64pi'],s:'Outer: Ï€(100). Inner: Ï€(36). Ring: 100Ï€ âˆ’ 36Ï€ = 64Ï€.'},
];
function renderCmp(){
  document.getElementById('compEx').innerHTML='<h3>ğŸ”² Composite Shapes</h3><div class="exercise-sub">Find the shaded or remaining area. Use Ï€ in your answer (type "pi" or "Ï€").</div>'+
    CMP.map((q,i)=>`<div class="ex-item"><div class="ex-prompt">${q.p}</div><div class="ex-input-row"><span style="font-size:.85rem;color:var(--muted)">= </span><input class="ex-input" type="text" id="cmp${i}" placeholder="?" style="width:160px"><button class="ex-btn" style="background:var(--geo)" onclick="chkCmp(${i})">Check</button></div><div class="ex-fb" id="cmpFb${i}"></div></div>`).join('');
}
function chkCmp(i){
  var v=document.getElementById('cmp'+i).value.trim().replace(/\s/g,'').toLowerCase(),fb=document.getElementById('cmpFb'+i),q=CMP[i];
  if(!v){fb.className='ex-fb show wrong';fb.textContent='Enter an answer.';return;}
  var ok=q.acc.some(function(a){return v===a.replace(/\s/g,'').toLowerCase();});
  fb.className='ex-fb show '+(ok?'correct':'wrong');
  fb.textContent=(ok?'âœ“ Correct! ':'âœ— Answer: '+q.acc[0]+'. ')+q.s;
}
renderCmp();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TIMED PRACTICE WITH CONFIDENCE & ERROR ANALYSIS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const PST=[
  {t:1,tp:'5A',q:'A right triangle has legs 5 and 12. What is the hypotenuse?',ch:['10','13','15','17'],c:1,fb:'5-12-13 Pythagorean triple. Or: âˆš(25+144) = âˆš169 = 13.',
   trap:null,trapAnswer:0,trapDesc:'Guessed 10 â€” may have confused with 6-8-10 triple'},
  {t:1,tp:'5A',q:'A triangle has angles 35Â° and 80Â°. What is the third angle?',ch:['55Â°','65Â°','75Â°','85Â°'],c:1,fb:'180Â° âˆ’ 35Â° âˆ’ 80Â° = 65Â°.',
   trap:'wrong_target',trapAnswer:2,trapDesc:'Subtracted only one angle: 180 âˆ’ 80 = 100, or picked 75 â€” The Wrong Target'},
  {t:1,tp:'5C',q:'What is the area of a triangle with base 14 and height 9?',ch:['63','126','56','45'],c:0,fb:'A = Â½(14)(9) = 63.',
   trap:'phantom_height',trapAnswer:1,trapDesc:'Forgot the Â½ â€” computed 14Ã—9=126 instead of Â½(14)(9)=63 â€” The Phantom Height (similar error)'},
  {t:1,tp:'5D',q:'A circle has radius 5. What is its area?',ch:['10Ï€','25Ï€','50Ï€','5Ï€'],c:1,fb:'A = Ï€rÂ² = Ï€(25) = 25Ï€.',
   trap:null,trapAnswer:0,trapDesc:'Used circumference formula (2Ï€r=10Ï€) instead of area (Ï€rÂ²)'},
  {t:2,tp:'5B',q:'In a 30-60-90 triangle, the hypotenuse is 20. What is the short leg?',ch:['10','10âˆš2','10âˆš3','20âˆš3'],c:0,fb:'Short leg = hyp/2 = 20/2 = 10.',
   trap:null,trapAnswer:2,trapDesc:'Multiplied by âˆš3 instead of dividing by 2'},
  {t:2,tp:'5C',q:'A cylinder has radius 3 and height 8. What is its volume?',ch:['24Ï€','48Ï€','72Ï€','96Ï€'],c:2,fb:'V = Ï€rÂ²h = Ï€(9)(8) = 72Ï€.',
   trap:null,trapAnswer:0,trapDesc:'Used 2Ï€rh (surface area formula) instead of Ï€rÂ²h'},
  {t:2,tp:'5D',q:'The equation <code>(x+4)Â²+(yâˆ’1)Â²=36</code> represents a circle. What is its center?',ch:['(4, 1)','(âˆ’4, 1)','(4, âˆ’1)','(âˆ’4, âˆ’1)'],c:1,fb:'(x+4) = (xâˆ’(âˆ’4)) â†’ h = âˆ’4. (yâˆ’1) â†’ k = 1. Center: (âˆ’4, 1).',
   trap:'sign_flip',trapAnswer:0,trapDesc:'Read (x+4) as center x=4 â€” forgot the sign flip in (xâˆ’h)Â² form â€” The Sign Flip'},
  {t:2,tp:'5D',q:'A 60Â° sector of a circle with radius 12. What is the arc length?',ch:['2Ï€','4Ï€','6Ï€','12Ï€'],c:1,fb:'(60/360) Ã— 2Ï€(12) = (1/6)(24Ï€) = 4Ï€.',
   trap:null,trapAnswer:0,trapDesc:'Used area formula instead of circumference for arc length'},
  {t:3,tp:'5C',q:'A square has a diagonal of 10. What is its area?',ch:['25','50','100','25âˆš2'],c:1,fb:'Area = Â½dÂ² = Â½(100) = 50. (Or: side = 10/âˆš2 = 5âˆš2, area = (5âˆš2)Â² = 50.)',
   trap:'wrong_target',trapAnswer:0,trapDesc:'Found sideÂ² = 25 but forgot 45-45-90 â€” side = 10/âˆš2, area â‰  25 â€” The Wrong Target'},
  {t:3,tp:'5D',q:'Two concentric circles have areas 100Ï€ and 36Ï€. A point is chosen randomly inside the larger circle. What is the probability it lands in the ring (not the smaller circle)?',ch:['36/100','64/100','16/25','6/10'],c:2,fb:'Ring area = 100Ï€ âˆ’ 36Ï€ = 64Ï€. P = 64Ï€/100Ï€ = 64/100 = 16/25.',
   trap:null,trapAnswer:0,trapDesc:'Used 36/100 â€” found probability of landing IN the small circle instead of the ring'},
];

let pstA = {};
let pstConf = {};
let pstTime = {};
let pstStartTime = null;

// Timer system
let timerEnabled = false;
let timerInterval = null;
let timerSeconds = 0;
const SECS_PER_Q = 95;
let totalTimerSecs = PST.length * SECS_PER_Q;

function toggleTimer() {
  timerEnabled = !timerEnabled;
  const btn = document.getElementById('timerToggle');
  btn.textContent = timerEnabled ? 'â± Timer ON' : 'â± Timer OFF';
  btn.classList.toggle('active', timerEnabled);
  if (!timerEnabled && timerInterval) {
    clearInterval(timerInterval);
    timerInterval = null;
    document.getElementById('timerDisplay').textContent = '--:--';
    document.getElementById('timerFill').style.width = '100%';
  } else if (timerEnabled && currentScreen === 3) {
    startTimer();
  }
}

function startTimer() {
  if (timerInterval) clearInterval(timerInterval);
  timerSeconds = totalTimerSecs;
  updateTimerDisplay();
  timerInterval = setInterval(() => {
    timerSeconds--;
    updateTimerDisplay();
    if (timerSeconds <= 0) {
      clearInterval(timerInterval);
      timerInterval = null;
    }
  }, 1000);
  pstStartTime = Date.now();
}

function updateTimerDisplay() {
  const disp = document.getElementById('timerDisplay');
  const fill = document.getElementById('timerFill');
  const mins = Math.floor(timerSeconds / 60);
  const secs = timerSeconds % 60;
  disp.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;

  const pct = (timerSeconds / totalTimerSecs) * 100;
  fill.style.width = pct + '%';

  disp.className = 'timer-display';
  fill.className = 'timer-fill';
  if (pct < 15) { disp.classList.add('danger'); fill.classList.add('danger'); }
  else if (pct < 35) { disp.classList.add('warning'); fill.classList.add('warning'); }
}

function renderPST() {
  const answered = Object.keys(pstA).length;
  const TRAP_NAMES = {'wrong_target':'ğŸ¯ Wrong Target','phantom_height':'ğŸ“ Phantom Height','sign_flip':'ğŸ”„ Sign Flip','unit_mismatch':'ğŸ“ Unit Mismatch'};

  document.getElementById('qDots').innerHTML = PST.map((_, i) => {
    let cls = 'q-dot';
    if (pstA[i] !== undefined) cls += pstA[i] === PST[i].c ? ' correct' : ' wrong';
    return `<div class="${cls}"></div>`;
  }).join('');

  document.getElementById('psatPractice').innerHTML = PST.map((q, i) => {
    const a = pstA[i], h = a !== undefined;
    const conf = pstConf[i];
    const tierLabel = q.t === 1 ? 'Easy' : q.t === 2 ? 'Medium' : 'Hard';
    const trapName = q.trap ? TRAP_NAMES[q.trap] || '' : '';

    return `<div class="ex-item" style="border-color:${q.t===1?'var(--algebra)':q.t===2?'var(--math)':'var(--advanced)'}">
      <div style="margin-bottom:6px;display:flex;align-items:center;gap:8px;flex-wrap:wrap">
        <span class="tier tier-${q.t}">${tierLabel}</span>
        <span style="font-size:.75rem;color:var(--muted)">Topic ${q.tp}</span>
        ${trapName && h ? `<span style="font-size:.72rem;color:var(--accent)">Trap: ${trapName}</span>` : ''}
      </div>
      <div class="ex-prompt">${q.q}</div>
      ${!h ? `<div class="confidence-row">
        <div class="conf-tag ${conf==='guessing'?'selected':''}" data-conf="guessing" onclick="setConf(${i},'guessing')">Guessing</div>
        <div class="conf-tag ${conf==='unsure'?'selected':''}" data-conf="unsure" onclick="setConf(${i},'unsure')">Unsure</div>
        <div class="conf-tag ${conf==='confident'?'selected':''}" data-conf="confident" onclick="setConf(${i},'confident')">Confident</div>
      </div>` : `<div style="font-size:.72rem;color:var(--muted);margin-bottom:6px">Confidence: ${conf || 'not tagged'}</div>`}
      <div class="mc-choices">${q.ch.map((ch, ci) => {
        let c = 'mc-choice';
        if (h) { c += ' mc-dis'; if (ci === q.c) c += ' mc-correct'; else if (ci === a) c += ' mc-wrong'; }
        return `<div class="${c}" onclick="aPST(${i},${ci})"><div class="mc-letter">${'ABCD'[ci]}</div><div>${ch}</div></div>`;
      }).join('')}</div>
      <div class="mc-fb${h ? ' show' : ''}">${h ? (a === q.c ? 'âœ“ Correct! ' : 'âœ— Incorrect. ') + q.fb + (a !== q.c && a === q.trapAnswer ? '<br><span style="color:var(--psda)">âš ï¸ ' + q.trapDesc + '</span>' : '') : ''}</div>
    </div>`;
  }).join('');

  if (answered === PST.length) {
    if (timerInterval) { clearInterval(timerInterval); timerInterval = null; }
    document.getElementById('practiceNav').style.display = 'block';
    showPracticeResults();
  }
}

function setConf(i, level) {
  if (pstA[i] !== undefined) return;
  pstConf[i] = level;
  renderPST();
}

function aPST(i, v) {
  if (pstA[i] !== undefined) return;
  pstA[i] = v;
  if (pstStartTime) {
    pstTime[i] = Date.now() - pstStartTime;
    pstStartTime = Date.now();
  }
  renderPST();
}

function showPracticeResults() {
  const total = PST.length;
  const correct = Object.entries(pstA).filter(([i, v]) => v === PST[i].c).length;

  const byDiff = {1:{cor:0,tot:0},2:{cor:0,tot:0},3:{cor:0,tot:0}};
  PST.forEach((q, i) => {
    byDiff[q.t].tot++;
    if (pstA[i] === q.c) byDiff[q.t].cor++;
  });

  const matrix = {};
  ['guessing','unsure','confident'].forEach(conf => {
    matrix[conf] = {correct:[], wrong:[]};
  });
  PST.forEach((q, i) => {
    const conf = pstConf[i] || 'unsure';
    const isCorrect = pstA[i] === q.c;
    matrix[conf][isCorrect ? 'correct' : 'wrong'].push(i);
  });

  const errors = {content_gap:[], trap_answer:[], careless:[], calibration:[]};
  PST.forEach((q, i) => {
    if (pstA[i] === q.c) return;
    const conf = pstConf[i] || 'unsure';
    if (pstA[i] === q.trapAnswer) {
      errors.trap_answer.push({i, desc:q.trapDesc, topic:q.tp});
    } else {
      errors.content_gap.push({i, topic:q.tp});
    }
    if (conf === 'confident') {
      if (q.t === 1) errors.careless.push({i, topic:q.tp});
      errors.calibration.push({i, topic:q.tp});
    }
  });

  let html = `<div class="results-section">
    <h3>ğŸ“Š Practice Results: ${correct}/${total}</h3>

    <div style="margin-bottom:20px">
      <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px">By Difficulty</div>
      <div class="difficulty-bars">
        <div class="diff-row">
          <span class="diff-label" style="color:var(--algebra)">Easy</span>
          <div class="diff-track"><div class="diff-fill" style="width:${byDiff[1].tot?byDiff[1].cor/byDiff[1].tot*100:0}%;background:var(--algebra)"></div></div>
          <span class="diff-val" style="color:var(--algebra)">${byDiff[1].cor}/${byDiff[1].tot}</span>
        </div>
        <div class="diff-row">
          <span class="diff-label" style="color:var(--math)">Medium</span>
          <div class="diff-track"><div class="diff-fill" style="width:${byDiff[2].tot?byDiff[2].cor/byDiff[2].tot*100:0}%;background:var(--math)"></div></div>
          <span class="diff-val" style="color:var(--math)">${byDiff[2].cor}/${byDiff[2].tot}</span>
        </div>
        <div class="diff-row">
          <span class="diff-label" style="color:var(--advanced)">Hard</span>
          <div class="diff-track"><div class="diff-fill" style="width:${byDiff[3].tot?byDiff[3].cor/byDiff[3].tot*100:0}%;background:var(--advanced)"></div></div>
          <span class="diff-val" style="color:var(--advanced)">${byDiff[3].cor}/${byDiff[3].tot}</span>
        </div>
      </div>
    </div>`;

  html += `<div style="margin-bottom:20px">
    <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px">Confidence Ã— Accuracy Matrix</div>
    <div class="results-grid">
      <div class="results-grid-header"></div>
      <div class="results-grid-header">Guessing</div>
      <div class="results-grid-header">Unsure</div>
      <div class="results-grid-header">Confident</div>

      <div class="results-grid-header" style="writing-mode:horizontal-tb">âœ“ Correct</div>
      <div class="results-grid-cell">
        <div class="cell-label">Lucky</div>
        <div class="cell-dots">${matrix.guessing.correct.map(()=>`<div class="cell-dot" style="background:var(--psda)"></div>`).join('')}</div>
        <div style="font-size:.7rem;color:var(--muted)">${matrix.guessing.correct.length}</div>
      </div>
      <div class="results-grid-cell">
        <div class="cell-label">Developing</div>
        <div class="cell-dots">${matrix.unsure.correct.map(()=>`<div class="cell-dot" style="background:var(--math)"></div>`).join('')}</div>
        <div style="font-size:.7rem;color:var(--muted)">${matrix.unsure.correct.length}</div>
      </div>
      <div class="results-grid-cell">
        <div class="cell-label">Solid</div>
        <div class="cell-dots">${matrix.confident.correct.map(()=>`<div class="cell-dot" style="background:var(--correct)"></div>`).join('')}</div>
        <div style="font-size:.7rem;color:var(--muted)">${matrix.confident.correct.length}</div>
      </div>

      <div class="results-grid-header" style="writing-mode:horizontal-tb">âœ— Wrong</div>
      <div class="results-grid-cell">
        <div class="cell-label">Expected</div>
        <div class="cell-dots">${matrix.guessing.wrong.map(()=>`<div class="cell-dot" style="background:var(--muted)"></div>`).join('')}</div>
        <div style="font-size:.7rem;color:var(--muted)">${matrix.guessing.wrong.length}</div>
      </div>
      <div class="results-grid-cell">
        <div class="cell-label">Needs work</div>
        <div class="cell-dots">${matrix.unsure.wrong.map(()=>`<div class="cell-dot" style="background:var(--psda)"></div>`).join('')}</div>
        <div style="font-size:.7rem;color:var(--muted)">${matrix.unsure.wrong.length}</div>
      </div>
      <div class="results-grid-cell danger-cell">
        <div class="cell-label" style="color:var(--wrong);font-weight:700">âš ï¸ DANGER</div>
        <div class="cell-dots">${matrix.confident.wrong.map(()=>`<div class="cell-dot" style="background:var(--wrong)"></div>`).join('')}</div>
        <div style="font-size:.7rem;color:var(--wrong)">${matrix.confident.wrong.length}</div>
      </div>
    </div>
    ${matrix.confident.wrong.length > 0 ? '<div class="callout" style="border-color:var(--wrong);background:var(--wrong-bg)"><strong style="color:var(--wrong)">Confident + Wrong</strong> is the most dangerous category. These errors persist into test day because you won\'t self-correct what you think you already know.</div>' : ''}
  </div>`;

  const hasErrors = errors.trap_answer.length + errors.content_gap.length > 0;
  if (hasErrors) {
    html += `<div style="margin-bottom:16px">
      <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px">Error Pattern Analysis</div>`;

    if (errors.trap_answer.length > 0) {
      html += `<div class="error-category" style="background:rgba(251,191,36,.08);border:1px solid rgba(251,191,36,.3)">
        <div class="error-label" style="color:var(--psda)">ğŸŸ¡ Trap Answers (${errors.trap_answer.length})</div>
        <div class="error-items">${errors.trap_answer.map(e => e.desc).join(' Â· ')}</div>
      </div>`;
    }
    if (errors.content_gap.length > 0) {
      html += `<div class="error-category" style="background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.3)">
        <div class="error-label" style="color:var(--wrong)">ğŸ”´ Content Gaps (${errors.content_gap.length})</div>
        <div class="error-items">Topics: ${[...new Set(errors.content_gap.map(e=>e.topic))].join(', ')}</div>
      </div>`;
    }
    if (errors.careless.length > 0) {
      html += `<div class="error-category" style="background:rgba(96,165,250,.08);border:1px solid rgba(96,165,250,.3)">
        <div class="error-label" style="color:var(--math)">ğŸ”µ Possible Careless Errors (${errors.careless.length})</div>
        <div class="error-items">Confident + wrong on easy questions â€” likely arithmetic mistakes</div>
      </div>`;
    }
    if (errors.calibration.length > 0) {
      html += `<div class="error-category" style="background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.3)">
        <div class="error-label" style="color:var(--wrong)">âš ï¸ Calibration Issues (${errors.calibration.length})</div>
        <div class="error-items">You were confident but wrong â€” review these topics carefully</div>
      </div>`;
    }
    html += `</div>`;
  }

  html += `</div>`;
  document.getElementById('practiceResults').style.display = 'block';
  document.getElementById('practiceResults').innerHTML = html;

  document.getElementById('completePracticeStats').innerHTML = `
    <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px 20px;margin-bottom:24px;max-width:500px;width:100%;text-align:left">
      <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px">Practice Results</div>
      <div style="font-family:'JetBrains Mono',monospace;font-size:1.4rem;font-weight:700;color:var(--correct);margin-bottom:8px">${correct}/${total} correct</div>
      <div style="font-size:.82rem;color:var(--muted)">
        Easy: ${byDiff[1].cor}/${byDiff[1].tot} Â· Medium: ${byDiff[2].cor}/${byDiff[2].tot} Â· Hard: ${byDiff[3].cor}/${byDiff[3].tot}
      </div>
    </div>`;
}

renderPST();
</script>
<script src="/translate.js"></script>
</body>
</html>
