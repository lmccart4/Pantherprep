<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 8: Practice Test & Growth Plan ‚Äî PSAT 8/9 Math ‚Äî PantherPrep</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--ink:#f0f0f0;--paper:#121212;--accent:#0891b2;--accent-light:rgba(8,145,178,.12);--border:#2a2a2a;--muted:#999;--surface:#1a1a1a;--math:#60a5fa;--math-bg:rgba(96,165,250,.1);--algebra:#34d399;--advanced:#a78bfa;--psda:#fbbf24;--geo:#f87171;--correct:#22c55e;--correct-bg:rgba(34,197,94,.12);--wrong:#ef4444;--wrong-bg:rgba(239,68,68,.12)}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);line-height:1.65}
.top-stripe{height:4px;background:linear-gradient(90deg,#0891b2 0%,#0891b2 50%,#fff 50%,#fff 100%);position:fixed;top:0;left:0;right:0;z-index:100}
.progress-bar{position:fixed;top:4px;left:0;right:0;height:3px;background:var(--border);z-index:99}.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--math));width:0%;transition:width .3s ease}
.container{max-width:800px;margin:0 auto;padding:20px 20px 60px}
.back-link{display:inline-flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem;padding:8px 0;margin-top:8px;cursor:pointer;text-decoration:none}.back-link:hover{color:var(--accent)}
.mod-header{padding:40px 0 30px;border-bottom:1px solid var(--border);margin-bottom:32px}
.mod-badge{display:inline-block;background:var(--accent);color:#fff;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:14px}
.mod-header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700;margin-bottom:6px}
.mod-header .subtitle{color:var(--muted);font-size:1rem}
.mod-meta{display:flex;gap:20px;margin-top:14px;font-size:.82rem;color:var(--muted)}
.section{margin-bottom:36px}.section-label{font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:6px}
.section h2{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:700;margin-bottom:12px}
.section p{color:#ccc;font-size:.93rem;margin-bottom:12px;line-height:1.7}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:12px}.card-accent{border-left:3px solid var(--accent)}
.callout{background:var(--accent-light);border:1px solid rgba(8,145,178,.3);border-radius:10px;padding:14px 18px;margin-bottom:16px;font-size:.9rem}.callout strong{color:var(--accent)}
.callout-blue{background:var(--math-bg);border-color:rgba(96,165,250,.3)}.callout-blue strong{color:var(--math)}
.callout-gold{background:rgba(8,145,178,.08);border-color:rgba(8,145,178,.3)}.callout-gold strong{color:var(--accent)}
.topic{background:var(--surface);border:1px solid var(--border);border-radius:14px;margin-bottom:12px;overflow:hidden}
.topic-header{display:flex;align-items:center;gap:14px;padding:16px 20px;cursor:pointer}
.topic-badge{width:38px;height:38px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.82rem;color:#fff;flex-shrink:0}
.topic-info{flex:1}.topic-title{font-weight:700;font-size:.95rem}.topic-sub{font-size:.82rem;color:var(--muted);margin-top:2px}
.topic-arrow{color:var(--muted);transition:transform .2s;font-size:.9rem}.topic.open .topic-arrow{transform:rotate(90deg)}
.topic-body{display:none;padding:0 20px 18px;font-size:.9rem;color:#ccc;line-height:1.7}.topic.open .topic-body{display:block}
.topic-body h4{font-size:.95rem;color:var(--ink);margin:14px 0 6px;font-weight:700}
.topic-body ul{padding-left:18px;margin-bottom:10px}.topic-body li{margin-bottom:6px}
.formula-box{background:var(--paper);border:1px solid var(--border);border-radius:10px;padding:14px 16px;margin:10px 0;font-family:'JetBrains Mono',monospace;font-size:.85rem;line-height:1.8}
.formula-box .fn{color:var(--accent);font-weight:700}.formula-box .fl{color:var(--math);font-weight:700}
.exercise{background:var(--surface);border:2px solid var(--accent);border-radius:14px;padding:22px;margin-bottom:16px}
.exercise h3{font-family:'Cormorant Garamond',serif;font-size:1.2rem;margin-bottom:4px}
.exercise-sub{font-size:.82rem;color:var(--muted);margin-bottom:14px}
.ex-item{background:var(--paper);border:1px solid var(--border);border-radius:10px;padding:14px;margin-bottom:10px}
.ex-prompt{font-size:.92rem;line-height:1.6;margin-bottom:10px;color:#ddd}
.ex-prompt code{background:rgba(96,165,250,.1);color:var(--math);padding:1px 6px;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:.85rem}
.ex-input-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.ex-input{padding:8px 12px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1rem;width:100px;text-align:center}.ex-input:focus{border-color:var(--accent);outline:none}
.ex-btn{padding:8px 16px;background:var(--accent);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:.82rem;font-weight:600}.ex-btn:hover{filter:brightness(1.15)}
.ex-fb{font-size:.82rem;padding:8px 10px;border-radius:6px;margin-top:8px;display:none;line-height:1.5}.ex-fb.show{display:block}.ex-fb.correct{background:var(--correct-bg);color:var(--correct)}.ex-fb.wrong{background:var(--wrong-bg);color:var(--wrong)}
.tier{display:inline-block;padding:2px 8px;border-radius:4px;font-size:.68rem;font-weight:700;letter-spacing:1px;text-transform:uppercase}
.tier-1{background:rgba(52,211,153,.15);color:var(--algebra)}.tier-2{background:var(--math-bg);color:var(--math)}.tier-3{background:rgba(167,139,250,.15);color:var(--advanced)}
.classify-opts{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:4px}
.classify-opt{padding:6px 14px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.82rem;transition:all .15s}
.classify-opt:hover:not(.cl-dis){border-color:var(--accent);background:rgba(8,145,178,.08)}
.classify-opt.cl-correct{border-color:var(--correct);background:var(--correct-bg);color:var(--correct);opacity:1}
.classify-opt.cl-wrong{border-color:var(--wrong);background:var(--wrong-bg);color:var(--wrong)}
.classify-opt.cl-dis{pointer-events:none;opacity:.6}.classify-opt.cl-correct{opacity:1}
.mc-choices{display:flex;flex-direction:column;gap:6px}
.mc-choice{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--paper);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.88rem;transition:all .15s}
.mc-choice:hover:not(.mc-dis){border-color:var(--accent);background:rgba(8,145,178,.05)}
.mc-letter{font-weight:700;color:var(--muted);min-width:20px}
.mc-choice.mc-correct{border-color:var(--correct);background:var(--correct-bg);opacity:1}
.mc-choice.mc-wrong{border-color:var(--wrong);background:var(--wrong-bg)}
.mc-choice.mc-dis{pointer-events:none;opacity:.7}.mc-choice.mc-correct{opacity:1}
.mc-choice.mc-correct .mc-letter{color:var(--correct)}.mc-choice.mc-wrong .mc-letter{color:var(--wrong)}
.mc-fb{font-size:.85rem;color:var(--muted);line-height:1.6;margin-top:10px;padding:10px;background:var(--paper);border-radius:8px;display:none;border-left:3px solid var(--correct)}.mc-fb.show{display:block}
.score-bar{display:flex;align-items:center;gap:10px;margin-top:14px;padding-top:10px;border-top:1px solid var(--border)}
.score-bar-label{font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted)}
.score-bar-track{flex:1;height:6px;border-radius:3px;background:var(--border);overflow:hidden}
.score-bar-fill{height:100%;border-radius:3px;background:var(--correct);transition:width .4s ease}
.score-bar-val{font-family:'JetBrains Mono',monospace;font-size:.85rem;font-weight:700;color:var(--correct);min-width:36px;text-align:right}
.mod-nav{display:flex;justify-content:space-between;padding:24px 0;border-top:1px solid var(--border);margin-top:16px;font-size:.9rem}
.mod-nav a{color:var(--accent);text-decoration:none}.mod-nav a:hover{text-decoration:underline}
/* Two-way table */
.tw-table{width:100%;border-collapse:collapse;font-size:.85rem;margin:12px 0}
.tw-table th,.tw-table td{padding:8px 10px;border:1px solid var(--border);text-align:center}
.tw-table th{background:var(--surface);font-weight:700;color:var(--accent);font-size:.78rem;text-transform:uppercase;letter-spacing:.5px}
.tw-table td{color:#ccc}
@media(max-width:600px){.mod-meta{flex-wrap:wrap;gap:10px}.classify-opts{gap:4px}}










.fm-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px;margin:12px 0}
.fm-card{background:var(--paper);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center}
.fm-name{font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:4px}
.fm-eq{font-family:'JetBrains Mono',monospace;font-size:.95rem;font-weight:700;color:var(--math)}
.tri-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px;margin:12px 0}
.tri-card{background:var(--paper);border:2px solid var(--accent);border-radius:12px;padding:16px;text-align:center}
.tri-name{font-family:'Cormorant Garamond',serif;font-size:1.1rem;font-weight:700;margin-bottom:4px}
.tri-ratio{font-family:'JetBrains Mono',monospace;font-size:1.2rem;font-weight:700;color:var(--accent);margin-bottom:6px}
.tri-sides{font-size:.82rem;color:var(--muted);line-height:1.5}
.triples-row{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
.triple{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:6px 14px;font-family:'JetBrains Mono',monospace;font-size:.88rem;font-weight:700;color:var(--math)}

.skill-table{width:100%;border-collapse:collapse;font-size:.85rem;margin:12px 0}
.skill-table th,.skill-table td{padding:10px 12px;border:1px solid var(--border);text-align:left}
.skill-table th{background:var(--surface);font-weight:700;color:var(--accent);font-size:.78rem;text-transform:uppercase;letter-spacing:.5px}
.skill-table td{color:#ccc;vertical-align:top}
.skill-num{display:inline-flex;width:22px;height:22px;border-radius:50%;background:var(--accent);color:#fff;font-size:.72rem;font-weight:700;align-items:center;justify-content:center;margin-right:8px}
.sc-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:8px;margin:12px 0}
.sc-card{background:var(--paper);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center}
.sc-key{font-family:'JetBrains Mono',monospace;font-size:1.2rem;font-weight:700;color:var(--accent);margin-bottom:4px}
.sc-desc{font-size:.78rem;color:var(--muted)}
.do-dont{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:12px 0}
.do-card,.dont-card{background:var(--surface);border-radius:12px;padding:16px;font-size:.88rem}
.do-card{border:2px solid var(--correct)}.dont-card{border:2px solid var(--wrong)}
.do-card h4{color:var(--correct);margin-bottom:8px}.dont-card h4{color:var(--wrong);margin-bottom:8px}
.do-card li,.dont-card li{margin-bottom:4px;color:#ccc}
.step-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px 20px;margin-bottom:10px}
.step-num{display:inline-flex;width:28px;height:28px;border-radius:50%;background:var(--accent);color:#fff;font-size:.85rem;font-weight:700;align-items:center;justify-content:center;margin-right:10px;flex-shrink:0}
.step-header{display:flex;align-items:center;margin-bottom:8px;font-weight:700;font-size:.95rem}
.step-body{font-size:.88rem;color:#ccc;line-height:1.6;padding-left:38px}
.step-body code{background:rgba(96,165,250,.1);color:var(--math);padding:1px 6px;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:.85rem}
@media(max-width:600px){.do-dont{grid-template-columns:1fr}.sc-grid{grid-template-columns:repeat(2,1fr)}}

:root{--strat:#f59e0b;--strat-bg:rgba(245,158,11,.08)}
.dt-flow{display:flex;flex-direction:column;gap:8px;margin:12px 0}
.dt-step{display:flex;align-items:stretch;gap:0}
.dt-num{width:38px;min-height:38px;border-radius:10px 0 0 10px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.85rem;color:#fff;flex-shrink:0}
.dt-body{flex:1;padding:10px 14px;border-radius:0 10px 10px 0;font-size:.88rem;line-height:1.5;border:1px solid var(--border);border-left:none}
.dt-yes{color:var(--correct);font-weight:700}.dt-no{color:var(--muted);font-weight:600}
.worked{background:var(--surface);border:1px solid var(--border);border-left:3px solid var(--strat);border-radius:10px;padding:16px;margin:12px 0;font-size:.9rem}
.worked-label{font-size:.7rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--strat);margin-bottom:8px}
.gi-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:8px;margin:12px 0}
.gi-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px;display:flex;gap:10px;align-items:flex-start}
.gi-icon{font-size:1.2rem;flex-shrink:0}.gi-rule{font-size:.85rem;color:#ccc;line-height:1.5}
.trap-card{background:var(--paper);border:1px solid var(--border);border-left:3px solid var(--wrong);border-radius:10px;padding:14px;margin-bottom:10px}
.trap-title{font-weight:700;color:var(--wrong);font-size:.9rem;margin-bottom:4px}
.trap-body{font-size:.85rem;color:#ccc;line-height:1.5}
.trap-fix{font-size:.82rem;color:var(--correct);margin-top:6px;font-weight:600}

.test-controls{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin:12px 0;padding:14px;background:var(--surface);border:2px solid var(--accent);border-radius:14px}
.test-timer{font-family:'JetBrains Mono',monospace;font-size:1.4rem;font-weight:700;color:var(--accent)}
.test-timer.warn{color:var(--wrong)}
.test-progress{font-size:.85rem;color:var(--muted)}
.test-btn{padding:8px 18px;border-radius:8px;border:none;font-weight:700;cursor:pointer;font-size:.85rem;transition:.2s}
.test-btn-start{background:var(--accent);color:#fff}.test-btn-start:hover{opacity:.85}
.test-btn-flag{background:var(--surface);color:var(--strat);border:1px solid var(--strat)}
.test-btn-submit{background:var(--correct);color:#fff}
.test-q{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:10px;display:none}
.test-q.active{display:block}
.test-q.flagged{border-color:var(--strat)}
.test-nav{display:grid;grid-template-columns:repeat(auto-fill,minmax(36px,1fr));gap:4px;margin:12px 0}
.test-nav-btn{width:36px;height:36px;border-radius:8px;border:1px solid var(--border);background:var(--paper);color:var(--muted);font-size:.78rem;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s}
.test-nav-btn.current{border-color:var(--accent);color:var(--accent);background:rgba(8,145,178,.1)}
.test-nav-btn.answered{background:var(--accent);color:#fff;border-color:var(--accent)}
.test-nav-btn.flagged{border-color:var(--strat);background:rgba(245,158,11,.15);color:var(--strat)}
.test-nav-btn.correct-r{background:var(--correct);color:#fff;border-color:var(--correct)}
.test-nav-btn.wrong-r{background:var(--wrong);color:#fff;border-color:var(--wrong)}
.mc-choice.mc-selected{border-color:var(--accent);background:rgba(8,145,178,.15)}
.domain-bar{display:flex;height:24px;border-radius:6px;overflow:hidden;margin:6px 0}
.domain-seg{display:flex;align-items:center;justify-content:center;font-size:.65rem;font-weight:700;color:#fff;min-width:20px}
.report-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:10px;margin:12px 0}
.report-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px;text-align:center}
.report-big{font-family:'JetBrains Mono',monospace;font-size:2rem;font-weight:700}
.report-label{font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-top:4px}
.ec-row{display:flex;gap:8px;margin-bottom:6px;flex-wrap:wrap}
.ec-btn{padding:5px 12px;border-radius:6px;border:1px solid var(--border);background:var(--paper);color:var(--muted);font-size:.78rem;cursor:pointer;transition:.2s}
.ec-btn:hover{border-color:var(--accent)}.ec-btn.sel{background:var(--accent);color:#fff;border-color:var(--accent)}
.growth-row{display:grid;grid-template-columns:1fr auto 1fr;gap:16px;align-items:center;text-align:center;margin:12px 0}
.growth-input{width:80px;padding:8px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1.4rem;text-align:center;font-weight:700}
.checklist-item{display:flex;align-items:flex-start;gap:10px;padding:8px 0;border-bottom:1px solid rgba(255,255,255,.05);font-size:.9rem;color:#ccc}
.checklist-check{flex-shrink:0;width:20px;height:20px;border:2px solid var(--border);border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.7rem;transition:.2s}
.checklist-check.done{background:var(--correct);border-color:var(--correct);color:#fff}
.formula-ref{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:8px;margin:12px 0}
.formula-ref .fm-card{font-size:.82rem}
@media(max-width:600px){.test-controls{flex-direction:column;align-items:stretch}.growth-row{grid-template-columns:1fr}.report-grid{grid-template-columns:1fr 1fr}}
</style></head>
<body>
<div class="top-stripe"></div>
<div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
<div class="container">
<a class="back-link" href="index.html">‚Üê Back to PSAT 8/9 Math Course</a>
<div class="mod-header">
  <div class="mod-badge" style="background:var(--accent)">Module 8</div>
  <h1>Practice Test, Error Analysis & Growth Plan</h1>
  <p class="subtitle">Take a full 44-question practice test, analyze your mistakes, and build a plan for the PSAT 10 and SAT.</p>
  <div class="mod-meta"><span>‚è± ~90 min (test + analysis)</span><span>üìã 44 questions + tools</span><span>üéØ Phase 4: Test</span></div>
</div>

<div class="callout"><strong>How to use this module:</strong> Take the practice test under timed conditions (35 min per module). Then use the auto-scoring, error analysis, and growth plan tools below. This is your benchmark ‚Äî compare it to your Module 1 diagnostic to see how far you've come.</div>

<!-- PRE-TEST CHECKLIST -->
<div class="section">
  <div class="section-label">Before the Test</div>
  <h2>Pre-Test Checklist</h2>
  <div id="preChecklist"></div>
</div>

<!-- PRACTICE TEST -->
<div class="section">
  <div class="section-label">Practice Test</div>
  <h2>PSAT 8/9 Math Practice ‚Äî 44 Questions</h2>
  <p>Module 1: Questions 1‚Äì22 (35 minutes) | Module 2: Questions 23‚Äì44 (35 minutes)</p>
</div>

<div class="test-controls" id="testControls">
  <div class="test-timer" id="timer">35:00</div>
  <div class="test-progress" id="testProg">Question 1 of 22 ‚Äî Module 1</div>
  <button class="test-btn test-btn-start" id="startBtn" onclick="startTest()">Start Module 1</button>
  <button class="test-btn test-btn-flag" id="flagBtn" onclick="flagQ()" style="display:none">‚öë Flag</button>
  <button class="test-btn test-btn-submit" id="submitBtn" onclick="submitModule()" style="display:none">Submit Module</button>
</div>

<div class="test-nav" id="testNav"></div>
<div id="testArea"></div>

<!-- SCORING -->
<div class="section" id="scoringSection" style="display:none">
  <div class="section-label">Results</div>
  <h2>Your Score Report</h2>
  <div class="report-grid" id="scoreGrid"></div>
  <h3 style="margin-top:16px">Domain Breakdown</h3>
  <div id="domainBreakdown"></div>
  <h3 style="margin-top:16px">Question-by-Question Review</h3>
  <p style="font-size:.85rem;color:var(--muted)">Click any question to see the explanation. Green = correct, Red = incorrect.</p>
  <div class="test-nav" id="reviewNav"></div>
  <div id="reviewArea"></div>
</div>

<!-- ERROR ANALYSIS -->
<div class="section" id="errorSection" style="display:none">
  <div class="section-label">Error Analysis</div>
  <h2>Classify Your Mistakes</h2>
  <p>For each question you got wrong, classify the error type. This tells you WHERE to focus your study time.</p>
  <div id="errorAnalysis"></div>
  <div id="errorSummary" style="margin-top:16px"></div>
</div>

<!-- GROWTH PLAN -->
<div class="section" id="growthSection" style="display:none">
  <div class="section-label">Your Growth Plan</div>
  <h2>Diagnostic ‚Üí Practice Test Comparison</h2>
  <div class="card" style="border:2px solid var(--correct)">
    <div class="growth-row">
      <div>
        <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px">Module 1 Diagnostic</div>
        <input type="number" class="growth-input" id="baseScore" placeholder="‚Äî" min="0" max="44" oninput="updateGrowth()">
        <div style="font-size:.78rem;color:var(--muted);margin-top:4px">out of 44</div>
      </div>
      <div style="font-size:2rem;color:var(--muted)">‚Üí</div>
      <div>
        <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px">Practice Test Score</div>
        <div class="growth-input" id="practScoreDisplay" style="display:inline-block">‚Äî</div>
        <div style="font-size:.78rem;color:var(--muted);margin-top:4px">out of 44</div>
      </div>
    </div>
    <div id="growthResult" style="text-align:center;margin-top:14px;font-size:.9rem;color:var(--muted)">Enter your Module 1 diagnostic score to see growth.</div>
  </div>
</div>

<!-- SCORE PROJECTION -->
<div class="section" id="projSection" style="display:none">
  <div class="section-label">Score Projection</div>
  <h2>Estimated Score Range</h2>
  <p style="font-size:.85rem;color:var(--muted)">These are rough estimates based on your raw score. Actual scores depend on the curve.</p>
  <div class="report-grid" id="projGrid"></div>
</div>

<!-- NEXT STEPS -->
<div class="section" id="nextSection" style="display:none">
  <div class="section-label">Next Steps</div>
  <h2>Your Path Forward</h2>
  <div id="nextSteps"></div>
</div>

<!-- FORMULA REFERENCE -->
<div class="section">
  <div class="section-label">Reference</div>
  <h2>Must-Memorize Formula Card</h2>
  <p style="font-size:.85rem;color:var(--muted)">These are on the reference sheet, but knowing them cold saves time. Bookmark this section.</p>
</div>
<div class="formula-ref">
  <div class="fm-card"><div class="fm-name">Slope</div><div class="fm-eq">m = (y‚ÇÇ‚àíy‚ÇÅ)/(x‚ÇÇ‚àíx‚ÇÅ)</div></div>
  <div class="fm-card"><div class="fm-name">Slope-Intercept</div><div class="fm-eq">y = mx + b</div></div>
  <div class="fm-card"><div class="fm-name">Quadratic Formula</div><div class="fm-eq">x = (‚àíb¬±‚àö(b¬≤‚àí4ac))/2a</div></div>
  <div class="fm-card"><div class="fm-name">Vertex</div><div class="fm-eq">x = ‚àíb/2a</div></div>
  <div class="fm-card"><div class="fm-name">Pythagorean</div><div class="fm-eq">a¬≤ + b¬≤ = c¬≤</div></div>
  <div class="fm-card"><div class="fm-name">30-60-90</div><div class="fm-eq">1 : ‚àö3 : 2</div></div>
  <div class="fm-card"><div class="fm-name">45-45-90</div><div class="fm-eq">1 : 1 : ‚àö2</div></div>
  <div class="fm-card"><div class="fm-name">Circle Eq</div><div class="fm-eq">(x‚àíh)¬≤+(y‚àík)¬≤=r¬≤</div></div>
  <div class="fm-card"><div class="fm-name">Area Triangle</div><div class="fm-eq">A = ¬Ωbh</div></div>
  <div class="fm-card"><div class="fm-name">Area Circle</div><div class="fm-eq">A = œÄr¬≤</div></div>
  <div class="fm-card"><div class="fm-name">Circumference</div><div class="fm-eq">C = 2œÄr</div></div>
  <div class="fm-card"><div class="fm-name">Vol Cylinder</div><div class="fm-eq">V = œÄr¬≤h</div></div>
  <div class="fm-card"><div class="fm-name">Vol Cone</div><div class="fm-eq">V = ‚ÖìœÄr¬≤h</div></div>
  <div class="fm-card"><div class="fm-name">Vol Sphere</div><div class="fm-eq">V = ‚Å¥‚ÅÑ‚ÇÉœÄr¬≥</div></div>
  <div class="fm-card"><div class="fm-name">Percent Change</div><div class="fm-eq">(new‚àíold)/old √ó 100</div></div>
  <div class="fm-card"><div class="fm-name">Distance</div><div class="fm-eq">d=‚àö[(x‚ÇÇ‚àíx‚ÇÅ)¬≤+(y‚ÇÇ‚àíy‚ÇÅ)¬≤]</div></div>
</div>

<!-- TEST-DAY CHECKLIST -->
<div class="section">
  <div class="section-label">Test Day</div>
  <h2>PSAT 8/9 Test-Day Checklist</h2>
  <div id="testDayChecklist"></div>
</div>

<div class="section">
  <div class="section-label">Summary</div>
  <h2>You Did It!</h2>
  <div class="card card-accent">
    <p style="font-size:1rem;line-height:1.7;color:#ccc">You've completed the entire PSAT 8/9 Math course ‚Äî from diagnostic through practice test. Whether you scored exactly where you wanted or have room to grow, remember: <strong>this is your starting line, not your finish line.</strong></p>
    <p style="font-size:1rem;line-height:1.7;color:#ccc">The PSAT 8/9 ‚Üí PSAT 10 ‚Üí PSAT/NMSQT ‚Üí SAT is a progression. Every point you gain now carries forward. The strategies, skills, and habits you've built here will serve you for years.</p>
    <p style="font-size:1rem;line-height:1.7;color:var(--accent);font-weight:700">Keep going. You've got this. üêæ</p>
  </div>
</div>

<div class="mod-nav">
  <a href="module-7.html">‚Üê Module 7: Strategy</a>
  <a href="index.html">Back to Course Home ‚Üí</a>
</div>
</div>
<script>
window.addEventListener('scroll',()=>{const h=document.documentElement.scrollHeight-window.innerHeight;document.getElementById('progressFill').style.width=Math.min(h>0?(window.scrollY/h)*100:0,100)+'%';});

// ======== 44 PRACTICE QUESTIONS ========
// d=domain: A=Algebra, AM=AdvMath, P=PSDA, G=Geometry
// Module 1: Q1-22 (mixed difficulty), Module 2: Q23-44 (harder mix)
const Q=[
// MODULE 1 (1-22)
{n:1,d:'A',q:'Solve: <code>3x + 7 = 22</code>',ch:['3','4','5','6'],c:2,fb:'3x=15, x=5.'},
{n:2,d:'P',q:'What is the mean of 8, 12, 15, 19, 26?',ch:['12','15','16','19'],c:2,fb:'Sum=80, 80/5=16.'},
{n:3,d:'G',q:'A right triangle has legs 9 and 12. What is the hypotenuse?',ch:['13','15','18','21'],c:1,fb:'9¬≤+12¬≤=81+144=225, ‚àö225=15. (3-4-5 triple √ó3.)'},
{n:4,d:'A',q:'What is the slope of <code>y = ‚àí3x + 8</code>?',ch:['8','3','‚àí3','‚àí8'],c:2,fb:'y=mx+b form. Slope m=‚àí3.'},
{n:5,d:'AM',q:'What is <code>x‚Å∞</code> when x = 7?',ch:['0','1','7','49'],c:1,fb:'Any nonzero number to the 0 power = 1.'},
{n:6,d:'P',q:'A shirt costs $40 and is 25% off. Sale price?',ch:['$10','$15','$30','$35'],c:2,fb:'25% of 40 = 10. Sale: 40‚àí10 = $30.'},
{n:7,d:'A',q:'Which is the solution to <code>2(x‚àí3) = 4x + 2</code>?',ch:['‚àí4','‚àí2','2','4'],c:0,fb:'2x‚àí6=4x+2. ‚àí8=2x. x=‚àí4.'},
{n:8,d:'G',q:'Area of a circle with radius 6?',ch:['12œÄ','24œÄ','36œÄ','72œÄ'],c:2,fb:'A=œÄr¬≤=36œÄ.'},
{n:9,d:'P',q:'In a class of 30, the ratio of boys to girls is 2:3. How many girls?',ch:['12','15','18','20'],c:2,fb:'2+3=5 parts. Girls = 3/5 √ó 30 = 18.'},
{n:10,d:'AM',q:'Factor: <code>x¬≤ ‚àí 9</code>',ch:['(x‚àí3)(x+3)','(x‚àí9)(x+1)','(x‚àí3)¬≤','x(x‚àí9)'],c:0,fb:'Difference of squares: a¬≤‚àíb¬≤ = (a‚àíb)(a+b).'},
{n:11,d:'A',q:'The line <code>y = 2x + 5</code> passes through which point?',ch:['(1, 6)','(1, 7)','(2, 8)','(0, 2)'],c:1,fb:'x=1: y=2(1)+5=7. Point (1,7).'},
{n:12,d:'G',q:'A triangle has angles 55¬∞ and 75¬∞. Third angle?',ch:['40¬∞','50¬∞','55¬∞','60¬∞'],c:1,fb:'180‚àí55‚àí75=50¬∞.'},
{n:13,d:'P',q:'A survey of 200 finds 52% support a new rule. Margin of error ¬±4%. Best interpretation?',ch:['Exactly 52% of all support it','Between 48% and 56% likely support it','The survey is unreliable','More than half definitely support it'],c:1,fb:'52¬±4 ‚Üí 48% to 56%.'},
{n:14,d:'AM',q:'If <code>f(x) = x¬≤ ‚àí 4x + 3</code>, what is f(1)?',ch:['‚àí2','0','1','8'],c:1,fb:'1‚àí4+3=0.'},
{n:15,d:'A',q:'Which system has no solution?<br>I: y=2x+1, y=2x+5<br>II: y=2x+1, y=‚àíx+4',ch:['I only','II only','Both','Neither'],c:0,fb:'Same slope, different intercepts = parallel = no solution. System I.'},
{n:16,d:'G',q:'Volume of a cylinder with radius 4 and height 10?',ch:['40œÄ','80œÄ','160œÄ','320œÄ'],c:2,fb:'V=œÄr¬≤h=œÄ(16)(10)=160œÄ.'},
{n:17,d:'P',q:'Students who eat breakfast scored higher on tests. Valid conclusion?',ch:['Breakfast causes higher scores','Breakfast is associated with higher scores','No relationship exists','Students should skip lunch'],c:1,fb:'Observational ‚Üí association only, not causation.'},
{n:18,d:'AM',q:'Simplify: <code>x¬≥ ¬∑ x¬≤</code>',ch:['x‚Åµ','x‚Å∂','x‚Åπ','2x‚Åµ'],c:0,fb:'Product rule: add exponents. 3+2=5.'},
{n:19,d:'A',q:'Solve for x: <code>|x ‚àí 5| = 3</code>. How many solutions?',ch:['0','1','2','3'],c:2,fb:'x‚àí5=3‚Üíx=8 or x‚àí5=‚àí3‚Üíx=2. Two solutions.'},
{n:20,d:'G',q:'In a 45-45-90 triangle, each leg is 8. Hypotenuse?',ch:['8','8‚àö2','16','16‚àö2'],c:1,fb:'45-45-90: hyp = leg√ó‚àö2 = 8‚àö2.'},
{n:21,d:'P',q:'A population grows from 500 to 650. Percent increase?',ch:['15%','23%','30%','65%'],c:2,fb:'(650‚àí500)/500 √ó 100 = 30%.'},
{n:22,d:'AM',q:'The vertex of <code>y = x¬≤ ‚àí 6x + 5</code> is at x = ?',ch:['‚àí3','‚àí1','3','5'],c:2,fb:'x = ‚àíb/2a = 6/2 = 3.'},
// MODULE 2 (23-44)
{n:23,d:'A',q:'If <code>4x + 3y = 24</code> and <code>x = 3</code>, what is y?',ch:['2','3','4','5'],c:2,fb:'12+3y=24, 3y=12, y=4.'},
{n:24,d:'AM',q:'Which equation has exactly one real solution?<br><code>ax¬≤ + bx + c = 0</code> when:',ch:['b¬≤‚àí4ac > 0','b¬≤‚àí4ac = 0','b¬≤‚àí4ac < 0','a = 0'],c:1,fb:'Discriminant = 0 ‚Üí one repeated root.'},
{n:25,d:'P',q:'Data: 5, 8, 10, 12, 65. Which measure is MOST affected by the outlier?',ch:['Median','Mode','Mean','Range is unchanged'],c:2,fb:'Mean is pulled up by 65. Median barely changes.'},
{n:26,d:'G',q:'The equation <code>(x+2)¬≤ + (y‚àí3)¬≤ = 49</code>. Center and radius?',ch:['(2,‚àí3), r=7','(‚àí2,3), r=7','(‚àí2,3), r=49','(2,3), r=7'],c:1,fb:'(x‚àí(‚àí2))‚Üíh=‚àí2, (y‚àí3)‚Üík=3. r=‚àö49=7.'},
{n:27,d:'A',q:'A line passes through (2, 5) and (6, 13). What is the slope?',ch:['1/2','2','4','8'],c:1,fb:'m=(13‚àí5)/(6‚àí2) = 8/4 = 2.'},
{n:28,d:'AM',q:'Factor: <code>2x¬≤ + 5x ‚àí 3</code>',ch:['(2x‚àí1)(x+3)','(2x+1)(x‚àí3)','(2x‚àí3)(x+1)','(2x+3)(x‚àí1)'],c:0,fb:'(2x‚àí1)(x+3) = 2x¬≤+6x‚àíx‚àí3 = 2x¬≤+5x‚àí3 ‚úì.'},
{n:29,d:'P',q:'P(Math | 10th grade) using: 10th+Math=35, 10th total=75.',ch:['35/150','35/80','35/75','75/150'],c:2,fb:'Restrict to 10th (75). Of those, 35 prefer Math. P=35/75.'},
{n:30,d:'G',q:'A 90¬∞ sector of a circle with radius 10. Sector area?',ch:['10œÄ','25œÄ','50œÄ','100œÄ'],c:1,fb:'(90/360)√óœÄ(100) = ¬º√ó100œÄ = 25œÄ.'},
{n:31,d:'A',q:'If <code>3x ‚àí 2y = 12</code> and <code>x + 2y = 8</code>, what is x?',ch:['3','4','5','6'],c:2,fb:'Add equations: 4x=20, x=5.'},
{n:32,d:'AM',q:'If <code>f(x) = 3(2)À£</code>, what is f(3)?',ch:['12','18','24','27'],c:2,fb:'f(3) = 3(2¬≥) = 3(8) = 24.'},
{n:33,d:'P',q:'A price increases 10% then decreases 10%. Compared to original:',ch:['Same price','1% less','2% less','1% more'],c:1,fb:'$100‚Üí$110‚Üí$99. 1% less. Successive percents trap.'},
{n:34,d:'G',q:'Distance from (1,2) to (4,6)?',ch:['4','5','7','‚àö7'],c:1,fb:'‚àö(9+16) = ‚àö25 = 5. (3-4-5 triple!)'},
{n:35,d:'A',q:'Which inequality: "No more than 50 students can attend"?',ch:['s > 50','s < 50','s ‚â§ 50','s ‚â• 50'],c:2,fb:'"No more than" = at most = ‚â§.'},
{n:36,d:'AM',q:'The graph of y = (x‚àí2)¬≤ + 3 is the graph of y = x¬≤ shifted:',ch:['Left 2, up 3','Right 2, up 3','Right 2, down 3','Left 2, down 3'],c:1,fb:'(x‚àíh)‚Üíright h, +k‚Üíup k. Right 2, up 3.'},
{n:37,d:'P',q:'An experiment randomly assigns 100 patients to drug or placebo. Can it show causation?',ch:['No, only correlation','Yes, random assignment allows causal claims','Only with 1000+ participants','Only if double-blind'],c:1,fb:'Random assignment ‚Üí experiment ‚Üí CAN establish cause.'},
{n:38,d:'G',q:'A square with diagonal 10. Area?',ch:['25','50','100','25‚àö2'],c:1,fb:'A = ¬Ωd¬≤ = ¬Ω(100) = 50.'},
{n:39,d:'A',q:'If <code>5(2x‚àí1) = 3(x+4) + 2</code>, what is x? (SPR)',ch:['2','3','19/7','5'],c:1,fb:'10x‚àí5=3x+14. 7x=19. x=19/7‚âà2.71. Wait ‚Äî check: 7x=19‚Üíx=19/7. Hmm, let me recheck: 10x‚àí5=3x+12+2=3x+14. 7x=19. x=19/7. Since no nice answer, try x=3: 5(5)=25, 3(7)+2=23. Not equal. x=19/7 is correct but since this is MC, the answer is B (closest).'},
{n:40,d:'AM',q:'Which function shows exponential DECAY?',ch:['f(x) = 3(1.2)À£','f(x) = 3(0.8)À£','f(x) = 3x + 2','f(x) = 3x¬≤'],c:1,fb:'Base 0.8 < 1 ‚Üí decay. Base > 1 ‚Üí growth. Linear and quadratic are not exponential.'},
{n:41,d:'P',q:'Convert: 90 km/hr to m/min.',ch:['900','1500','5400','54000'],c:1,fb:'90km/hr √ó 1000m/km √ó 1hr/60min = 1500 m/min.'},
{n:42,d:'G',q:'Inscribed angle intercepts a 120¬∞ arc. Angle measure?',ch:['30¬∞','60¬∞','120¬∞','240¬∞'],c:1,fb:'Inscribed angle = half the arc = 60¬∞.'},
{n:43,d:'A',q:'<code>f(x) = 2x + 3</code> and <code>g(x) = x ‚àí 1</code>. What is f(g(2))?',ch:['3','5','7','9'],c:1,fb:'g(2)=1. f(1)=2(1)+3=5.'},
{n:44,d:'AM',q:'If <code>x¬≤ + bx + 12 = 0</code> has solutions x=3 and x=4, what is b?',ch:['‚àí7','7','‚àí12','1'],c:0,fb:'(x‚àí3)(x‚àí4)=x¬≤‚àí7x+12. So b=‚àí7.'},
];
// Fix Q39 to have a clean answer
Q[38]={n:39,d:'A',q:'If <code>4(x + 2) = 2(3x ‚àí 1) + 6</code>, what is x?',ch:['1','2','3','4'],c:1,fb:'4x+8 = 6x‚àí2+6 = 6x+4. So ‚àí2x = ‚àí4, x = 2.'};

// ======== TEST ENGINE STATE ========
var testState='idle',curMod=1,curQ=0,answers=new Array(44).fill(-1),flags=new Array(44).fill(false);
var timerSec=35*60,timerInt=null;

function startTest(){
  if(testState==='idle'){testState='m1';curMod=1;curQ=0;timerSec=35*60;renderTest();startTimer();
    document.getElementById('startBtn').style.display='none';document.getElementById('flagBtn').style.display='';document.getElementById('submitBtn').style.display='';
  }else if(testState==='m1done'){testState='m2';curMod=2;curQ=22;timerSec=35*60;renderTest();startTimer();
    document.getElementById('startBtn').style.display='none';
  }
}

function startTimer(){
  clearInterval(timerInt);
  timerInt=setInterval(function(){
    timerSec--;if(timerSec<=0){clearInterval(timerInt);submitModule();}
    var m=Math.floor(timerSec/60),s=timerSec%60;
    var el=document.getElementById('timer');
    el.textContent=(m<10?'0':'')+m+':'+(s<10?'0':'')+s;
    el.className='test-timer'+(timerSec<120?' warn':'');
  },1000);
}

function renderTest(){
  var start=curMod===1?0:22,end=curMod===1?22:44;
  // Nav
  var nav='';for(var i=start;i<end;i++){
    var cls='test-nav-btn';
    if(i===curQ)cls+=' current';
    if(answers[i]>=0)cls+=' answered';
    if(flags[i])cls+=' flagged';
    nav+='<div class="'+cls+'" onclick="goQ('+i+')">'+(i+1)+'</div>';
  }
  document.getElementById('testNav').innerHTML=nav;
  // Question
  var q=Q[curQ];
  document.getElementById('testArea').innerHTML='<div class="test-q active"><div style="margin-bottom:4px;font-size:.75rem;color:var(--muted)">Question '+(curQ+1)+' ‚Ä¢ '+({A:'Algebra',AM:'Advanced Math',P:'Data Analysis',G:'Geometry'}[q.d])+'</div><div class="ex-prompt" style="font-size:1rem;margin-bottom:12px">'+q.q+'</div><div class="mc-choices">'+q.ch.map(function(ch,ci){
    var c='mc-choice';if(answers[curQ]===ci)c+=' mc-selected';
    return '<div class="'+c+'" onclick="pickA('+ci+')"><div class="mc-letter">'+'ABCD'[ci]+'</div><div>'+ch+'</div></div>';
  }).join('')+'</div></div>';
  document.getElementById('testProg').textContent='Question '+(curQ+1)+' of '+(curMod===1?22:44)+' ‚Äî Module '+(curMod);
}

function goQ(i){curQ=i;renderTest();}
function pickA(ci){answers[curQ]=ci;renderTest();}
function flagQ(){flags[curQ]=!flags[curQ];renderTest();}

function submitModule(){
  clearInterval(timerInt);
  if(curMod===1){
    testState='m1done';
    document.getElementById('startBtn').textContent='Start Module 2';
    document.getElementById('startBtn').style.display='';
    document.getElementById('flagBtn').style.display='none';
    document.getElementById('submitBtn').style.display='none';
    document.getElementById('timer').textContent='Module 1 Complete';
    document.getElementById('testProg').textContent='Click "Start Module 2" to continue.';
  }else{
    testState='done';
    document.getElementById('flagBtn').style.display='none';
    document.getElementById('submitBtn').style.display='none';
    document.getElementById('timer').textContent='Test Complete!';
    document.getElementById('testProg').textContent='Scroll down for your score report.';
    document.getElementById('testNav').innerHTML='';
    document.getElementById('testArea').innerHTML='';
    showResults();
  }
}

// ======== SCORING & RESULTS ========
function showResults(){
  var correct=0,domC={A:0,AM:0,P:0,G:0},domT={A:0,AM:0,P:0,G:0};
  Q.forEach(function(q,i){domT[q.d]++;if(answers[i]===q.c){correct++;domC[q.d]++;}});
  // Score grid
  document.getElementById('scoreGrid').innerHTML=[
    {l:'Raw Score',v:correct+'/44',c:'var(--accent)'},
    {l:'Percentage',v:Math.round(correct/44*100)+'%',c:correct/44>.7?'var(--correct)':'var(--strat)'},
    {l:'Module 1',v:Q.slice(0,22).filter(function(_,i){return answers[i]===Q[i].c;}).length+'/22',c:'var(--math)'},
    {l:'Module 2',v:Q.slice(22).filter(function(_,i){return answers[i+22]===Q[i+22].c;}).length+'/22',c:'var(--math)'},
  ].map(function(s){return '<div class="report-card"><div class="report-big" style="color:'+s.c+'">'+s.v+'</div><div class="report-label">'+s.l+'</div></div>';}).join('');
  // Domain breakdown
  var doms=[{k:'A',n:'Algebra',c:'var(--algebra)'},{k:'AM',n:'Advanced Math',c:'var(--advanced)'},{k:'P',n:'Data Analysis',c:'var(--psda)'},{k:'G',n:'Geometry',c:'var(--geo)'}];
  document.getElementById('domainBreakdown').innerHTML=doms.map(function(d){
    var pct=domT[d.k]>0?Math.round(domC[d.k]/domT[d.k]*100):0;
    return '<div style="margin-bottom:10px"><div style="display:flex;justify-content:space-between;font-size:.85rem;margin-bottom:4px"><span style="font-weight:700;color:'+d.c+'">'+d.n+'</span><span style="color:var(--muted)">'+domC[d.k]+'/'+domT[d.k]+' ('+pct+'%)</span></div><div style="height:8px;background:var(--surface);border-radius:4px;overflow:hidden"><div style="height:100%;width:'+pct+'%;background:'+d.c+';border-radius:4px;transition:.3s"></div></div></div>';
  }).join('');
  // Review nav
  var rNav='';Q.forEach(function(q,i){
    var ok=answers[i]===q.c;
    rNav+='<div class="test-nav-btn '+(ok?'correct-r':'wrong-r')+'" onclick="showReview('+i+')">'+(i+1)+'</div>';
  });
  document.getElementById('reviewNav').innerHTML=rNav;
  // Show sections
  ['scoringSection','errorSection','growthSection','projSection','nextSection'].forEach(function(id){document.getElementById(id).style.display='';});
  // Error analysis
  renderErrors();
  // Projection
  showProjection(correct);
  // Growth
  document.getElementById('practScoreDisplay').textContent=correct;
  updateGrowth();
  // Next steps
  showNextSteps(domC,domT);
}

function showReview(i){
  var q=Q[i],ok=answers[i]===q.c;
  document.getElementById('reviewArea').innerHTML='<div class="ex-item" style="border-color:'+(ok?'var(--correct)':'var(--wrong)')+'"><div style="font-size:.78rem;color:var(--muted);margin-bottom:4px">Q'+(i+1)+' ‚Ä¢ '+({A:'Algebra',AM:'Advanced Math',P:'Data Analysis',G:'Geometry'}[q.d])+'</div><div class="ex-prompt">'+q.q+'</div><div class="mc-choices">'+q.ch.map(function(ch,ci){
    var c='mc-choice mc-dis';if(ci===q.c)c+=' mc-correct';else if(ci===answers[i])c+=' mc-wrong';
    return '<div class="'+c+'"><div class="mc-letter">'+'ABCD'[ci]+'</div><div>'+ch+'</div></div>';
  }).join('')+'</div><div class="mc-fb show">'+(ok?'‚úì Correct! ':'‚úó You picked '+'ABCD'[answers[i]]+'. ')+q.fb+'</div></div>';
}

// ======== ERROR ANALYSIS ========
var errorTypes={};
function renderErrors(){
  var missed=[];Q.forEach(function(q,i){if(answers[i]!==q.c)missed.push(i);});
  if(missed.length===0){document.getElementById('errorAnalysis').innerHTML='<p style="color:var(--correct);font-weight:700">Perfect score! No errors to analyze.</p>';return;}
  var types=['Careless/Arithmetic','Concept Gap','Misread Problem','Ran Out of Time','Guessed'];
  document.getElementById('errorAnalysis').innerHTML=missed.map(function(i){
    var q=Q[i];
    return '<div class="ex-item" style="border-color:var(--wrong)"><div style="font-size:.78rem;color:var(--muted)">Q'+(i+1)+' ('+q.d+') ‚Äî You chose '+'ABCD'[answers[i]]+', correct: '+'ABCD'[q.c]+'</div><div class="ex-prompt" style="font-size:.88rem">'+q.q+'</div><div class="ec-row">'+types.map(function(t,ti){
      return '<div class="ec-btn'+(errorTypes[i]===ti?' sel':'')+'" onclick="classifyErr('+i+','+ti+')">'+t+'</div>';
    }).join('')+'</div></div>';
  }).join('');
  updateErrorSummary(missed,types);
}
function classifyErr(i,ti){errorTypes[i]=ti;renderErrors();}
function updateErrorSummary(missed,types){
  var counts=[0,0,0,0,0];
  missed.forEach(function(i){if(errorTypes[i]!==undefined)counts[errorTypes[i]]++;});
  var classified=counts.reduce(function(a,b){return a+b;},0);
  if(classified<missed.length){document.getElementById('errorSummary').innerHTML='<p style="color:var(--muted);font-size:.85rem">Classify all '+missed.length+' missed questions to see your error summary. ('+classified+'/'+missed.length+' done)</p>';return;}
  var colors=['var(--strat)','var(--wrong)','var(--advanced)','var(--muted)','var(--psda)'];
  document.getElementById('errorSummary').innerHTML='<h3 style="margin-bottom:8px">Error Summary</h3><div class="report-grid">'+types.map(function(t,ti){
    return '<div class="report-card"><div class="report-big" style="color:'+colors[ti]+'">'+counts[ti]+'</div><div class="report-label">'+t+'</div></div>';
  }).join('')+'</div>'+(counts[0]>counts[1]?'<div class="callout" style="background:var(--strat-bg);border-color:rgba(245,158,11,.3)"><strong style="color:var(--strat)">More careless than concept errors!</strong> Slow down on Pass 1. Double-check before moving on. You know the math ‚Äî you just need to be more careful.</div>':'')+(counts[1]>=3?'<div class="callout" style="background:rgba(248,113,113,.08);border-color:rgba(248,113,113,.3)"><strong style="color:var(--wrong)">'+counts[1]+' concept gaps found.</strong> Review the relevant modules for these topics. Focus your study time here ‚Äî these are the highest-ROI improvements.</div>':'');
}

// ======== SCORE PROJECTION ========
function showProjection(raw){
  // Rough PSAT 8/9 scale: 120-720. ~44 raw ‚Üí ~720, ~22 raw ‚Üí ~420, ~0 raw ‚Üí ~120
  var pct=raw/44;
  var psat89=Math.round(120+pct*600);
  var psat10=Math.round(160+pct*600);// PSAT 10: 160-760
  var sat=Math.round(200+pct*600);// SAT: 200-800
  document.getElementById('projGrid').innerHTML=[
    {l:'PSAT 8/9 (est.)',v:psat89,r:'120‚Äì720',c:'var(--accent)'},
    {l:'PSAT 10 (proj.)',v:psat10,r:'160‚Äì760',c:'var(--math)'},
    {l:'SAT (proj.)',v:sat,r:'200‚Äì800',c:'var(--advanced)'},
  ].map(function(s){return '<div class="report-card"><div class="report-big" style="color:'+s.c+'">'+s.v+'</div><div class="report-label">'+s.l+'</div><div style="font-size:.72rem;color:var(--muted)">Range: '+s.r+'</div></div>';}).join('');
}

// ======== GROWTH PLAN ========
function updateGrowth(){
  var base=parseInt(document.getElementById('baseScore').value);
  var pract=parseInt(document.getElementById('practScoreDisplay').textContent);
  var el=document.getElementById('growthResult');
  if(isNaN(base)||isNaN(pract)){el.textContent='Enter your Module 1 diagnostic score to see growth.';return;}
  var diff=pract-base;
  if(diff>0)el.innerHTML='<span style="color:var(--correct);font-weight:700;font-size:1.1rem">+'+diff+' questions improved!</span><br><span style="font-size:.85rem;color:var(--muted)">That\'s approximately +'+(diff*14)+' points on the PSAT 8/9 scale. Keep building on this momentum.</span>';
  else if(diff===0)el.innerHTML='<span style="color:var(--strat);font-weight:700">Same score.</span><br><span style="font-size:.85rem;color:var(--muted)">Your score held steady. Focus on the error analysis above to identify where to break through.</span>';
  else el.innerHTML='<span style="color:var(--strat);font-weight:700">'+diff+' questions.</span><br><span style="font-size:.85rem;color:var(--muted)">Practice test conditions can be harder than a diagnostic. Focus on the error types above ‚Äî especially careless mistakes.</span>';
}

// ======== NEXT STEPS ========
function showNextSteps(domC,domT){
  var weak=[];
  [{k:'A',n:'Algebra',m:'Module 2'},{k:'AM',n:'Advanced Math',m:'Module 3'},{k:'P',n:'Data Analysis',m:'Module 4'},{k:'G',n:'Geometry',m:'Module 5'}].forEach(function(d){
    var pct=domT[d.k]>0?domC[d.k]/domT[d.k]:1;
    if(pct<0.7)weak.push(d);
  });
  var html='<div class="card card-accent"><h3 style="margin-bottom:10px">Priority Review Areas</h3>';
  if(weak.length===0)html+='<p style="color:var(--correct)">All domains above 70% ‚Äî strong performance! Focus on reducing careless errors and practicing under timed conditions.</p>';
  else html+='<p style="color:#ccc;margin-bottom:10px">These domains scored below 70% ‚Äî review them before test day:</p>'+weak.map(function(d){return '<div style="padding:8px 0;border-bottom:1px solid rgba(255,255,255,.05)"><strong style="color:var(--wrong)">'+d.n+'</strong> ‚Äî Review <strong>'+d.m+'</strong> and redo the exercises and practice questions.</div>';}).join('');
  html+='<h3 style="margin-top:16px;margin-bottom:10px">Your Path: PSAT 8/9 ‚Üí PSAT 10 ‚Üí SAT</h3>';
  html+='<div style="font-size:.9rem;color:#ccc;line-height:1.8">';
  html+='<strong>Now ‚Üí Test Day:</strong> Review weak domains. Redo practice questions you missed. Practice with Desmos at desmos.com/calculator.<br>';
  html+='<strong>After PSAT 8/9:</strong> Your score report will show specific skill areas. Use it to target your PSAT 10 prep.<br>';
  html+='<strong>10th Grade:</strong> The PSAT 10 covers the same content at slightly higher difficulty. Everything you learned here carries forward.<br>';
  html+='<strong>11th Grade:</strong> The PSAT/NMSQT adds trig and more advanced topics. Your algebra, geometry, and strategy foundation will be rock solid.';
  html+='</div></div>';
  document.getElementById('nextSteps').innerHTML=html;
}

// ======== CHECKLISTS ========
function renderChecklist(id,items){
  document.getElementById(id).innerHTML=items.map(function(t,i){
    return '<div class="checklist-item"><div class="checklist-check" id="'+id+i+'" onclick="this.classList.toggle(\'done\');this.textContent=this.classList.contains(\'done\')?\'‚úì\':\'\'"></div><div>'+t+'</div></div>';
  }).join('');
}
renderChecklist('preChecklist',[
  'Find a quiet space with 70+ minutes of uninterrupted time.',
  'Have scratch paper and pencils ready.',
  'Open <a href="https://www.desmos.com/calculator" target="_blank" style="color:var(--accent)">desmos.com/calculator</a> in another tab (to simulate the test calculator).',
  'Turn off your phone and close other tabs.',
  'Set a timer for 35 minutes for Module 1.',
  'Remember: <strong>accuracy over speed</strong> in Module 1. Double-check everything.',
]);
renderChecklist('testDayChecklist',[
  '<strong>Night before:</strong> Charge your school Chromebook/laptop. Get 8+ hours of sleep.',
  '<strong>Morning:</strong> Eat a real breakfast. Bring a snack for the break.',
  '<strong>Bring:</strong> Charged device, pencils (for scratch work), approved calculator (backup only).',
  '<strong>The Bluebook app</strong> must be installed and updated before test day.',
  '<strong>Module 1 strategy:</strong> Two-pass system. Flag hard questions. Prioritize accuracy.',
  '<strong>Desmos:</strong> Use it aggressively for systems, quadratics, and statistics.',
  '<strong>Time check:</strong> After 15 minutes, you should be on question 8+. Adjust pace if needed.',
  '<strong>Last 2 minutes:</strong> Answer ALL remaining questions. No penalty for guessing.',
  '<strong>Between modules:</strong> Take a breath. Module 2 difficulty depends on Module 1 ‚Äî stay confident either way.',
  '<strong>After the test:</strong> Scores come in 2‚Äì4 weeks. Use your score report to plan PSAT 10 prep.',
]);
</script>
<script src="/translate.js"></script>
</body>
</html>
