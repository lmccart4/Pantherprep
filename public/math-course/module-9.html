<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 9: Full Practice Test & Deep Error Analysis ‚Äî SAT Math ‚Äî PantherPrep</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--ink:#f0f0f0;--paper:#121212;--accent:#C8102E;--accent-light:rgba(200,16,46,.15);--border:#2a2a2a;--muted:#999;--surface:#1a1a1a;--math:#60a5fa;--math-bg:rgba(96,165,250,.1);--psda:#fbbf24;--correct:#22c55e;--correct-bg:rgba(34,197,94,.12);--wrong:#ef4444;--wrong-bg:rgba(239,68,68,.12);--adv:#a78bfa;--adv-bg:rgba(167,139,250,.1);--geotrig:#f87171;--algebra:#34d399;--des:#06b6d4}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);line-height:1.65}
.top-stripe{height:4px;background:linear-gradient(90deg,#C8102E 0%,#C8102E 50%,#fff 50%,#fff 100%);position:fixed;top:0;left:0;right:0;z-index:100}
.container{max-width:800px;margin:0 auto;padding:20px 20px 60px}
.back-link{display:inline-flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem;padding:8px 0;margin-top:8px;cursor:pointer;text-decoration:none}
.back-link:hover{color:var(--accent)}
.mod-header{padding:40px 0 30px;border-bottom:1px solid var(--border);margin-bottom:32px}
.mod-badge{display:inline-block;background:var(--adv);color:#000;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:14px}
.mod-header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700;margin-bottom:6px}
.mod-header .subtitle{color:var(--muted);font-size:1rem}
.mod-meta{display:flex;gap:20px;margin-top:14px;font-size:.82rem;color:var(--muted)}
.section{margin-bottom:36px}
.section-label{font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:6px}
.section h2{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:700;margin-bottom:12px}
.section p{color:#ccc;font-size:.93rem;margin-bottom:12px;line-height:1.7}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:12px}
.card-accent{border-left:3px solid var(--accent)}
.callout{background:var(--accent-light);border:1px solid rgba(200,16,46,.3);border-radius:10px;padding:14px 18px;margin-bottom:16px;font-size:.9rem}
.callout strong{color:var(--accent)}

/* PROTOCOL */
.protocol{background:var(--surface);border:2px solid var(--accent);border-radius:14px;overflow:hidden;margin-bottom:16px}
.protocol-title{background:var(--accent);padding:12px 20px;font-weight:700;font-size:.95rem}
.protocol-step{display:flex;gap:14px;padding:14px 20px;border-bottom:1px solid var(--border);font-size:.9rem;color:#ccc;align-items:flex-start}
.protocol-step:last-child{border-bottom:none}
.step-num{flex-shrink:0;width:28px;height:28px;border-radius:50%;background:var(--accent-light);border:1px solid var(--accent);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.82rem;color:var(--accent);font-family:'JetBrains Mono',monospace}

/* CHECKLIST */
.checklist{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:20px;margin-bottom:16px}
.checklist h3{font-family:'Cormorant Garamond',serif;font-size:1.2rem;margin-bottom:12px}
.cl-item{display:flex;align-items:flex-start;gap:10px;padding:7px 0;border-bottom:1px solid var(--border);font-size:.9rem;color:#ccc;cursor:pointer;transition:opacity .2s}
.cl-item:last-child{border-bottom:none}
.cl-item.done{opacity:.5;text-decoration:line-through}
.cl-check{flex-shrink:0;width:22px;height:22px;border:2px solid var(--border);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:.7rem;transition:all .15s}
.cl-item.done .cl-check{background:var(--correct);border-color:var(--correct);color:#fff}
.cl-progress{font-size:.82rem;color:var(--muted);margin-top:8px;text-align:right}

/* ERROR CLASSIFICATION */
.ec-box{background:var(--surface);border:2px solid var(--math);border-radius:14px;padding:22px;margin-bottom:16px}
.ec-item{background:var(--paper);border-radius:10px;padding:14px;margin-bottom:10px}
.ec-scenario{font-size:.92rem;line-height:1.6;margin-bottom:10px;color:#ddd}
.ec-options{display:flex;flex-wrap:wrap;gap:6px}
.ec-opt{padding:6px 14px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.82rem;transition:all .15s}
.ec-opt:hover:not(.ec-dis){border-color:var(--accent);background:var(--accent-light)}
.ec-opt.ec-correct{border-color:var(--correct);background:var(--correct-bg);color:var(--correct)}
.ec-opt.ec-wrong{border-color:var(--wrong);background:var(--wrong-bg);color:var(--wrong)}
.ec-opt.ec-dis{pointer-events:none;opacity:.6}
.ec-fb{margin-top:8px;font-size:.82rem;color:var(--muted);display:none;line-height:1.4}
.ec-fb.show{display:block}

/* PATTERN REPORT */
.report{background:var(--surface);border:2px solid var(--math);border-radius:14px;padding:22px;margin-bottom:16px}
.report h3{font-family:'Cormorant Garamond',serif;font-size:1.3rem;margin-bottom:4px}
.report-sub{font-size:.85rem;color:var(--muted);margin-bottom:16px}
.report-section{margin-bottom:20px}
.report-section-label{font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
.rs-blue{color:var(--math)}.rs-green{color:var(--algebra)}.rs-yellow{color:var(--psda)}.rs-red{color:var(--geotrig)}.rs-purple{color:var(--adv)}.rs-cyan{color:var(--des)}
.report-row{display:flex;align-items:center;gap:10px;margin-bottom:6px}
.report-label{flex:1;font-size:.88rem;color:#ccc}
.report-input{width:60px;padding:6px 8px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:.9rem;text-align:center}
.report-input:focus{border-color:var(--math);outline:none}
.report-bar{flex:2;height:8px;background:var(--border);border-radius:4px;overflow:hidden;max-width:200px}
.report-bar-fill{height:100%;border-radius:4px;transition:width .3s}
.report-total{display:flex;align-items:center;gap:12px;padding:12px 0;border-top:1px solid var(--border);margin-top:8px}
.report-total-label{font-weight:700;font-size:.9rem}
.report-total-val{font-family:'JetBrains Mono',monospace;font-size:1.3rem;font-weight:700}
.report-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.priority-box{background:var(--paper);border:2px dashed var(--psda);border-radius:12px;padding:16px;margin-top:16px}
.priority-title{font-weight:700;font-size:.95rem;color:var(--psda);margin-bottom:10px}
.priority-item{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.priority-num{width:24px;height:24px;border-radius:50%;background:var(--psda);color:#000;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.78rem;flex-shrink:0}
.priority-input{flex:1;padding:6px 10px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.88rem}
.priority-input:focus{border-color:var(--psda);outline:none}

/* CONSERVATION TABLE */
.cons-table{width:100%;border-collapse:collapse;font-size:.86rem;margin-bottom:16px}
.cons-table th,.cons-table td{padding:10px 12px;border:1px solid var(--border);text-align:left}
.cons-table th{background:var(--surface);font-weight:700;font-size:.76rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted)}
.cons-table td{color:#ccc}

.btn{display:inline-block;background:var(--accent);color:#fff;font-family:inherit;font-size:.9rem;font-weight:600;padding:10px 24px;border:none;border-radius:8px;cursor:pointer;transition:all .2s}
.btn:hover{background:#a00d24}
.btn-sm{padding:8px 16px;font-size:.82rem}
.btn-blue{background:var(--math)}.btn-blue:hover{background:#4b8fda}
.btn-outline{background:transparent;border:2px solid var(--accent);color:var(--accent)}
.btn-outline:hover{background:var(--accent-light)}

.mod-nav{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-top:1px solid var(--border);margin-top:40px}
.mod-nav a{color:var(--accent);text-decoration:none;font-weight:600;font-size:.9rem;display:flex;align-items:center;gap:6px}
.mod-nav a:hover{text-decoration:underline}

@media(max-width:600px){.mod-meta{flex-wrap:wrap;gap:10px}.report-grid{grid-template-columns:1fr}.ec-options{flex-direction:column}}
</style>
</head>
<body>
<div class="top-stripe"></div>
<div class="container">
<a class="back-link" href="index.html">‚Üê Back to Math Course</a>

<div class="mod-header">
  <div class="mod-badge">Module 9 ¬∑ Reflect</div>
  <h1>Full Practice Test & Deep Error Analysis</h1>
  <p class="subtitle">Take a full timed test, then conduct the most thorough error analysis of the program.</p>
  <div class="mod-meta">
    <span>‚è± 2 full sessions</span>
    <span>üìã Session 1: Test ¬∑ Session 2: Analysis</span>
    <span>üîÑ Phase 4: Reflect</span>
  </div>
</div>

<!-- INTRO -->
<div class="section">
  <div class="section-label">Purpose</div>
  <h2>Why This Module Matters</h2>
  <div class="callout"><strong>This is not just another practice test.</strong> The test itself is only half the value. The error analysis afterward ‚Äî identifying patterns, classifying error types, checking Desmos usage, and revising your study plan ‚Äî is where the real score gains happen.</div>
  <p>You've built content knowledge (Modules 2‚Äì6) and layered strategy on top (Modules 7‚Äì8). Now it's time to see how it all performs under real pressure ‚Äî and identify the 2‚Äì3 highest-impact areas for your final push.</p>
</div>

<!-- PRE-TEST CHECKLIST -->
<div class="section">
  <div class="section-label">Before the Test</div>
  <h2>Pre-Test Checklist</h2>
  <div class="checklist" id="preChecklist"></div>
</div>

<!-- PROTOCOL -->
<div class="section">
  <div class="section-label">Session 1</div>
  <h2>Practice Test Protocol</h2>
  <div class="protocol">
    <div class="protocol-title">Full Math Section Protocol</div>
    <div class="protocol-step"><div class="step-num">1</div><div>Open the <a href="https://bluebook.collegeboard.org/" target="_blank" style="color:var(--math)">Bluebook app</a>. Select a full Math section ‚Äî use a <strong>DIFFERENT</strong> official practice test than your Module 1 baseline.</div></div>
    <div class="protocol-step"><div class="step-num">2</div><div>Full conditions: <strong>44 questions, 70 minutes</strong>, two adaptive modules. No interruptions, no phone, no notes.</div></div>
    <div class="protocol-step"><div class="step-num">3</div><div>Implement ALL strategies from Modules 7‚Äì8: use Desmos intentionally, apply the 5-Second Decision Tree, use POOD and LOTD.</div></div>
    <div class="protocol-step"><div class="step-num">4</div><div>After each module: <strong>self-score immediately</strong>. Note which Module 2 you received (harder or easier).</div></div>
    <div class="protocol-step"><div class="step-num">5</div><div>Mark every question you were <strong>unsure about</strong>, even if correct. These "lucky correct" answers reveal hidden weaknesses.</div></div>
    <div class="protocol-step"><div class="step-num">6</div><div>Complete the Pattern Report Builder below for every missed AND uncertain question.</div></div>
  </div>
</div>

<!-- POST-TEST CHECKLIST -->
<div class="section">
  <div class="section-label">After the Test</div>
  <h2>Post-Test Checklist</h2>
  <div class="checklist" id="postChecklist"></div>
</div>

<!-- ERROR CLASSIFICATION EXERCISE -->
<div class="section">
  <div class="section-label">Interactive Exercise</div>
  <h2>Math Error Classification Practice</h2>
  <p>Before analyzing your own test, practice classifying these math-specific error scenarios.</p>
  <div class="ec-box" id="ecBox"></div>
  <div id="ecScore" style="text-align:center;padding:10px 0;font-size:.88rem;color:var(--muted)"></div>
</div>

<!-- PATTERN REPORT -->
<div class="section">
  <div class="section-label">Session 2: Interactive Tool</div>
  <h2>Math Pattern Report Builder</h2>
  <p>Enter your error data from the practice test. The tool calculates patterns and highlights priority areas. All data saves in your browser.</p>
  <div class="report" id="patternReport"></div>
</div>

<!-- INTERPRETING RESULTS -->
<div class="section">
  <div class="section-label">Analysis</div>
  <h2>How to Read Your Pattern Report</h2>
  <div class="card" style="border-left:3px solid var(--algebra)"><h4 style="margin-bottom:6px">Most errors in Algebra?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Go back to Module 2. Focus on systems of equations and linear inequalities ‚Äî these are the most-tested algebra topics.</p></div>
  <div class="card" style="border-left:3px solid var(--adv)"><h4 style="margin-bottom:6px">Most errors in Advanced Math?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Review Modules 3‚Äì4. Quadratic forms and function transformations are the highest-yield topics to revisit.</p></div>
  <div class="card" style="border-left:3px solid var(--psda)"><h4 style="margin-bottom:6px">Most errors in Problem-Solving & Data?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Review Module 5. Focus on percent change, conditional probability, and study design ‚Äî the three most common trap question types.</p></div>
  <div class="card" style="border-left:3px solid var(--geotrig)"><h4 style="margin-bottom:6px">Most errors in Geometry & Trig?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Review Module 6. Circle equations and special right triangles account for most geometry points.</p></div>
  <div class="card" style="border-left:3px solid var(--des)"><h4 style="margin-bottom:6px">"Should have used Desmos" count is high?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Go back to Module 7. You're leaving points on the table by not using Desmos on questions it could solve.</p></div>
  <div class="card card-accent"><h4 style="margin-bottom:6px">Most errors are Careless/Misread?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Slow down on easy questions. Re-read what the question asks BEFORE selecting your answer. Circle "find 2x" not "find x." Use Desmos to verify.</p></div>
</div>

<!-- PRACTICE TEST CONSERVATION -->
<div class="section">
  <div class="section-label">Planning</div>
  <h2>Practice Test Conservation Plan</h2>
  <p>College Board provides 6 official practice tests. Use them strategically ‚Äî don't burn through them.</p>
  <table class="cons-table">
    <tr><th>Test</th><th>When</th><th>Purpose</th></tr>
    <tr><td><strong>Practice Test 1</strong></td><td>Module 1 (Baseline)</td><td>Establish starting score</td></tr>
    <tr><td><strong>Practice Test 2</strong></td><td>Module 9 (Now)</td><td>Measure progress; refine study plan</td></tr>
    <tr><td><strong>Practice Test 3</strong></td><td>2 weeks before test day</td><td>Simulate full test conditions</td></tr>
    <tr><td><strong>Practice Test 4</strong></td><td>1 week before test day</td><td>Final assessment</td></tr>
    <tr><td><strong>Tests 5‚Äì6</strong></td><td>Reserve</td><td>Only if additional full-length practice needed</td></tr>
  </table>
</div>

<!-- PROGRESS TRACKER -->
<div class="section">
  <div class="section-label">Progress</div>
  <h2>Score Comparison</h2>
  <p>Compare your Module 1 baseline with your practice test to measure growth.</p>
  <div class="card" style="border:2px solid var(--correct)">
    <div style="display:grid;grid-template-columns:1fr auto 1fr;gap:16px;align-items:center;text-align:center">
      <div>
        <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px">Module 1 Baseline</div>
        <input type="number" id="baseScore" placeholder="‚Äî" min="0" max="44" style="width:80px;padding:8px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1.4rem;text-align:center;font-weight:700" oninput="updateProgress()">
        <div style="font-size:.78rem;color:var(--muted);margin-top:4px">out of 44</div>
      </div>
      <div style="font-size:2rem;color:var(--muted)">‚Üí</div>
      <div>
        <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px">Practice Test Score</div>
        <input type="number" id="practScore" placeholder="‚Äî" min="0" max="44" style="width:80px;padding:8px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1.4rem;text-align:center;font-weight:700" oninput="updateProgress()">
        <div style="font-size:.78rem;color:var(--muted);margin-top:4px">out of 44</div>
      </div>
    </div>
    <div id="progressResult" style="text-align:center;margin-top:14px;font-size:.9rem;color:var(--muted)">Enter both scores to see your growth.</div>
  </div>
</div>

<!-- KEY TAKEAWAYS -->
<div class="section">
  <div class="section-label">Summary</div>
  <h2>Key Takeaways</h2>
  <div class="card card-accent">
    <ol style="padding-left:18px;font-size:.93rem;color:#ccc;line-height:2">
      <li>The practice test is only half the value ‚Äî the error analysis is where real learning happens.</li>
      <li>Classify every error: Content Gap, Careless, Time Pressure, Misread/Trap, Strategy Gap.</li>
      <li>Check your Desmos usage: "Should have used Desmos" and "Plug In / Backsolve would have helped" reveal strategy gaps.</li>
      <li>Your top error domain tells you exactly which module to review for Module 10.</li>
      <li>Did you reach the harder Module 2? That's the gateway to 650+ scores.</li>
      <li>Conserve official practice tests ‚Äî use them at strategic intervals, not all at once.</li>
    </ol>
  </div>
</div>

<!-- HOMEWORK -->
<div class="section">
  <div class="section-label">Before Module 10</div>
  <h2>What to Do Next</h2>
  <div class="card card-accent" style="font-size:.93rem;color:#ccc">
    <p><strong style="color:var(--ink)">1. Complete Your Pattern Report</strong> ‚Äî Fill in every section. Export or screenshot your results.</p>
    <p><strong style="color:var(--ink)">2. Identify Your Top 3 Priorities</strong> ‚Äî These will drive your Module 10 targeted review.</p>
    <p><strong style="color:var(--ink)">3. Review Your Weakest Domain</strong> ‚Äî Go back to the corresponding module and redo the exercises.</p>
    <p style="margin:0"><strong style="color:var(--ink)">4. Practice 15 Targeted Questions</strong> ‚Äî Focus exclusively on your weakest question types. Quality over quantity.</p>
  </div>
</div>

<div class="mod-nav">
  <a href="module-8.html">‚Üê Module 8: Strategy</a>
  <a href="module-10.html">Module 10: Final Review ‚Üí</a>
</div>
</div>

<script>
// ============ CHECKLISTS ============
const PRE_ITEMS=[
  'Bluebook app downloaded, updated, and logged in',
  'Using a DIFFERENT official practice test than your Module 1 baseline',
  'Quiet testing environment ‚Äî no distractions, door closed',
  'Timer ready (Bluebook manages timing)',
  'Scratch paper and pencil available',
  'Phone silenced and out of reach',
  'Water and snack for break between modules',
  'Strategy plan decided: LOTD letter chosen, 5-Second Decision Tree memorized, POOD approach set',
  'Desmos shortcuts memorized (^, _, ~, |)',
];
const POST_ITEMS=[
  'Self-scored both modules immediately using answer key',
  'Noted which Module 2 you received (harder or easier)',
  'Marked every uncertain question (even if answered correctly)',
  'For each error: identified domain, specific topic, and error type',
  'For each error: checked whether Desmos could have helped',
  'For each error: checked whether Plug In or Backsolve would have been faster',
  'Filled in the Pattern Report Builder below',
  'Identified top 3 priority areas for remaining study time',
  'Compared baseline score to practice test score',
];
function renderCL(items,id,key){
  const saved=JSON.parse(localStorage.getItem(key)||'{}');
  const done=Object.values(saved).filter(v=>v).length;
  document.getElementById(id).innerHTML=`<h3>${id==='preChecklist'?'‚úÖ Pre-Test Setup':'‚úÖ Post-Test Actions'}</h3>`+
    items.map((item,i)=>`<div class="cl-item${saved[i]?' done':''}" onclick="toggleCL('${key}',${i},'${id}')">
      <div class="cl-check">${saved[i]?'‚úì':''}</div><div>${item}</div></div>`).join('')+
    `<div class="cl-progress">${done}/${items.length} completed</div>`;
}
function toggleCL(key,i,id){
  const s=JSON.parse(localStorage.getItem(key)||'{}');s[i]=!s[i];localStorage.setItem(key,JSON.stringify(s));
  renderCL(id==='preChecklist'?PRE_ITEMS:POST_ITEMS,id,key);
}
renderCL(PRE_ITEMS,'preChecklist','pp_mm9_pre');
renderCL(POST_ITEMS,'postChecklist','pp_mm9_post');

// ============ ERROR CLASSIFICATION ============
const EC_ITEMS=[
  {scenario:'You missed a question about circle equations. You correctly identified the center from (x‚àí3)¬≤+(y+2)¬≤=16 as (3,‚àí2), but chose radius = 16 instead of 4 because you forgot to take the square root.',
   correct:'Content Gap',fb:'Forgetting that r¬≤ = 16 means r = 4 is a content gap. Review Module 6, Topic 6B: the equation gives r¬≤, not r.'},
  {scenario:'You solved a system of equations correctly using elimination, but wrote your final answer as (3, 5) when the question asked for the value of x + y. The correct answer was 8.',
   correct:'Misread/Trap',fb:'Classic SAT trap! You solved correctly but answered the wrong question. Always re-read what they\'re asking for.'},
  {scenario:'On a question with variables in all four answer choices, you spent 3 minutes doing complex algebra. Plugging in x = 2 would have given you the answer in 30 seconds.',
   correct:'Strategy Gap',fb:'Variables in answer choices = Plug In (PIYON). This is a strategy gap ‚Äî review Module 8\'s 5-Second Decision Tree.'},
  {scenario:'You ran out of time with 5 questions left. You used LOTD (all B) and got 1 right.',
   correct:'Time Pressure',fb:'Running out of time. Practice pacing: first pass ~25 min, second pass ~8 min, final check ~2 min. Did you skip hard questions on first pass?'},
  {scenario:'You correctly identified a quadratic question and tried to factor, but the quadratic didn\'t factor nicely. You spent 2 minutes trying before giving up. Graphing it in Desmos would have given the answer in 10 seconds.',
   correct:'Strategy Gap',fb:'When factoring doesn\'t work quickly, switch to Desmos or the quadratic formula. This is a strategy gap ‚Äî use the 5-second Desmos decision.'},
  {scenario:'You solved 3(x + 4) = 27 and got x = 5. But you expanded 3(x + 4) as 3x + 4 instead of 3x + 12.',
   correct:'Careless Error',fb:'You know how to distribute ‚Äî you just did it wrong. Slow down on distribution and double-check your arithmetic.'},
  {scenario:'A statistics question asked which measure of center is most affected by adding an outlier. You chose median instead of mean because you mixed up which one is sensitive to outliers.',
   correct:'Content Gap',fb:'Mean is affected by outliers; median is resistant. This is a content gap ‚Äî review Module 5, Topic 5B.'},
  {scenario:'You solved a question about exponential growth correctly but selected the answer for exponential decay because you confused f(x) = a(1+r)À£ with f(x) = a(1‚àír)À£.',
   correct:'Content Gap',fb:'Mixing up growth (1+r) vs decay (1‚àír) is a content gap. Review Module 3, Topic 3C.'},
];
let ecAns={};
function renderEC(){
  document.getElementById('ecBox').innerHTML=EC_ITEMS.map((e,i)=>{
    const ans=ecAns[i];const has=ans!==undefined;
    return `<div class="ec-item"><div style="font-size:.78rem;font-weight:700;color:var(--muted);margin-bottom:6px">Scenario ${i+1}</div>
      <div class="ec-scenario">${e.scenario}</div>
      <div class="ec-options">${['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'].map(o=>{
        let cls='ec-opt';if(has){cls+=' ec-dis';if(o===e.correct)cls+=' ec-correct';else if(o===ans&&o!==e.correct)cls+=' ec-wrong';}
        return `<div class="${cls}" onclick="ecAns[${i}]='${o}';renderEC()">${o}</div>`;
      }).join('')}</div>
      <div class="ec-fb${has?' show':''}">${has?(ans===e.correct?'‚úì Correct! ':'‚úó Incorrect. ')+e.fb:''}</div></div>`;
  }).join('');
  const t=EC_ITEMS.length,a=Object.keys(ecAns).length,c=Object.entries(ecAns).filter(([i,v])=>v===EC_ITEMS[i].correct).length;
  document.getElementById('ecScore').innerHTML=a===t?`<strong style="color:${c>=6?'var(--correct)':c>=4?'var(--psda)':'var(--wrong)'}">${c}/${t} correct</strong> ‚Äî ${c>=6?'Ready to classify your own errors!':c>=4?'Good ‚Äî review the ones you missed.':'Review the 5 error types carefully.'}`:`${a}/${t} completed`;
}
renderEC();

// ============ PATTERN REPORT ============
const RK='pp_mm9_report';
function loadR(){return JSON.parse(localStorage.getItem(RK)||'{}');}
function saveR(d){localStorage.setItem(RK,JSON.stringify(d));}

const ERROR_TYPES=['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'];
const ET_COLORS=['#C8102E','#f59e0b','#ef4444','#60a5fa','#a78bfa'];
const DOMAINS=['Algebra','Advanced Math','Problem-Solving & Data','Geometry & Trig'];
const DOM_COLORS=['#34d399','#a78bfa','#fbbf24','#f87171'];

function renderReport(){
  const d=loadR();
  function rows(items,pre,colors){
    return items.map((item,i)=>{
      const v=d[pre+i]||0;
      return `<div class="report-row"><div class="report-label">${item}</div>
        <input class="report-input" type="number" min="0" max="44" value="${v||''}" placeholder="0" onchange="updateR('${pre+i}',this.value)">
        <div class="report-bar"><div class="report-bar-fill" style="width:${Math.min(v*8,100)}%;background:${colors[i%colors.length]}"></div></div></div>`;
    }).join('');
  }
  const etT=ERROR_TYPES.reduce((s,_,i)=>s+(parseInt(d['et'+i])||0),0);
  const domT=DOMAINS.reduce((s,_,i)=>s+(parseInt(d['dom'+i])||0),0);

  document.getElementById('patternReport').innerHTML=`
    <h3>üìä Math Pattern Report Builder</h3>
    <div class="report-sub">Enter error counts from your practice test. Data auto-saves.</div>
    <div class="report-grid">
      <div>
        <div class="report-section">
          <div class="report-section-label rs-blue">Scores</div>
          <div class="report-row"><div class="report-label">Module 1 Raw</div>
            <input class="report-input" type="number" min="0" max="22" value="${d.m1||''}" placeholder="/22" onchange="updateR('m1',this.value)"></div>
          <div class="report-row"><div class="report-label">Module 2 Raw</div>
            <input class="report-input" type="number" min="0" max="22" value="${d.m2||''}" placeholder="/22" onchange="updateR('m2',this.value)"></div>
          <div class="report-row"><div class="report-label">Module 2 Type</div>
            <select style="padding:6px 8px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.85rem" onchange="updateR('m2type',this.value)">
              <option value="">Select...</option><option${d.m2type==='Harder'?' selected':''}>Harder</option><option${d.m2type==='Easier'?' selected':''}>Easier</option>
            </select></div>
          <div class="report-total"><div class="report-total-label">Total:</div>
            <div class="report-total-val">${(parseInt(d.m1)||0)+(parseInt(d.m2)||0)}/44</div></div>
        </div>
      </div>
      <div>
        <div class="report-section">
          <div class="report-section-label rs-red">Errors by Type (${etT})</div>
          ${rows(ERROR_TYPES,'et',ET_COLORS)}
        </div>
      </div>
    </div>
    <div class="report-section" style="margin-top:16px">
      <div class="report-section-label rs-green">Errors by Domain (${domT})</div>
      <div class="report-grid">${DOMAINS.map((dom,i)=>{
        const v=d['dom'+i]||0;
        return `<div class="report-row"><div class="report-label">${dom}</div>
          <input class="report-input" type="number" min="0" max="44" value="${v||''}" placeholder="0" onchange="updateR('dom${i}',this.value)">
          <div class="report-bar"><div class="report-bar-fill" style="width:${Math.min(v*8,100)}%;background:${DOM_COLORS[i]}"></div></div></div>`;
      }).join('')}</div>
    </div>
    <div class="report-section" style="margin-top:16px">
      <div class="report-section-label rs-cyan">Desmos & Strategy Check</div>
      <div class="report-grid">
        <div class="report-row"><div class="report-label">Should have used Desmos</div>
          <input class="report-input" type="number" min="0" max="44" value="${d.desY||''}" placeholder="0" onchange="updateR('desY',this.value)"></div>
        <div class="report-row"><div class="report-label">Desmos was slower than algebra</div>
          <input class="report-input" type="number" min="0" max="44" value="${d.desN||''}" placeholder="0" onchange="updateR('desN',this.value)"></div>
        <div class="report-row"><div class="report-label">Plug In would have helped</div>
          <input class="report-input" type="number" min="0" max="44" value="${d.plugIn||''}" placeholder="0" onchange="updateR('plugIn',this.value)"></div>
        <div class="report-row"><div class="report-label">Backsolve would have helped</div>
          <input class="report-input" type="number" min="0" max="44" value="${d.backsolve||''}" placeholder="0" onchange="updateR('backsolve',this.value)"></div>
      </div>
    </div>
    <div class="priority-box">
      <div class="priority-title">üéØ Top 3 Priority Areas</div>
      <div class="priority-item"><div class="priority-num">1</div><input class="priority-input" placeholder="e.g., Quadratic equations ‚Äî vertex form" value="${d.p1||''}" oninput="updateR('p1',this.value)"></div>
      <div class="priority-item"><div class="priority-num">2</div><input class="priority-input" placeholder="e.g., Desmos ‚Äî regression on data tables" value="${d.p2||''}" oninput="updateR('p2',this.value)"></div>
      <div class="priority-item"><div class="priority-num">3</div><input class="priority-input" placeholder="e.g., Time management ‚Äî flagging hard questions" value="${d.p3||''}" oninput="updateR('p3',this.value)"></div>
    </div>
    <div style="margin-top:14px;text-align:center">
      <button class="btn btn-sm btn-blue" onclick="exportReport()">üìã Export Report</button>
      <button class="btn btn-sm btn-outline" onclick="if(confirm('Clear all data?')){localStorage.removeItem('${RK}');renderReport()}" style="margin-left:8px">Reset</button>
    </div>`;
}
function updateR(k,v){const d=loadR();d[k]=v;saveR(d);renderReport();}
function exportReport(){
  const d=loadR();
  let t='MATH PATTERN REPORT ‚Äî PantherPrep SAT Math Course\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
  t+=`Module 1: ${d.m1||'‚Äî'}/22\nModule 2: ${d.m2||'‚Äî'}/22 (${d.m2type||'‚Äî'})\nTotal: ${(parseInt(d.m1)||0)+(parseInt(d.m2)||0)}/44\n\n`;
  t+='ERRORS BY TYPE:\n';ERROR_TYPES.forEach((_,i)=>t+=`  ${ERROR_TYPES[i]}: ${d['et'+i]||0}\n`);
  t+='\nERRORS BY DOMAIN:\n';DOMAINS.forEach((_,i)=>t+=`  ${DOMAINS[i]}: ${d['dom'+i]||0}\n`);
  t+=`\nDESMOS CHECK:\n  Should have used Desmos: ${d.desY||0}\n  Desmos slower than algebra: ${d.desN||0}\n`;
  t+=`\nSTRATEGY CHECK:\n  Plug In would have helped: ${d.plugIn||0}\n  Backsolve would have helped: ${d.backsolve||0}\n`;
  t+=`\nTOP 3 PRIORITIES:\n  1. ${d.p1||'‚Äî'}\n  2. ${d.p2||'‚Äî'}\n  3. ${d.p3||'‚Äî'}\n`;
  navigator.clipboard.writeText(t).then(()=>alert('Copied!')).catch(()=>{const a=document.createElement('textarea');a.value=t;document.body.appendChild(a);a.select();document.execCommand('copy');document.body.removeChild(a);alert('Copied!');});
}
renderReport();

// ============ PROGRESS ============
function updateProgress(){
  const b=parseInt(document.getElementById('baseScore').value);
  const p=parseInt(document.getElementById('practScore').value);
  const el=document.getElementById('progressResult');
  if(isNaN(b)||isNaN(p)){el.textContent='Enter both scores to see your growth.';return;}
  const diff=p-b;
  if(diff>0)el.innerHTML=`<strong style="color:var(--correct)">+${diff} questions improved!</strong> That's a <strong>${Math.round(diff/b*100)}%</strong> improvement. Great progress! üéâ`;
  else if(diff===0)el.innerHTML=`<span style="color:var(--psda)">Same score.</span> Check your Pattern Report ‚Äî are you making different errors? That can still be progress even if the total hasn't changed.`;
  else el.innerHTML=`<span style="color:var(--wrong)">${diff} from baseline.</span> Don't worry ‚Äî check your Pattern Report to see what shifted. New strategies sometimes need more practice time.`;
}
</script>
<script src="/translate.js"></script></body>
</html>
