<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 1: Diagnostic & Orientation ‚Äî SAT Math ‚Äî PantherPrep</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--ink:#f0f0f0;--paper:#121212;--accent:#C8102E;--accent-light:rgba(200,16,46,.15);--border:#2a2a2a;--muted:#999;--surface:#1a1a1a;--math:#60a5fa;--math-bg:rgba(96,165,250,.1);--algebra:#34d399;--algebra-bg:rgba(52,211,153,.1);--advanced:#a78bfa;--adv-bg:rgba(167,139,250,.1);--psda:#fbbf24;--psda-bg:rgba(251,191,36,.1);--geotrig:#f87171;--geotrig-bg:rgba(248,113,113,.1);--correct:#22c55e;--correct-bg:rgba(34,197,94,.12);--wrong:#ef4444;--wrong-bg:rgba(239,68,68,.12);--danger:#ef4444;--danger-bg:rgba(239,68,68,.08);--des:#2bc4a9;--des-bg:rgba(43,196,169,.1);--strat:#f97316;--strat-bg:rgba(249,115,22,.1)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);line-height:1.65;overflow-x:hidden}
.top-stripe{height:4px;background:linear-gradient(90deg,#C8102E 0%,#C8102E 50%,#fff 50%,#fff 100%);position:fixed;top:0;left:0;right:0;z-index:100}

.screen{display:none;opacity:0;transition:opacity .4s ease;min-height:100vh}
.screen.active{display:block;opacity:1}
.screen.fade-in{animation:fadeIn .4s ease forwards}
.screen.fade-out{animation:fadeOut .3s ease forwards}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeOut{from{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-12px)}}

.screen-progress{position:fixed;top:12px;left:50%;transform:translateX(-50%);display:flex;gap:8px;z-index:101;padding:6px 14px;background:rgba(18,18,18,.85);backdrop-filter:blur(8px);border-radius:20px;border:1px solid var(--border)}
.screen-dot{width:8px;height:8px;border-radius:50%;background:var(--border);transition:all .3s;cursor:pointer}
.screen-dot.completed{background:var(--accent)}
.screen-dot.current{background:var(--accent);box-shadow:0 0 8px rgba(200,16,46,.5);transform:scale(1.25)}
.screen-dot:hover{transform:scale(1.3)}

.container{max-width:800px;margin:0 auto;padding:20px 20px 60px}

/* WELCOME SCREEN */
.welcome-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:40px 20px;text-align:center}
.welcome-badge{display:inline-block;background:var(--accent);color:#fff;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:18px}
.welcome-screen h1{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,5vw,3rem);font-weight:700;margin-bottom:8px;max-width:600px}
.welcome-sub{color:var(--muted);font-size:1.05rem;max-width:500px;margin:0 auto 32px}
.welcome-meta{display:flex;gap:24px;justify-content:center;margin-bottom:36px;font-size:.85rem;color:var(--muted)}
.preview-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;max-width:600px;width:100%;margin-bottom:40px}
.preview-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px 14px;text-align:left;transition:all .2s}
.preview-card:hover{border-color:var(--accent);transform:translateY(-2px)}
.preview-icon{font-size:1.4rem;margin-bottom:8px}
.preview-title{font-size:.82rem;font-weight:700;margin-bottom:3px}
.preview-desc{font-size:.72rem;color:var(--muted);line-height:1.4}
.start-btn{padding:14px 36px;background:var(--accent);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s;font-family:'Source Sans 3',sans-serif}
.start-btn:hover{filter:brightness(1.15);transform:translateY(-1px);box-shadow:0 6px 20px rgba(200,16,46,.3)}

/* COMPLETE SCREEN */
.complete-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:40px 20px;text-align:center}
.complete-icon{font-size:4rem;margin-bottom:16px;animation:celebrateBounce .6s ease}
@keyframes celebrateBounce{0%{transform:scale(0)}50%{transform:scale(1.2)}100%{transform:scale(1)}}
.complete-screen h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.4rem);margin-bottom:8px}
.complete-sub{color:var(--muted);font-size:1rem;margin-bottom:28px}
.takeaway-list{text-align:left;max-width:500px;width:100%;margin-bottom:32px}
.takeaway-item{display:flex;gap:10px;align-items:flex-start;padding:8px 0;font-size:.88rem;color:#ccc}
.takeaway-check{color:var(--correct);flex-shrink:0;font-weight:700}
.nav-cards{display:grid;grid-template-columns:1fr 1fr;gap:12px;max-width:500px;width:100%}
.nav-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px;text-align:center;cursor:pointer;transition:all .2s;text-decoration:none;color:var(--ink)}
.nav-card:hover{border-color:var(--accent);transform:translateY(-2px)}
.nav-card-label{font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
.nav-card-title{font-weight:700;font-size:.95rem}

/* LESSON CHROME */
.back-link{display:inline-flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem;padding:8px 0;margin-top:8px;cursor:pointer;text-decoration:none}
.back-link:hover{color:var(--accent)}
.mod-header{padding:40px 0 30px;border-bottom:1px solid var(--border);margin-bottom:32px}
.mod-badge{display:inline-block;background:var(--accent);color:#fff;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:14px}
.mod-header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700;margin-bottom:6px}
.mod-header .subtitle{color:var(--muted);font-size:1rem}
.mod-meta{display:flex;gap:20px;margin-top:14px;font-size:.82rem;color:var(--muted)}

.section{margin-bottom:36px}
.section-label{font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:6px}
.section h2{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:700;margin-bottom:12px}
.section p{color:#ccc;font-size:.93rem;margin-bottom:12px;line-height:1.7}

.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:12px}
.card-accent{border-left:3px solid var(--accent)}
.callout{background:var(--accent-light);border:1px solid rgba(200,16,46,.3);border-radius:10px;padding:14px 18px;margin-bottom:16px;font-size:.9rem}
.callout strong{color:var(--accent)}
.callout-blue{background:var(--math-bg);border-color:rgba(96,165,250,.3)}
.callout-blue strong{color:var(--math)}

/* STRUCTURE TABLE */
.struct-table{width:100%;border-collapse:collapse;font-size:.88rem;margin-bottom:16px}
.struct-table th,.struct-table td{padding:10px 12px;border:1px solid var(--border);text-align:left;vertical-align:top}
.struct-table th{background:var(--surface);font-weight:700;font-size:.78rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted)}
.struct-table td{color:#ccc}
.struct-table code{background:rgba(96,165,250,.1);color:var(--math);padding:1px 6px;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:.82rem}

/* DOMAIN CARDS */
.domain-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:16px}
.domain-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px;transition:all .2s;cursor:pointer}
.domain-card:hover{transform:translateY(-2px)}
.domain-card.flipped .dc-front{display:none}.domain-card.flipped .dc-back{display:block}
.dc-header{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.dc-pct{font-family:'JetBrains Mono',monospace;font-size:1.3rem;font-weight:700}
.dc-name{font-weight:700;font-size:.95rem}.dc-qs{font-size:.82rem;color:var(--muted)}
.dc-topics{font-size:.82rem;color:var(--muted);line-height:1.5;margin-top:4px}
.dc-back{display:none;font-size:.85rem;color:#ccc;line-height:1.6}
.dc-flip{font-size:.68rem;color:var(--muted);text-align:right;margin-top:6px}

/* ADAPTIVE VISUAL */
.adaptive{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:20px;margin-bottom:16px}
.adaptive-flow{display:flex;flex-direction:column;align-items:center;gap:8px}
.adaptive-box{padding:12px 20px;border-radius:10px;text-align:center;font-size:.88rem;font-weight:600;min-width:200px}
.adaptive-arrow{color:var(--muted);font-size:1.2rem}
.adaptive-split{display:flex;gap:16px;width:100%}.adaptive-branch{flex:1;text-align:center}

/* ROUTING SIMULATOR */
.sim-container{background:var(--surface);border:2px solid var(--math);border-radius:14px;padding:22px;margin-bottom:16px}
.sim-slider-row{display:flex;align-items:center;gap:14px;margin-bottom:16px}
.sim-slider{flex:1;-webkit-appearance:none;appearance:none;height:8px;border-radius:4px;background:linear-gradient(90deg,var(--wrong) 0%,var(--psda) 50%,var(--correct) 100%);outline:none}
.sim-slider::-webkit-slider-thumb{-webkit-appearance:none;width:24px;height:24px;border-radius:50%;background:var(--ink);border:3px solid var(--math);cursor:pointer}
.sim-slider::-moz-range-thumb{width:24px;height:24px;border-radius:50%;background:var(--ink);border:3px solid var(--math);cursor:pointer}
.sim-val{font-family:'JetBrains Mono',monospace;font-size:1.4rem;font-weight:700;min-width:60px;text-align:center}
.sim-result{text-align:center;padding:16px;border-radius:10px;transition:all .3s}
.sim-meter{height:12px;border-radius:6px;background:var(--border);margin:10px 0;overflow:hidden}
.sim-meter-fill{height:100%;border-radius:6px;transition:width .4s ease,background .4s ease}

/* STRATEGY GRID */
.strat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:10px;margin-bottom:16px}
.strat-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:14px;cursor:pointer;transition:all .2s}
.strat-card:hover{border-color:var(--math);transform:translateY(-2px)}
.strat-card.flipped .sf-front{display:none}.strat-card.flipped .sf-back{display:block}
.sf-icon{font-size:1.5rem;margin-bottom:4px}.sf-title{font-weight:700;font-size:.95rem;margin-bottom:2px}
.sf-hint{font-size:.78rem;color:var(--muted);font-style:italic}
.sf-flip{font-size:.68rem;color:var(--muted);text-align:right;margin-top:4px}
.sf-back{display:none;font-size:.83rem;color:#ccc;line-height:1.5}

/* MINI DIAGNOSTIC */
.diag-q{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px;margin-bottom:12px}
.diag-domain{font-size:.68rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:6px;display:inline-block;padding:2px 8px;border-radius:4px}
.diag-stem{font-size:.93rem;margin-bottom:12px;color:#ddd;line-height:1.7}
.diag-stem code{background:rgba(96,165,250,.1);color:var(--math);padding:1px 6px;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:.85rem}
.diag-choices{display:flex;flex-direction:column;gap:6px}
.diag-choice{padding:10px 14px;background:var(--paper);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.88rem;transition:all .15s;display:flex;align-items:center;gap:10px}
.diag-choice:hover:not(.dc-dis){border-color:var(--math);background:var(--math-bg)}
.diag-choice .letter{font-weight:700;color:var(--muted);min-width:20px}
.diag-choice.dc-correct{border-color:var(--correct);background:var(--correct-bg)}
.diag-choice.dc-wrong{border-color:var(--wrong);background:var(--wrong-bg)}
.diag-choice.dc-dis{pointer-events:none;opacity:.7}
.diag-choice.dc-correct .letter{color:var(--correct)}.diag-choice.dc-wrong .letter{color:var(--wrong)}
.diag-explain{margin-top:10px;padding:12px;background:var(--paper);border-radius:8px;font-size:.85rem;color:var(--muted);line-height:1.6;display:none;border-left:3px solid var(--correct)}
.diag-explain.show{display:block}
.diag-conf{display:flex;gap:6px;margin-top:8px;margin-bottom:4px}
.diag-conf-btn{padding:4px 12px;border-radius:6px;border:1px solid var(--border);background:var(--paper);color:var(--muted);cursor:pointer;font-size:.75rem;transition:all .15s}
.diag-conf-btn:hover{border-color:var(--math)}
.diag-conf-btn.active{border-color:var(--math);background:var(--math-bg);color:var(--math)}

/* RESULTS DASHBOARD */
.results{background:var(--surface);border:2px solid var(--math);border-radius:14px;padding:22px;margin-bottom:16px}
.results-score{text-align:center;margin-bottom:16px}
.results-big{font-family:'JetBrains Mono',monospace;font-size:3rem;font-weight:700}
.results-sub{font-size:.88rem;color:var(--muted)}
.results-domains{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:16px}
.results-domain{padding:12px;background:var(--paper);border-radius:8px;text-align:center}
.results-domain-name{font-size:.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
.results-domain-score{font-family:'JetBrains Mono',monospace;font-size:1.2rem;font-weight:700}
.results-domain-bar{height:6px;border-radius:3px;background:var(--border);margin-top:6px;overflow:hidden}
.results-domain-fill{height:100%;border-radius:3px;transition:width .6s ease}

/* SCORE PROJECTOR */
.proj-container{background:var(--surface);border:2px solid var(--psda);border-radius:14px;padding:22px;margin-bottom:16px}
.proj-inputs{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:16px}
.proj-field label{display:block;font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px}
.proj-field input,.proj-field select{width:100%;padding:10px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1.1rem;text-align:center}
.proj-field input:focus,.proj-field select:focus{border-color:var(--psda);outline:none}
.proj-result{text-align:center;padding:16px;border-radius:10px;background:var(--paper)}
.proj-big{font-family:'JetBrains Mono',monospace;font-size:2.4rem;font-weight:700}

/* ERROR CLASSIFICATION */
.ec-box{background:var(--surface);border:2px solid var(--math);border-radius:14px;padding:22px;margin-bottom:16px}
.ec-item{background:var(--paper);border-radius:10px;padding:14px;margin-bottom:10px}
.ec-scenario{font-size:.92rem;line-height:1.6;margin-bottom:10px;color:#ddd}
.ec-options{display:flex;flex-wrap:wrap;gap:6px}
.ec-opt{padding:6px 14px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.82rem;transition:all .15s}
.ec-opt:hover:not(.ec-dis){border-color:var(--accent);background:var(--accent-light)}
.ec-opt.ec-correct{border-color:var(--correct);background:var(--correct-bg);color:var(--correct)}
.ec-opt.ec-wrong{border-color:var(--wrong);background:var(--wrong-bg);color:var(--wrong)}
.ec-opt.ec-dis{pointer-events:none;opacity:.6}
.ec-fb{margin-top:8px;font-size:.82rem;color:var(--muted);display:none;line-height:1.4}.ec-fb.show{display:block}

/* ERROR ANALYSIS WORKSHEET */
.worksheet{background:var(--surface);border:2px solid var(--advanced);border-radius:14px;padding:22px;margin-bottom:16px}
.ws-entry{background:var(--paper);border-radius:10px;padding:14px;margin-bottom:10px;border:1px solid var(--border)}
.ws-row{display:grid;grid-template-columns:auto 1fr;gap:8px 12px;align-items:center;margin-bottom:6px}
.ws-label{font-size:.8rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}
.ws-input,.ws-select{padding:6px 10px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.85rem}
.ws-input:focus,.ws-select:focus{border-color:var(--math);outline:none}
.ws-textarea{width:100%;padding:6px 10px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.85rem;resize:vertical;min-height:40px}
.ws-textarea:focus{border-color:var(--math);outline:none}
.ws-actions{display:flex;gap:8px;margin-top:12px}

/* CHECKLIST */
.checklist{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:20px;margin-bottom:16px}
.cl-item{display:flex;align-items:flex-start;gap:10px;padding:7px 0;border-bottom:1px solid var(--border);font-size:.9rem;color:#ccc;cursor:pointer;transition:opacity .2s}
.cl-item:last-child{border-bottom:none}.cl-item.done{opacity:.5;text-decoration:line-through}
.cl-check{flex-shrink:0;width:22px;height:22px;border:2px solid var(--border);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:.7rem;transition:all .15s}
.cl-item.done .cl-check{background:var(--correct);border-color:var(--correct);color:#fff}
.cl-progress{font-size:.82rem;color:var(--muted);margin-top:8px;text-align:right}

/* PROTOCOL STEPS */
.protocol{background:var(--surface);border:2px solid var(--accent);border-radius:14px;overflow:hidden;margin-bottom:16px}
.protocol-title{background:var(--accent);padding:12px 20px;font-weight:700;font-size:.95rem}
.protocol-step{display:flex;gap:14px;padding:14px 20px;border-bottom:1px solid var(--border);font-size:.9rem;color:#ccc;align-items:flex-start}
.protocol-step:last-child{border-bottom:none}
.step-num{flex-shrink:0;width:28px;height:28px;border-radius:50%;background:var(--accent-light);border:1px solid var(--accent);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.82rem;color:var(--accent);font-family:'JetBrains Mono',monospace}

.btn{display:inline-block;background:var(--accent);color:#fff;font-family:inherit;font-size:.9rem;font-weight:600;padding:10px 24px;border:none;border-radius:8px;cursor:pointer;transition:all .2s}
.btn:hover{background:#a00d24}.btn-sm{padding:8px 16px;font-size:.82rem}
.btn-blue{background:var(--math)}.btn-blue:hover{background:#4b8fda}
.btn-outline{background:transparent;border:2px solid var(--accent);color:var(--accent)}.btn-outline:hover{background:var(--accent-light)}

@media(max-width:600px){
  .mod-meta{flex-wrap:wrap;gap:10px}
  .domain-grid{grid-template-columns:1fr}
  .strat-grid{grid-template-columns:1fr}
  .adaptive-split{flex-direction:column}
  .ec-options{flex-direction:column}
  .proj-inputs{grid-template-columns:1fr}
  .results-domains{grid-template-columns:1fr}
  .diag-conf{flex-wrap:wrap}
  .preview-grid{grid-template-columns:1fr 1fr}
  .welcome-meta{flex-wrap:wrap;gap:12px}
  .nav-cards{grid-template-columns:1fr}
}
</style>
</head>
<body>
<div class="top-stripe"></div>
<div class="screen-progress" id="screenProgress"></div>

<!-- ==================== SCREEN 1: WELCOME ==================== -->
<div class="screen active fade-in" id="screen-welcome">
  <div class="welcome-screen">
    <div class="welcome-badge">Module 1</div>
    <h1>Welcome to the SAT & Diagnostic</h1>
    <p class="welcome-sub">Establish your baseline, learn the test structure, and build your personalized study plan.</p>
    <div class="welcome-meta"><span>‚è± ~90 min + test time</span><span>üìã 3 sessions</span><span>üîç Phase 1: Diagnose</span></div>
    <div class="preview-grid">
      <div class="preview-card"><div class="preview-icon">üìä</div><div class="preview-title">Test Structure</div><div class="preview-desc">44 questions, 70 minutes, adaptive module format</div></div>
      <div class="preview-card"><div class="preview-icon">üîÄ</div><div class="preview-title">Adaptive Modules</div><div class="preview-desc">How Module 1 performance determines your score ceiling</div></div>
      <div class="preview-card"><div class="preview-icon">üéØ</div><div class="preview-title">Score Projector</div><div class="preview-desc">Estimate your scaled score from raw scores and routing</div></div>
      <div class="preview-card"><div class="preview-icon">ü©∫</div><div class="preview-title">Diagnostic</div><div class="preview-desc">20-question assessment across all four domains</div></div>
      <div class="preview-card"><div class="preview-icon">üîç</div><div class="preview-title">Error Analysis</div><div class="preview-desc">Classify mistakes to target your study time</div></div>
      <div class="preview-card"><div class="preview-icon">üìã</div><div class="preview-title">Study Plan</div><div class="preview-desc">Personalized pathway based on your results</div></div>
    </div>
    <button class="start-btn" onclick="goScreen(1)">Start Learning ‚Üí</button>
  </div>
</div>

<!-- ==================== SCREEN 2: LESSON CONTENT ==================== -->
<div class="screen" id="screen-lesson">
<div class="container">
<a class="back-link" href="index.html">‚Üê Back to SAT Math Course</a>

<div class="mod-header">
  <div class="mod-badge">Module 1</div>
  <h1>Diagnostic & Orientation</h1>
  <p class="subtitle">Establish your baseline, learn the test structure, and build your personalized study plan.</p>
  <div class="mod-meta"><span>‚è± ~90 min + test time</span><span>üìã 3 sessions</span><span>üîç Phase 1: Diagnose</span></div>
</div>

<!-- SAT MATH STRUCTURE -->
<div class="section">
  <div class="section-label">Know Your Test</div>
  <h2>Digital SAT Math: Structure & Format</h2>
  <table class="struct-table">
    <tr><th>Feature</th><th>Details</th></tr>
    <tr><td><strong>Total Questions</strong></td><td><code>44</code> (22 per module)</td></tr>
    <tr><td><strong>Total Time</strong></td><td><code>70 minutes</code> (35 per module)</td></tr>
    <tr><td><strong>Time per Question</strong></td><td>~<code>95 seconds</code> average</td></tr>
    <tr><td><strong>Adaptive Format</strong></td><td>Module 2 difficulty adjusts based on Module 1 performance</td></tr>
    <tr><td><strong>Question Types</strong></td><td>~75% multiple choice (4 options) &amp; ~25% student-produced response</td></tr>
    <tr><td><strong>Calculator</strong></td><td>Built-in <strong>Desmos</strong> with graphing/scientific toggle on ALL questions</td></tr>
    <tr><td><strong>Scoring</strong></td><td><code>200‚Äì800</code> Math section score (no penalty for wrong answers)</td></tr>
    <tr><td><strong>Reference Sheet</strong></td><td>Area/volume formulas, special right triangles, circle properties</td></tr>
  </table>
  <div class="callout"><strong>‚ö†Ô∏è Calculator Update (2025):</strong> CAS (Computer Algebra System) calculators are now <strong>banned</strong> on the SAT. You may only use the built-in Desmos or an approved non-CAS calculator. Desmos now offers a <strong>scientific/graphing toggle</strong> ‚Äî you can switch modes during the test.</div>
  <div class="callout-blue callout"><strong>No wrong-answer penalty</strong> means you should <strong>answer every single question</strong> ‚Äî even if you have to guess. A random guess gives you a 25% chance on multiple choice. Never leave anything blank.</div>
</div>

<!-- ADAPTIVE MODULE VISUAL -->
<div class="section">
  <div class="section-label">How It Works</div>
  <h2>The Adaptive Module System</h2>
  <p>The SAT uses <strong>multistage adaptive testing (MST)</strong>. You can't skip ahead to Module 2 or go back to Module 1. Your Module 1 performance determines which version of Module 2 you receive ‚Äî and this has <em>massive</em> implications for your score ceiling.</p>
  <div class="adaptive">
    <div class="adaptive-flow">
      <div class="adaptive-box" style="background:var(--math-bg);border:2px solid var(--math)">Module 1: Mixed difficulty<br><span style="font-size:.78rem;color:var(--muted)">22 questions ¬∑ 35 minutes ¬∑ Easy ‚Üí Hard</span></div>
      <div class="adaptive-arrow">‚Üì Your performance determines‚Ä¶</div>
      <div class="adaptive-split">
        <div class="adaptive-branch"><div class="adaptive-box" style="background:var(--correct-bg);border:2px solid var(--correct)">Module 2: <strong>Harder</strong><br><span style="font-size:.78rem;color:var(--muted)">Unlocks scores up to 800</span></div></div>
        <div class="adaptive-branch"><div class="adaptive-box" style="background:var(--wrong-bg);border:2px solid var(--wrong)">Module 2: <strong>Easier</strong><br><span style="font-size:.78rem;color:var(--muted)">Score ceiling ~560‚Äì630</span></div></div>
      </div>
    </div>
  </div>
  <div class="callout"><strong>The Module 1 Imperative:</strong> Getting routed to the easier Module 2 <em>caps your maximum possible score</em> at roughly 560‚Äì630 ‚Äî even if you ace every question in Module 2. Accuracy on the first 22 questions matters more than speed. The routing threshold is estimated at ~15 correct out of 22.</div>
</div>

<!-- ROUTING SIMULATOR -->
<div class="section">
  <div class="section-label">Interactive: Try It</div>
  <h2>Routing Simulator</h2>
  <p>Slide to see how your Module 1 performance affects your scoring potential. Notice how the score ceiling changes dramatically around the routing threshold.</p>
  <div class="sim-container">
    <div style="text-align:center;font-size:.82rem;color:var(--muted);margin-bottom:8px">Module 1 Correct Answers</div>
    <div class="sim-slider-row">
      <span style="font-size:.78rem;color:var(--muted)">0</span>
      <input type="range" class="sim-slider" id="simSlider" min="0" max="22" value="15" oninput="updateSim()">
      <span style="font-size:.78rem;color:var(--muted)">22</span>
      <div class="sim-val" id="simVal">15</div>
    </div>
    <div class="sim-result" id="simResult"></div>
    <div style="margin-top:12px">
      <div style="display:flex;justify-content:space-between;font-size:.72rem;color:var(--muted);margin-bottom:4px"><span>Score Floor</span><span id="simRange">‚Äî</span><span>Score Ceiling</span></div>
      <div class="sim-meter"><div class="sim-meter-fill" id="simMeter"></div></div>
    </div>
  </div>
</div>

<!-- FOUR DOMAINS -->
<div class="section">
  <div class="section-label">Content Breakdown</div>
  <h2>The Four Content Domains</h2>
  <p>Click each domain card to see the specific topics covered.</p>
  <div class="domain-grid" id="domainGrid"></div>
  <div class="callout-blue callout"><strong>Key Insight:</strong> Algebra and Advanced Math together account for roughly <strong>70%</strong> of the test. Mastering these two domains is the single highest-impact investment of your study time.</div>
</div>

<!-- STRATEGY TOOLKIT -->
<div class="section">
  <div class="section-label">Preview</div>
  <h2>The SAT Math Strategy Toolkit</h2>
  <p>These six strategies will be your weapons throughout the entire course. Click each card to learn more. We'll practice all of them in Modules 7‚Äì8.</p>
  <div class="strat-grid" id="stratGrid"></div>
</div>

<!-- WHY SAT MATTERS -->
<div class="section">
  <div class="section-label">Context</div>
  <h2>Why Your SAT Score Matters More Than Ever</h2>
  <p>After years of test-optional policies, the trend has reversed. As of the 2025‚Äì26 admissions cycle, <strong>Harvard, Yale, Dartmouth, Brown, MIT, Caltech, Stanford, Georgetown, Cornell, and Penn</strong> all require or strongly encourage SAT scores.</p>
  <div class="card" style="border-left:3px solid var(--correct)">
    <div style="font-size:.93rem;color:#ccc;line-height:1.7"><strong style="color:var(--ink)">The good news:</strong> Most top-25 schools <strong>superscore</strong> the SAT, meaning they take your highest Math score and highest Reading &amp; Writing score across all sittings. Every point you gain on any test date counts toward your best composite.</div>
  </div>
  <div class="card" style="border-left:3px solid var(--psda)">
    <div style="font-size:.93rem;color:#ccc;line-height:1.7"><strong style="color:var(--psda)">By the numbers (2025):</strong> Mean SAT Math score was 508 out of 800. Only 34% of test-takers met the college-readiness benchmark of 530. Just 9% scored 700+. There's enormous room for improvement with targeted prep.</div>
  </div>
</div>

<!-- MINI DIAGNOSTIC -->
<div class="section">
  <div class="section-label">Session 1: Quick Assessment</div>
  <h2>Mini Diagnostic Assessment</h2>
  <p>Before taking a full practice test, answer these 20 questions spanning all four domains. For each question, <strong>first rate your confidence</strong>, then select your answer. This reveals both skill gaps <em>and</em> calibration gaps (questions you felt confident about but got wrong).</p>
  <div id="diagQuestions"></div>
  <div style="text-align:center;margin-top:16px"><button class="btn btn-blue" id="diagSubmit" onclick="scoreDiag()" style="display:none">Score My Diagnostic ‚Üí</button></div>
  <div id="diagResults" style="display:none"></div>
</div>

<!-- BASELINE PROTOCOL -->
<div class="section">
  <div class="section-label">Session 2</div>
  <h2>Baseline Assessment Protocol</h2>
  <p>After the mini diagnostic, take a full-length SAT Math section. Use an official College Board practice test (Tests 4‚Äì10 are current; Tests 1‚Äì3 have been retired).</p>
  <div class="protocol">
    <div class="protocol-title">Baseline Test Protocol</div>
    <div class="protocol-step"><div class="step-num">1</div><div>Open the <a href="https://bluebook.collegeboard.org/" target="_blank" style="color:var(--math)">Bluebook app</a> and select a full Math section (44 questions, 70 minutes). Use Practice Test 4, 5, or 6 ‚Äî save Tests 7‚Äì10 for later.</div></div>
    <div class="protocol-step"><div class="step-num">2</div><div><strong>Use the built-in Desmos calculator</strong> during the baseline. This establishes your current comfort level with the tool.</div></div>
    <div class="protocol-step"><div class="step-num">3</div><div>Simulate test conditions: no phone, no notes, timed modules, no pausing between modules.</div></div>
    <div class="protocol-step"><div class="step-num">4</div><div>After completion, <strong>self-score BEFORE</strong> the instructor reviews results. Self-scoring develops metacognitive awareness.</div></div>
    <div class="protocol-step"><div class="step-num">5</div><div>Mark every question you were <strong>unsure about</strong>, even if you got it correct. "Lucky correct" answers mask skill gaps.</div></div>
    <div class="protocol-step"><div class="step-num">6</div><div>Complete the Error Analysis Worksheet below for every missed AND uncertain question.</div></div>
  </div>
</div>

<!-- PRE-TEST CHECKLIST -->
<div class="section">
  <div class="section-label">Preparation</div>
  <h2>Pre-Test Checklist</h2>
  <div class="checklist" id="preChecklist"></div>
</div>

<!-- ERROR CLASSIFICATION -->
<div class="section">
  <div class="section-label">Session 2: Interactive Exercise</div>
  <h2>Error Classification Practice</h2>
  <p>Before analyzing your own test, practice classifying these sample math errors. Correctly identifying your error type is the key to knowing what to study.</p>
  <div class="ec-box" id="ecBox"></div>
  <div id="ecScore" style="text-align:center;padding:10px 0;font-size:.88rem;color:var(--muted)"></div>
</div>

<!-- ERROR ANALYSIS WORKSHEET -->
<div class="section">
  <div class="section-label">Session 2: Interactive Tool</div>
  <h2>Error Analysis Worksheet</h2>
  <p>For every missed or uncertain question on your baseline test, fill in one entry below. Data saves in your browser.</p>
  <div class="worksheet" id="worksheet">
    <h3 style="font-family:'Cormorant Garamond',serif;font-size:1.2rem;margin-bottom:4px">üìä Math Error Analysis</h3>
    <div style="font-size:.85rem;color:var(--muted);margin-bottom:14px">Complete one entry per missed/uncertain question.</div>
    <div id="wsEntries"></div>
    <div class="ws-actions">
      <button class="btn btn-blue btn-sm" onclick="addEntry()">+ Add Entry</button>
      <button class="btn btn-sm btn-outline" onclick="exportWS()">üìã Export to Clipboard</button>
      <button class="btn btn-sm" style="background:var(--wrong)" onclick="if(confirm('Clear all entries?')){localStorage.removeItem(WS_KEY);renderWS();}">Reset</button>
    </div>
  </div>
</div>

<!-- SCORE PROJECTOR -->
<div class="section">
  <div class="section-label">Session 3: Results</div>
  <h2>SAT Score Projector</h2>
  <p>Enter your raw scores and routing path to estimate your scaled SAT Math score. This shows how Module 2 routing dramatically affects your score ceiling.</p>
  <div class="proj-container">
    <div class="proj-inputs">
      <div class="proj-field"><label>Module 1 Raw</label><input type="number" id="projM1" min="0" max="22" placeholder="/22" oninput="updateProj()"></div>
      <div class="proj-field"><label>Module 2 Raw</label><input type="number" id="projM2" min="0" max="22" placeholder="/22" oninput="updateProj()"></div>
      <div class="proj-field"><label>Module 2 Path</label><select id="projPath" onchange="updateProj()" style="font-size:.88rem"><option value="">Select‚Ä¶</option><option value="hard">Harder (high ceiling)</option><option value="easy">Easier (capped)</option></select></div>
    </div>
    <div class="proj-result" id="projResult"><div style="color:var(--muted);font-size:.9rem">Enter your scores and routing path</div></div>
  </div>
</div>

<!-- BASELINE SCORE & STUDY PLAN -->
<div class="section">
  <div class="section-label">Session 3: Study Plan</div>
  <h2>Baseline Score & Study Plan</h2>
  <div class="card" style="border:2px solid var(--math)">
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px">
      <div><div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px">Module 1 Raw Score</div>
        <input type="number" id="m1Score" placeholder="/22" min="0" max="22" style="width:80px;padding:8px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1.2rem;text-align:center" oninput="updateScores()"></div>
      <div><div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px">Module 2 Raw Score</div>
        <input type="number" id="m2Score" placeholder="/22" min="0" max="22" style="width:80px;padding:8px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1.2rem;text-align:center" oninput="updateScores()"></div>
    </div>
    <div id="scoreResult" style="text-align:center;font-size:.9rem;color:var(--muted);margin-bottom:16px">Enter both scores to see your total and recommended pathway.</div>
    <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px;margin-top:16px">Top 3 Priority Areas</div>
    <div style="display:flex;flex-direction:column;gap:6px">
      <input type="text" placeholder="e.g., Quadratic equations ‚Äî vertex form" style="padding:8px 10px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.88rem">
      <input type="text" placeholder="e.g., Systems of equations ‚Äî elimination method" style="padding:8px 10px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.88rem">
      <input type="text" placeholder="e.g., Desmos ‚Äî not comfortable with regressions" style="padding:8px 10px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.88rem">
    </div>
  </div>
</div>

<!-- HOMEWORK -->
<div class="section">
  <div class="section-label">Before Next Session</div>
  <h2>Homework</h2>
  <div class="card card-accent" style="font-size:.93rem;color:#ccc">
    <p><strong style="color:var(--ink)">1. Complete Your Baseline Test</strong> ‚Äî Full 44 questions, 70 minutes, official Bluebook practice test (Test 4, 5, or 6) under test conditions.</p>
    <p><strong style="color:var(--ink)">2. Self-Score & Mark Uncertain Questions</strong> ‚Äî Score yourself before reviewing. Flag every question you weren't sure about.</p>
    <p><strong style="color:var(--ink)">3. Complete the Error Analysis Worksheet</strong> ‚Äî One entry for every missed AND uncertain question.</p>
    <p><strong style="color:var(--ink)">4. Use the Score Projector</strong> ‚Äî Enter your raw scores and routing path to estimate your scaled score.</p>
    <p><strong style="color:var(--ink)">5. Identify Your Top 3 Priority Areas</strong> ‚Äî Based on the error analysis, what are the three domains/topics where you're losing the most points?</p>
    <p style="margin:0"><strong style="color:var(--ink)">6. Explore Desmos</strong> ‚Äî Go to <a href="https://desmos.com/calculator" target="_blank" style="color:var(--math)">desmos.com/calculator</a> and spend 15 minutes graphing equations, making tables, and finding intersection points.</p>
  </div>
</div>

<div style="text-align:center;padding:24px 0">
  <button class="start-btn" onclick="goScreen(2)">Continue to Summary ‚Üí</button>
</div>
</div>
</div>

<!-- ==================== SCREEN 3: MODULE COMPLETE ==================== -->
<div class="screen" id="screen-complete">
  <div class="complete-screen">
    <div class="complete-icon">üéâ</div>
    <h1>Module 1 Complete!</h1>
    <p class="complete-sub">You've established your baseline and have a personalized study plan.</p>
    <div class="takeaway-list">
      <div style="font-weight:700;margin-bottom:12px;font-size:.85rem;color:var(--accent);text-transform:uppercase;letter-spacing:1px">Key Takeaways</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> The Digital SAT Math section has 44 questions in 70 minutes, split into two adaptive modules.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> Module 1 performance determines whether you get the harder (ceiling 800) or easier (ceiling ~560‚Äì630) Module 2.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> Four domains: Algebra ~35%, Advanced Math ~35%, PSDA ~15%, Geometry & Trig ~15%.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> Desmos graphing calculator available on every question ‚Äî CAS calculators are banned.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> No penalty for wrong answers ‚Äî never leave a question blank.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> The SAT Score Projector shows how routing dramatically affects your scaled score.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> Error analysis is the foundation of improvement ‚Äî know your error type, know what to study.</div>
    </div>
    <div class="nav-cards">
      <a class="nav-card" href="index.html"><div class="nav-card-label">‚Üê Home</div><div class="nav-card-title">Course Home</div></a>
      <a class="nav-card" href="module-2.html" style="border-color:var(--accent)"><div class="nav-card-label">Next ‚Üí</div><div class="nav-card-title">Module 2: Algebra</div></a>
    </div>
  </div>
</div>

<script>
// ============ SCREEN NAVIGATION ============
var SCREENS=['screen-welcome','screen-lesson','screen-complete'];
var currentScreen=0;
function goScreen(idx){
  if(idx<0||idx>=SCREENS.length)return;
  var cur=document.getElementById(SCREENS[currentScreen]),nxt=document.getElementById(SCREENS[idx]);
  cur.classList.remove('fade-in');cur.classList.add('fade-out');
  setTimeout(function(){cur.classList.remove('active','fade-out');nxt.classList.add('active','fade-in');currentScreen=idx;updateProgressDots();window.scrollTo(0,0);},300);
}
function updateProgressDots(){
  var labels=['Welcome','Lesson','Complete'];
  document.getElementById('screenProgress').innerHTML=SCREENS.map(function(s,i){var cls='screen-dot';if(i<currentScreen)cls+=' completed';if(i===currentScreen)cls+=' current';return '<div class="'+cls+'" onclick="'+(i<=currentScreen?'goScreen('+i+')':'')+'" title="'+labels[i]+'"></div>';}).join('');
}
updateProgressDots();

// ============ ROUTING SIMULATOR ============
function updateSim(){
  var v=parseInt(document.getElementById('simSlider').value);
  document.getElementById('simVal').textContent=v;
  var pct=v/22;var route,color,floor,ceil,bg;
  if(v>=15){route='Harder Module 2';color='var(--correct)';floor=Math.max(400,200+v*18);ceil=Math.min(200+v*15+(22-v)*5+380,800);bg='var(--correct-bg)';}
  else if(v>=12){route='Borderline ‚Äî Could go either way';color='var(--psda)';floor=Math.max(350,200+v*14);ceil=Math.min(200+v*20+200,700);bg='rgba(251,191,36,.1)';}
  else{route='Easier Module 2';color='var(--wrong)';floor=200;ceil=Math.min(400+v*20,630);bg='var(--wrong-bg)';}
  document.getElementById('simResult').innerHTML='<div style="font-size:1rem;font-weight:700;color:'+color+';margin-bottom:4px">'+v+'/22 correct ‚Üí '+route+'</div><div style="font-size:.85rem;color:var(--muted)">Estimated score range: '+floor+'‚Äì'+ceil+'</div>';
  document.getElementById('simResult').style.background=bg;
  var meterPct=((ceil-200)/600)*100;var fill=document.getElementById('simMeter');
  fill.style.width=meterPct+'%';fill.style.background=pct>=.68?'var(--correct)':pct>=.55?'var(--psda)':'var(--wrong)';
  document.getElementById('simRange').textContent=floor+'‚Äì'+ceil;
}
updateSim();

// ============ DOMAIN CARDS ============
var DOMAINS=[
  {name:'Algebra',pct:'~35%',qs:'13‚Äì15 questions',color:'var(--algebra)',topics:'Linear equations in one variable ¬∑ Linear equations in two variables ¬∑ Systems of linear equations ¬∑ Linear inequalities',back:'The single largest content area. Mastering linear equations and systems alone can be worth 60‚Äì80 points. Covered in Module 2.'},
  {name:'Advanced Math',pct:'~35%',qs:'13‚Äì15 questions',color:'var(--advanced)',topics:'Quadratic equations ¬∑ Polynomials ¬∑ Exponentials & radicals ¬∑ Rational expressions ¬∑ Functions & transformations',back:'Equal in weight to Algebra. Quadratics are the most tested topic ‚Äî know all three forms. Covered in Modules 3‚Äì4.'},
  {name:'Problem-Solving & Data',pct:'~15%',qs:'5‚Äì7 questions',color:'var(--psda)',topics:'Ratios, rates, proportions ¬∑ Percentages ¬∑ Statistics (mean, median) ¬∑ Scatterplots & data ¬∑ Probability ¬∑ Study design',back:'Highest proportion of word problems. Tests mathematical reasoning more than computation. Covered in Module 5.'},
  {name:'Geometry & Trig',pct:'~15%',qs:'5‚Äì7 questions',color:'var(--geotrig)',topics:'Lines, angles, triangles ¬∑ Circles & equations ¬∑ Area, perimeter, volume ¬∑ SOH-CAH-TOA ¬∑ Radians ¬∑ Special right triangles',back:'Fewest questions but formulas are provided on the reference sheet. Memorize for speed. Covered in Module 6.'}
];
document.getElementById('domainGrid').innerHTML=DOMAINS.map(function(d){return '<div class="domain-card" onclick="this.classList.toggle(\'flipped\')"><div class="dc-front"><div class="dc-header"><div class="dc-pct" style="color:'+d.color+'">'+d.pct+'</div><div><div class="dc-name">'+d.name+'</div><div class="dc-qs">'+d.qs+'</div></div></div><div class="dc-topics">'+d.topics+'</div><div class="dc-flip">tap for details ‚Üí</div></div><div class="dc-back">'+d.back+'<div class="dc-flip">‚Üê tap to flip back</div></div></div>';}).join('');

// ============ STRATEGY CARDS ============
var STRATS=[
  {icon:'üîå',title:'Plug In (PIYON)',hint:'Variables in answer choices? Choose numbers.',back:'When you see variables in the answer choices, pick easy numbers (2, 3, 5, 10, 100), solve to get a target answer, then test each choice with your numbers. Avoid 0 and 1.'},
  {icon:'üîÑ',title:'Backsolve (PITA)',hint:'Number answers? Plug them back in.',back:'When answer choices are specific numbers, start with B or C (middle value) and plug it into the problem. If too big, try smaller; if too small, try larger.'},
  {icon:'üìè',title:'Ballpark',hint:'Estimate first, eliminate the impossible.',back:'Before calculating, estimate the answer to eliminate clearly wrong choices. 15% of 820 ‚âà 120 ‚Äî any choice far from that is gone. Especially powerful on geometry.'},
  {icon:'üìä',title:'Desmos',hint:'Your built-in graphing superpower.',back:'~40% of SAT math questions can be solved or verified with Desmos. Graph equations, find intersections, use sliders, run regressions (now with one-click Autoregression!). Module 7 covers this.'},
  {icon:'‚ùå',title:'POE for Math',hint:'Wrong answers reveal themselves.',back:'If the question asks for a positive value, eliminate negatives. If context requires small numbers, eliminate large ones. POE turns a 25% guess into 33% or 50%.'},
  {icon:'‚è±Ô∏è',title:'POOD + LOTD',hint:'Your order, your pace, your backup letter.',back:'Answer confident questions first, flag uncertain ones. On second pass, attempt flagged questions. Use Letter of the Day (always the same letter) for remaining guesses. Never leave blanks.'}
];
document.getElementById('stratGrid').innerHTML=STRATS.map(function(s){return '<div class="strat-card" onclick="this.classList.toggle(\'flipped\')"><div class="sf-front"><div class="sf-icon">'+s.icon+'</div><div class="sf-title">'+s.title+'</div><div class="sf-hint">'+s.hint+'</div><div class="sf-flip">tap to flip</div></div><div class="sf-back">'+s.back+'</div></div>';}).join('');

// ============ MINI DIAGNOSTIC ============
var DIAG_QS=[
  {domain:'Algebra',color:'var(--algebra)',stem:'If <code>3(2x ‚àí 5) = 4x + 7</code>, what is the value of <code>x</code>?',choices:['8','9','11','22'],correct:2,explain:'Distribute: 6x ‚àí 15 = 4x + 7. Subtract 4x: 2x ‚àí 15 = 7. Add 15: 2x = 22. Divide: x = 11.'},
  {domain:'Algebra',color:'var(--algebra)',stem:'A gym charges a $50 registration fee plus $25 per month. Which equation represents the total cost <code>C</code> after <code>m</code> months?',choices:['C = 50m + 25','C = 25m + 50','C = 75m','C = 25(m + 50)'],correct:1,explain:'The fixed fee ($50) is the constant, and $25/month is the rate. C = 25m + 50.'},
  {domain:'Algebra',color:'var(--algebra)',stem:'The system <code>2x + 3y = 12</code> and <code>4x + 6y = 24</code> has how many solutions?',choices:['Zero','Exactly one','Exactly two','Infinitely many'],correct:3,explain:'The second equation is exactly 2√ó the first. Same line ‚Üí infinitely many solutions.'},
  {domain:'Algebra',color:'var(--algebra)',stem:'If <code>‚àí3x + 7 > 22</code>, which describes the solution?',choices:['x > ‚àí5','x < ‚àí5','x > 5','x < 5'],correct:1,explain:'Subtract 7: ‚àí3x > 15. Divide by ‚àí3 and FLIP the sign: x < ‚àí5.'},
  {domain:'Algebra',color:'var(--algebra)',stem:'The question asks: "What is the value of <code>2x + 1</code>?" You find <code>x = 4</code>. What should your answer be?',choices:['4','8','9','Cannot be determined'],correct:2,explain:'The question asks for 2x + 1, NOT x. So: 2(4) + 1 = 9. This is the #1 most common SAT trap!'},
  {domain:'Advanced Math',color:'var(--advanced)',stem:'What are the solutions to <code>x¬≤ ‚àí 5x + 6 = 0</code>?',choices:['x = 2 and x = 3','x = ‚àí2 and x = ‚àí3','x = 1 and x = 6','x = ‚àí1 and x = ‚àí6'],correct:0,explain:'Factor: (x ‚àí 2)(x ‚àí 3) = 0. So x = 2 or x = 3.'},
  {domain:'Advanced Math',color:'var(--advanced)',stem:'If <code>f(x) = 2x¬≤ ‚àí 3</code>, what is <code>f(‚àí4)</code>?',choices:['29','‚àí35','5','‚àí11'],correct:0,explain:'f(‚àí4) = 2(‚àí4)¬≤ ‚àí 3 = 2(16) ‚àí 3 = 32 ‚àí 3 = 29. Remember: (‚àí4)¬≤ = 16 (positive!).'},
  {domain:'Advanced Math',color:'var(--advanced)',stem:'Which expression is equivalent to <code>(3x¬≤)(4x¬≥)</code>?',choices:['7x‚Åµ','12x‚Åµ','12x‚Å∂','7x‚Å∂'],correct:1,explain:'Multiply coefficients: 3 √ó 4 = 12. Add exponents: x¬≤ ¬∑ x¬≥ = x‚Åµ. Answer: 12x‚Åµ.'},
  {domain:'Advanced Math',color:'var(--advanced)',stem:'The graph of <code>y = (x ‚àí 3)¬≤ + 2</code> has its vertex at which point?',choices:['(3, 2)','(‚àí3, 2)','(3, ‚àí2)','(‚àí3, ‚àí2)'],correct:0,explain:'Vertex form y = a(x ‚àí h)¬≤ + k gives vertex (h, k). Here h = 3, k = 2. Watch the sign!'},
  {domain:'Advanced Math',color:'var(--advanced)',stem:'A bacteria population triples every 4 hours starting at 200. Which models this?',choices:['200(3)^(t/4)','200(3)^(4t)','200 + 3t','600t'],correct:0,explain:'Triples every 4 hours: base 3, exponent t/4. P(t) = 200(3)^(t/4).'},
  {domain:'Problem-Solving & Data',color:'var(--psda)',stem:'A shirt originally costs $40 and is marked 30% off. What is the sale price?',choices:['$10','$12','$28','$30'],correct:2,explain:'30% of $40 = $12 discount. Sale price = $40 ‚àí $12 = $28. Or: $40 √ó 0.70 = $28.'},
  {domain:'Problem-Solving & Data',color:'var(--psda)',stem:'The mean of 5 numbers is 12. If a sixth number, 30, is added, what is the new mean?',choices:['14','15','17','21'],correct:1,explain:'Sum of 5 numbers = 60. New sum = 90. New mean = 90 √∑ 6 = 15.'},
  {domain:'Problem-Solving & Data',color:'var(--psda)',stem:'A researcher surveys 200 people at a shopping mall about spending habits. What is the biggest threat to validity?',choices:['Sample too small','Mall shoppers may not represent the general population','Should be done online','200 is too many'],correct:1,explain:'This is sampling bias. Mall shoppers likely differ from the general population ‚Äî it is a convenience sample.'},
  {domain:'Problem-Solving & Data',color:'var(--psda)',stem:'A scatterplot shows strong negative linear association. The correlation r is closest to:',choices:['-0.92','-0.15','0.85','0.45'],correct:0,explain:'Strong negative association means r close to -1. -0.92.'},
  {domain:'Problem-Solving & Data',color:'var(--psda)',stem:'A price increases 20% then decreases 20%. Compared to the original price, the final price is:',choices:['The same','4% less','2% less','4% more'],correct:1,explain:'$100 -> $120 -> $96. Net: 4% less. This is the successive percents trap!'},
  {domain:'Geometry & Trig',color:'var(--geotrig)',stem:'A right triangle has legs of length 5 and 12. What is the hypotenuse?',choices:['13','17','‚àö119','15'],correct:0,explain:'5¬≤ + 12¬≤ = 25 + 144 = 169 = 13¬≤. Classic 5-12-13 right triangle.'},
  {domain:'Geometry & Trig',color:'var(--geotrig)',stem:'A circle has equation <code>(x ‚àí 2)¬≤ + (y + 3)¬≤ = 49</code>. What is its radius?',choices:['49','24.5','7','‚àö49'],correct:2,explain:'r¬≤ = 49, so r = 7. Common trap: choosing 49 (that is r¬≤, not r).'},
  {domain:'Geometry & Trig',color:'var(--geotrig)',stem:'In a 30-60-90 triangle, the side opposite 30¬∞ is 5. What is the hypotenuse?',choices:['5‚àö2','5‚àö3','10','10‚àö3'],correct:2,explain:'Sides ratio x : x‚àö3 : 2x. Opposite 30¬∞ is x = 5, hypotenuse = 2x = 10.'},
  {domain:'Geometry & Trig',color:'var(--geotrig)',stem:'The circle <code>(x - 3)¬≤ + (y + 1)¬≤ = 25</code> has its center at:',choices:['(3, -1)','(-3, 1)','(3, 1)','(-3, -1)'],correct:0,explain:'(x-h)¬≤ + (y-k)¬≤ = r¬≤. h=3, k=-1. Center (3,-1). Watch the sign on (y+1)!'},
  {domain:'Geometry & Trig',color:'var(--geotrig)',stem:'In a right triangle, sin(Œ∏) = 5/13. What is cos(Œ∏)?',choices:['5/12','12/13','5/13','13/12'],correct:1,explain:'Opp=5, hyp=13. Adjacent=12 (5-12-13 triple). cos = adj/hyp = 12/13.'},
];
var diagAnswers=[];var diagConf=[];var diagScored=false;
for(var di=0;di<DIAG_QS.length;di++){diagAnswers.push(null);diagConf.push(null);}

function renderDiag(){
  document.getElementById('diagQuestions').innerHTML=DIAG_QS.map(function(q,i){
    var isCorrect=diagAnswers[i]===q.correct;
    var html='<div class="diag-q"><div class="diag-domain" style="background:'+q.color+'20;color:'+q.color+'">'+q.domain+'</div><div class="diag-stem">'+q.stem+'</div>';
    if(!diagScored){html+='<div style="font-size:.75rem;color:var(--muted);margin-bottom:4px">How confident are you?</div><div class="diag-conf">';
      ['Guessing','Somewhat sure','Very confident'].forEach(function(c,ci){html+='<div class="diag-conf-btn '+(diagConf[i]===ci?'active':'')+'" onclick="setConf('+i+','+ci+')">'+c+'</div>';});
      html+='</div>';}
    html+='<div class="diag-choices">';
    q.choices.forEach(function(c,ci){var cls='diag-choice';
      if(diagScored){if(ci===q.correct)cls+=' dc-correct';else if(diagAnswers[i]===ci)cls+=' dc-wrong';cls+=' dc-dis';}
      else if(diagAnswers[i]===ci)cls+=' dc-correct';
      html+='<div class="'+cls+'" onclick="ansDiag('+i+','+ci+')"><span class="letter">'+String.fromCharCode(65+ci)+')</span>'+c+'</div>';});
    html+='</div><div class="diag-explain '+(diagScored?'show':'')+'">'+(diagScored?(isCorrect?'‚úÖ Correct! ':'‚ùå Incorrect. ')+q.explain:'')+'</div></div>';
    return html;
  }).join('');
  var allAnswered=diagAnswers.every(function(a){return a!==null;});
  document.getElementById('diagSubmit').style.display=allAnswered&&!diagScored?'inline-block':'none';
}
function setConf(i,v){if(!diagScored){diagConf[i]=v;renderDiag();}}
function ansDiag(i,v){if(!diagScored){diagAnswers[i]=v;renderDiag();}}

function scoreDiag(){
  diagScored=true;renderDiag();
  var total=0,domScores={},domTotals={},miscal=[];
  DIAG_QS.forEach(function(q,i){
    var correct=diagAnswers[i]===q.correct;if(correct)total++;
    if(!domScores[q.domain])domScores[q.domain]=0;if(!domTotals[q.domain])domTotals[q.domain]=0;
    domTotals[q.domain]++;if(correct)domScores[q.domain]++;
    if(diagConf[i]===2&&!correct)miscal.push({q:i+1,type:'Overconfident',domain:q.domain});
    if(diagConf[i]===0&&correct)miscal.push({q:i+1,type:'Underconfident',domain:q.domain});
  });
  var colors={Algebra:'var(--algebra)','Advanced Math':'var(--advanced)','Problem-Solving & Data':'var(--psda)','Geometry & Trig':'var(--geotrig)'};
  var pct=Math.round((total/DIAG_QS.length)*100);
  var scoreColor=pct>=80?'var(--correct)':pct>=60?'var(--psda)':'var(--wrong)';
  var html='<div class="results fade-in"><div class="results-score"><div class="results-big" style="color:'+scoreColor+'">'+total+'/'+DIAG_QS.length+'</div><div class="results-sub">'+pct+'% correct ‚Äî Mini Diagnostic</div></div><div class="results-domains">';
  Object.keys(domScores).forEach(function(d){var s=domScores[d],t=domTotals[d],p=Math.round((s/t)*100);var c=p>=80?'var(--correct)':p>=50?'var(--psda)':'var(--wrong)';
    html+='<div class="results-domain"><div class="results-domain-name" style="color:'+colors[d]+'">'+d+'</div><div class="results-domain-score" style="color:'+c+'">'+s+'/'+t+'</div><div class="results-domain-bar"><div class="results-domain-fill" style="width:'+p+'%;background:'+c+'"></div></div></div>';});
  html+='</div>';
  if(miscal.length>0){html+='<div style="margin-top:12px"><div style="font-size:.82rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px">‚ö†Ô∏è Calibration Flags</div>';
    miscal.forEach(function(m){html+='<div style="font-size:.85rem;color:#ccc;padding:4px 0">Q'+m.q+': <span style="color:'+(m.type==='Overconfident'?'var(--wrong)':'var(--math)')+'">'+m.type+'</span> ('+m.domain+')</div>';});
    html+='<div style="font-size:.82rem;color:var(--muted);margin-top:8px;font-style:italic">Overconfident = sure but wrong. Underconfident = guessed but right.</div></div>';}
  html+='<div style="margin-top:16px;font-size:.9rem;color:#ccc"><strong style="color:var(--ink)">This is just a preview.</strong> Take the full Bluebook baseline test (Session 2) for an accurate score.</div>';
  html+='<div id="studyPlanTarget"></div></div>';
  document.getElementById('diagResults').style.display='block';
  document.getElementById('diagResults').innerHTML=html;
  document.getElementById('diagResults').scrollIntoView({behavior:'smooth',block:'start'});
  buildStudyPlan(domScores,domTotals);
}
function buildStudyPlan(domScores,domTotals){
  var mods={'Algebra':'Module 2','Advanced Math':'Module 3','Problem-Solving & Data':'Module 4','Geometry & Trig':'Module 5'};
  var weak=[],strong=[];
  Object.keys(domTotals).forEach(function(d){
    var pct=domTotals[d]>0?domScores[d]/domTotals[d]:1;
    if(pct<0.6)weak.push({d:d,m:mods[d],pct:Math.round(pct*100)});
    else if(pct>=0.8)strong.push({d:d,pct:Math.round(pct*100)});
  });
  var h='<div style="margin-top:16px;padding:16px;background:var(--surface);border-radius:12px;border:2px solid var(--accent)">';
  h+='<div style="font-size:.82rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--accent);margin-bottom:8px">Your Study Plan</div>';
  if(weak.length>0){h+='<div style="margin-bottom:8px"><strong style="color:var(--wrong)">Priority Review:</strong></div>';weak.forEach(function(w){h+='<div style="padding:4px 0;font-size:.88rem;color:#ccc">‚Ä¢ <strong>'+w.d+'</strong> ('+w.pct+'%) ‚Äî Focus on <strong>'+w.m+'</strong></div>';});}
  if(strong.length>0){h+='<div style="margin:8px 0"><strong style="color:var(--correct)">Strong Areas:</strong></div>';strong.forEach(function(s){h+='<div style="padding:4px 0;font-size:.88rem;color:#ccc">‚Ä¢ '+s.d+' ('+s.pct+'%) ‚Äî review briefly</div>';});}
  if(weak.length===0&&strong.length===0)h+='<div style="font-size:.88rem;color:#ccc">All domains around 60-80%. Work through all modules with equal attention.</div>';
  h+='<div style="margin-top:10px;font-size:.85rem;color:var(--muted)"><em>For a full baseline, take the Bluebook practice test (44 questions) described below.</em></div>';
  h+='</div>';
  var target=document.getElementById('studyPlanTarget');
  if(target)target.innerHTML=h;
  else{document.getElementById('diagResults').insertAdjacentHTML('beforeend',h);}
}
renderDiag();

// ============ CHECKLIST ============
var CL_ITEMS=['Bluebook app downloaded, updated, and logged in','Quiet testing environment ‚Äî no distractions, door closed','Timer ready (Bluebook manages timing, but keep a clock visible)','Scratch paper and pencil available','Phone silenced and out of reach','Water and snack for break between modules','Desmos practice: spent at least 5 minutes exploring the calculator','Understand the plan: complete test ‚Üí self-score ‚Üí error analysis worksheet'];
var CL_KEY='pp_mm1_cl';
var clState=JSON.parse(localStorage.getItem(CL_KEY)||'[]');
if(clState.length!==CL_ITEMS.length)clState=CL_ITEMS.map(function(){return false;});
function renderCL(){
  var done=clState.filter(Boolean).length;
  document.getElementById('preChecklist').innerHTML='<h3 style="font-family:\'Cormorant Garamond\',serif;font-size:1.2rem;margin-bottom:12px">‚úÖ Pre-Test Setup</h3>'+CL_ITEMS.map(function(item,i){return '<div class="cl-item'+(clState[i]?' done':'')+'" onclick="toggleCL('+i+')"><div class="cl-check">'+(clState[i]?'‚úì':'')+'</div><div>'+item+'</div></div>';}).join('')+'<div class="cl-progress">'+done+'/'+CL_ITEMS.length+' completed</div>';
}
function toggleCL(i){clState[i]=!clState[i];localStorage.setItem(CL_KEY,JSON.stringify(clState));renderCL();}
renderCL();

// ============ ERROR CLASSIFICATION ============
var EC_QS=[
  {scenario:'You missed a question asking for the slope of a line perpendicular to y = 3x + 2. You chose 3 instead of ‚àí1/3 because you forgot that perpendicular slopes are negative reciprocals.',correct:'Content Gap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],fb:'You didn\'t know the perpendicular slope rule. That\'s a content gap ‚Äî review Module 2.'},
  {scenario:'On a system of equations question, you correctly set up the algebra but accidentally wrote 3 √ó 4 = 9 instead of 12.',correct:'Careless Error',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],fb:'You knew the math but made a simple arithmetic mistake. Double-check calculations.'},
  {scenario:'You had 3 questions left with only 1 minute remaining. You guessed randomly on all three.',correct:'Time Pressure',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],fb:'Running out of time. Practice pacing: ~25 min first pass, ~8 min second pass, ~2 min final check.'},
  {scenario:'A question asked for the value of 2x, not x. You correctly solved for x = 5 but entered 5 instead of 10.',correct:'Misread/Trap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],fb:'Classic SAT trap! Always re-read what the question asks for BEFORE selecting your answer.'},
  {scenario:'You spent 4 minutes doing algebra on a question with variables in the answer choices. Plugging in would have taken 45 seconds.',correct:'Strategy Gap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],fb:'You knew the content but used the wrong approach. Variables in answers ‚Üí Plug In is faster.'},
  {scenario:'A question asked how many solutions a system has. You tried to solve the full system instead of recognizing the equations were multiples of each other.',correct:'Strategy Gap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],fb:'Recognizing patterns (like identical lines) is a strategy skill. Faster way exists.'},
  {scenario:'You missed a quadratic question because you don\'t know how to complete the square.',correct:'Content Gap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],fb:'You don\'t know the technique yet ‚Äî content gap. You\'ll learn it in Module 3.'},
  {scenario:'On a "percent increase" question, you calculated the new value but forgot to subtract the original and divide.',correct:'Content Gap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],fb:'Not knowing percent change formula (new‚àíold)/old √ó 100 is a content gap. Module 5.'},
  {scenario:'You stared at a systems problem for 2 minutes trying elimination. Graphing both in Desmos would have taken 10 seconds.',correct:'Strategy Gap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],fb:'You knew the math but chose an inefficient method. Build the "Desmos or Algebra?" habit (Module 7).'},
  {scenario:'A graph had the y-axis going from 50 to 100 (not from 0). You estimated a value as "about half" and picked 50 instead of 75.',correct:'Misread/Trap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],fb:'Misreading graph axes is a top SAT trap. Always check axis labels and whether they start at zero.'}
];
var ecAns={};
function renderEC(){
  document.getElementById('ecBox').innerHTML=EC_QS.map(function(e,i){
    var ans=ecAns[i];var has=ans!==undefined;
    return '<div class="ec-item"><div style="font-size:.78rem;font-weight:700;color:var(--muted);margin-bottom:6px">Scenario '+(i+1)+'</div><div class="ec-scenario">'+e.scenario+'</div><div class="ec-options">'+e.options.map(function(o){
      var cls='ec-opt';if(has){cls+=' ec-dis';if(o===e.correct)cls+=' ec-correct';else if(o===ans&&o!==e.correct)cls+=' ec-wrong';}
      return '<div class="'+cls+'" onclick="ansEC('+i+',\''+o+'\')">'+o+'</div>';}).join('')+'</div><div class="ec-fb'+(has?' show':'')+'">'+(has?(ans===e.correct?'‚úì Correct! ':'‚úó Incorrect. ')+e.fb:'')+'</div></div>';
  }).join('');
  var t=EC_QS.length,a=Object.keys(ecAns).length,c=0;
  Object.entries(ecAns).forEach(function(pair){if(pair[1]===EC_QS[parseInt(pair[0])].correct)c++;});
  document.getElementById('ecScore').innerHTML=a===t?'<strong style="color:'+(c>=8?'var(--correct)':c>=5?'var(--psda)':'var(--wrong)')+'">'+c+'/'+t+' correct</strong> ‚Äî '+(c>=8?'Excellent! Ready to classify your own errors.':c>=5?'Good ‚Äî review the ones you missed.':'Review the 5 error types before analyzing your test.'):(a>0?a+'/'+t+' completed':'');
}
function ansEC(i,v){if(ecAns[i]!==undefined)return;ecAns[i]=v;renderEC();}
renderEC();

// ============ ERROR ANALYSIS WORKSHEET ============
var WS_KEY='pp_m1_math_ws';
function loadWS(){return JSON.parse(localStorage.getItem(WS_KEY)||'[]');}
function saveWS(d){localStorage.setItem(WS_KEY,JSON.stringify(d));}
function addEntry(){var d=loadWS();d.push({qnum:'',domain:'',topic:'',errorType:'',shouldHave:'',desmos:'',luckyCorrect:''});saveWS(d);renderWS();}
function updateEntry(idx,field,val){var d=loadWS();if(d[idx])d[idx][field]=val;saveWS(d);}
function removeEntry(idx){var d=loadWS();d.splice(idx,1);saveWS(d);renderWS();}
function renderWS(){
  var d=loadWS();if(d.length===0){addEntry();return;}
  document.getElementById('wsEntries').innerHTML=d.map(function(e,i){return '<div class="ws-entry"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px"><div style="font-weight:700;font-size:.88rem;color:var(--math)">Question '+(i+1)+'</div><button style="background:none;border:none;color:var(--muted);cursor:pointer;font-size:.82rem" onclick="removeEntry('+i+')">‚úï Remove</button></div><div class="ws-row"><div class="ws-label">Q #</div><input class="ws-input" type="number" min="1" max="44" placeholder="1‚Äì44" value="'+e.qnum+'" onchange="updateEntry('+i+',\'qnum\',this.value)" style="width:80px"></div><div class="ws-row"><div class="ws-label">Domain</div><select class="ws-select" onchange="updateEntry('+i+',\'domain\',this.value)"><option value="">Select‚Ä¶</option><option'+(e.domain==='Algebra'?' selected':'')+'>Algebra</option><option'+(e.domain==='Advanced Math'?' selected':'')+'>Advanced Math</option><option'+(e.domain==='Problem-Solving & Data'?' selected':'')+'>Problem-Solving & Data</option><option'+(e.domain==='Geometry & Trig'?' selected':'')+'>Geometry & Trig</option></select></div><div class="ws-row"><div class="ws-label">Topic</div><input class="ws-input" placeholder="e.g., Quadratic vertex form" value="'+(e.topic||'')+'" onchange="updateEntry('+i+',\'topic\',this.value)" style="width:100%"></div><div class="ws-row"><div class="ws-label">Error Type</div><select class="ws-select" onchange="updateEntry('+i+',\'errorType\',this.value)"><option value="">Select‚Ä¶</option><option'+(e.errorType==='Content Gap'?' selected':'')+'>Content Gap</option><option'+(e.errorType==='Careless Error'?' selected':'')+'>Careless Error</option><option'+(e.errorType==='Time Pressure'?' selected':'')+'>Time Pressure</option><option'+(e.errorType==='Misread/Trap'?' selected':'')+'>Misread/Trap</option><option'+(e.errorType==='Strategy Gap'?' selected':'')+'>Strategy Gap</option></select></div><div class="ws-row"><div class="ws-label">Status</div><select class="ws-select" onchange="updateEntry('+i+',\'luckyCorrect\',this.value)"><option value="">Missed or uncertain?</option><option'+(e.luckyCorrect==='Missed'?' selected':'')+'>Missed ‚Äî got it wrong</option><option'+(e.luckyCorrect==='Lucky Correct'?' selected':'')+'>Lucky Correct ‚Äî right but unsure</option></select></div><div class="ws-row" style="grid-template-columns:1fr"><div class="ws-label">What I should have done</div></div><textarea class="ws-textarea" placeholder="Write the correct approach‚Ä¶" onchange="updateEntry('+i+',\'shouldHave\',this.value)">'+(e.shouldHave||'')+'</textarea><div class="ws-row" style="margin-top:6px"><div class="ws-label">Desmos?</div><select class="ws-select" onchange="updateEntry('+i+',\'desmos\',this.value)"><option value="">Could Desmos have helped?</option><option'+(e.desmos==='Yes'?' selected':'')+'>Yes</option><option'+(e.desmos==='No'?' selected':'')+'>No</option><option'+(e.desmos==='I used it but incorrectly'?' selected':'')+'>I used it but incorrectly</option></select></div></div>';}).join('');
}
function exportWS(){
  var d=loadWS();var txt='SAT MATH ERROR ANALYSIS ‚Äî PantherPrep\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
  var counts={},domCounts={},luckyCount=0;
  d.forEach(function(e){txt+='Q'+(e.qnum||'?')+' | '+(e.domain||'‚Äî')+' | '+(e.topic||'‚Äî')+' | '+(e.errorType||'‚Äî')+' | '+(e.luckyCorrect||'‚Äî')+' | Desmos: '+(e.desmos||'‚Äî')+'\n  ‚Üí '+(e.shouldHave||'‚Äî')+'\n\n';
    if(e.errorType)counts[e.errorType]=(counts[e.errorType]||0)+1;if(e.domain)domCounts[e.domain]=(domCounts[e.domain]||0)+1;if(e.luckyCorrect==='Lucky Correct')luckyCount++;});
  txt+='ERROR TYPE SUMMARY:\n';Object.keys(counts).forEach(function(k){txt+='  '+k+': '+counts[k]+'\n';});
  txt+='\nDOMAIN SUMMARY:\n';Object.keys(domCounts).forEach(function(k){txt+='  '+k+': '+domCounts[k]+'\n';});
  if(luckyCount>0)txt+='\n‚ö†Ô∏è LUCKY CORRECT: '+luckyCount+' questions (hidden gaps)\n';
  navigator.clipboard.writeText(txt).then(function(){alert('Copied!');}).catch(function(){var ta=document.createElement('textarea');ta.value=txt;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);alert('Copied!');});
}
renderWS();

// ============ SCORE PROJECTOR ============
function updateProj(){
  var m1=parseInt(document.getElementById('projM1').value),m2=parseInt(document.getElementById('projM2').value),path=document.getElementById('projPath').value;
  var el=document.getElementById('projResult');
  if(isNaN(m1)||isNaN(m2)||!path){el.innerHTML='<div style="color:var(--muted);font-size:.9rem">Enter your scores and routing path</div>';return;}
  var raw=m1+m2,low,high,color;
  if(path==='hard'){
    if(raw>=40){low=740;high=800;}else if(raw>=35){low=650;high=750;}else if(raw>=30){low=570;high=660;}else if(raw>=25){low=500;high=580;}else if(raw>=20){low=440;high=510;}else{low=Math.max(200,raw*18);high=Math.min(460,raw*22);}
    color=raw>=35?'var(--correct)':raw>=25?'var(--psda)':'var(--wrong)';
  }else{
    var ceiling=630;
    if(raw>=40){low=580;high=ceiling;}else if(raw>=35){low=520;high=600;}else if(raw>=30){low=460;high=560;}else if(raw>=25){low=400;high=500;}else{low=Math.max(200,raw*15);high=Math.min(430,raw*18);}
    color='var(--psda)';
  }
  var mid=Math.round((low+high)/2);
  el.innerHTML='<div class="proj-big" style="color:'+color+'">'+low+'‚Äì'+high+'</div><div style="font-size:.82rem;color:var(--muted);margin-top:4px">Estimated scaled score range (midpoint: ~'+mid+')</div><div style="font-size:.85rem;color:#ccc;margin-top:10px">'+raw+'/44 raw ¬∑ '+(path==='hard'?'Harder':'Easier')+' Module 2</div>'+(path==='easy'?'<div style="margin-top:8px;font-size:.82rem;color:var(--wrong)">‚ö†Ô∏è Score capped at ~630 on easier path. Focus on Module 1 accuracy to reach the harder path.</div>':'')+(path==='hard'&&raw>=35?'<div style="margin-top:8px;font-size:.82rem;color:var(--correct)">üéØ Strong position! Eliminate careless errors to push toward 750+.</div>':'');
}

// ============ BASELINE SCORES ============
function updateScores(){
  var m1=parseInt(document.getElementById('m1Score').value),m2=parseInt(document.getElementById('m2Score').value);
  var el=document.getElementById('scoreResult');
  if(isNaN(m1)||isNaN(m2)){el.textContent='Enter both scores to see your estimated scaled score.';return;}
  var total=m1+m2;
  var scaled=Math.round(200+((total/44)*600));
  var capped=Math.min(Math.max(scaled,200),800);
  var lvl,color,advice;
  if(capped>=650){lvl='Advanced';color='var(--correct)';advice='Focus on Modules 3‚Äì4 (hard Advanced Math), 7 (Desmos mastery), and 8 (strategy optimization).';}
  else if(capped>=530){lvl='Proficient';color='var(--math)';advice='Solid foundation! Focus on your weakest domain and Modules 3, 4, 7, 8 to push higher.';}
  else if(capped>=400){lvl='Approaching';color='var(--psda)';advice='Complete all modules with extra time on your weakest domain. Every raw point ‚âà 14 scaled points.';}
  else{lvl='Developing';color='var(--wrong)';advice='Start with Modules 2, 5, 6. Priority: linear equations, basic ratios, Desmos basics.';}
  var benchPct=((530-200)/600)*100;
  var scorePct=((capped-200)/600)*100;
  el.innerHTML='<div style="font-family:JetBrains Mono,monospace;font-size:2rem;font-weight:700;color:'+color+'">'+capped+'</div>'+
    '<div style="font-size:.82rem;color:var(--muted)">'+total+'/44 raw ¬∑ '+lvl+'</div>'+
    '<div style="height:8px;border-radius:4px;background:var(--border);margin:12px 0;position:relative">'+
      '<div style="height:100%;border-radius:4px;background:'+color+';width:'+scorePct+'%;transition:width .4s"></div>'+
      '<div style="position:absolute;left:'+benchPct+'%;top:-6px;width:2px;height:20px;background:var(--correct);border-radius:1px" title="530 Benchmark"></div>'+
    '</div>'+
    '<div style="display:flex;justify-content:space-between;font-size:.72rem;color:var(--muted);margin-bottom:12px"><span>200</span><span style="color:var(--correct)">530 benchmark ‚Üë</span><span>800</span></div>'+
    '<div style="font-size:.88rem;color:#ccc;line-height:1.6">'+advice+'</div>';
}
</script>
<script src="/translate.js"></script>
</body>
</html>
