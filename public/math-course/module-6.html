<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 6: Geometry & Trigonometry ‚Äî SAT Math ‚Äî PantherPrep</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--ink:#f0f0f0;--paper:#121212;--accent:#C8102E;--accent-light:rgba(200,16,46,.15);--border:#2a2a2a;--muted:#999;--surface:#1a1a1a;--math:#60a5fa;--math-bg:rgba(96,165,250,.1);--algebra:#34d399;--algebra-bg:rgba(52,211,153,.1);--advanced:#a78bfa;--adv:#a78bfa;--adv-bg:rgba(167,139,250,.1);--psda:#fbbf24;--psda-bg:rgba(251,191,36,.1);--geotrig:#f87171;--geotrig-bg:rgba(248,113,113,.1);--correct:#22c55e;--correct-bg:rgba(34,197,94,.12);--wrong:#ef4444;--wrong-bg:rgba(239,68,68,.12);--danger:#ef4444;--danger-bg:rgba(239,68,68,.08);--grad:linear-gradient(135deg,var(--geotrig),#fb923c)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);line-height:1.65;overflow-x:hidden}
.top-stripe{height:4px;background:linear-gradient(90deg,#C8102E 0%,#C8102E 50%,#fff 50%,#fff 100%);position:fixed;top:0;left:0;right:0;z-index:100}

.screen{display:none;opacity:0;transition:opacity .4s ease;min-height:100vh}
.screen.active{display:block;opacity:1}
.screen.fade-in{animation:fadeIn .4s ease forwards}
.screen.fade-out{animation:fadeOut .3s ease forwards}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeOut{from{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-12px)}}

.screen-progress{position:fixed;top:12px;left:50%;transform:translateX(-50%);display:flex;gap:8px;z-index:101;padding:6px 14px;background:rgba(18,18,18,.85);backdrop-filter:blur(8px);border-radius:20px;border:1px solid var(--border)}
.screen-dot{width:8px;height:8px;border-radius:50%;background:var(--border);transition:all .3s;cursor:pointer}
.screen-dot.completed{background:var(--geotrig)}
.screen-dot.current{background:var(--accent);box-shadow:0 0 8px rgba(200,16,46,.5);transform:scale(1.25)}
.screen-dot:hover{transform:scale(1.3)}

.container{max-width:800px;margin:0 auto;padding:20px 20px 60px}

.welcome-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:40px 20px;text-align:center}
.welcome-badge{display:inline-block;background:var(--geotrig);color:#fff;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:18px}
.welcome-screen h1{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,5vw,3rem);font-weight:700;margin-bottom:8px;max-width:600px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.welcome-sub{color:var(--muted);font-size:1.05rem;max-width:500px;margin:0 auto 32px}
.welcome-meta{display:flex;gap:24px;justify-content:center;margin-bottom:36px;font-size:.85rem;color:var(--muted)}
.preview-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;max-width:600px;width:100%;margin-bottom:40px}
.preview-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px 14px;text-align:left;transition:all .2s}
.preview-card:hover{border-color:var(--geotrig);transform:translateY(-2px)}
.preview-icon{font-size:1.4rem;margin-bottom:8px}
.preview-title{font-size:.82rem;font-weight:700;margin-bottom:3px}
.preview-desc{font-size:.72rem;color:var(--muted);line-height:1.4}
.start-btn{padding:14px 36px;background:var(--grad);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s;font-family:'Source Sans 3',sans-serif}
.start-btn:hover{filter:brightness(1.15);transform:translateY(-1px);box-shadow:0 6px 20px rgba(248,113,113,.3)}

.warmup-container{max-width:600px;margin:0 auto;padding:60px 20px}
.warmup-header{text-align:center;margin-bottom:32px}
.warmup-badge{display:inline-block;background:var(--psda);color:#000;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:4px 12px;border-radius:12px;margin-bottom:12px}
.warmup-dots{display:flex;gap:8px;justify-content:center;margin-top:16px}
.warmup-dot{width:10px;height:10px;border-radius:50%;background:var(--border);transition:all .3s}
.warmup-dot.done-correct{background:var(--correct)}
.warmup-dot.done-wrong{background:var(--wrong)}
.warmup-dot.active{background:var(--psda);box-shadow:0 0 8px rgba(251,191,36,.4)}
.warmup-q{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:24px;margin-bottom:16px}
.warmup-q .source-tag{font-size:.7rem;color:var(--psda);font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-bottom:8px}
.warmup-q .q-text{font-size:.95rem;line-height:1.7;margin-bottom:14px}
.warmup-choices{display:flex;flex-direction:column;gap:8px}
.warmup-choice{display:flex;align-items:center;gap:10px;padding:11px 14px;background:var(--paper);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.88rem;transition:all .15s}
.warmup-choice:hover:not(.wu-dis){border-color:var(--psda);background:rgba(251,191,36,.05)}
.warmup-choice.wu-correct{border-color:var(--correct);background:var(--correct-bg)}
.warmup-choice.wu-wrong{border-color:var(--wrong);background:var(--wrong-bg)}
.warmup-choice.wu-dis{pointer-events:none;opacity:.7}
.warmup-choice.wu-correct{opacity:1}
.warmup-fb{font-size:.85rem;color:var(--muted);line-height:1.6;margin-top:12px;padding:10px;background:var(--paper);border-radius:8px;border-left:3px solid var(--correct)}
.warmup-next{padding:10px 24px;background:var(--psda);color:#000;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-size:.88rem;margin-top:12px;font-family:'Source Sans 3',sans-serif}
.warmup-next:hover{filter:brightness(1.1)}
.warmup-summary{text-align:center;padding:40px 20px}
.warmup-score{font-family:'JetBrains Mono',monospace;font-size:2.4rem;font-weight:700;color:var(--psda);margin:12px 0}
.warmup-continue{padding:12px 28px;background:var(--geotrig);color:#fff;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-size:.95rem;margin-top:20px;font-family:'Source Sans 3',sans-serif}
.warmup-continue:hover{filter:brightness(1.15)}

.back-link{display:inline-flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem;padding:8px 0;margin-top:8px;cursor:pointer;text-decoration:none}
.back-link:hover{color:var(--accent)}
.mod-header{padding:40px 0 30px;border-bottom:1px solid var(--border);margin-bottom:32px}
.mod-badge{display:inline-block;background:var(--geotrig);color:#fff;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:14px}
.mod-header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700;margin-bottom:6px}
.mod-header .subtitle{color:var(--muted);font-size:1rem}
.mod-meta{display:flex;gap:20px;margin-top:14px;font-size:.82rem;color:var(--muted)}
.section{margin-bottom:36px}
.section-label{font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--geotrig);margin-bottom:6px}
.section h2{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:700;margin-bottom:12px}
.section p{color:#ccc;font-size:.93rem;margin-bottom:12px;line-height:1.7}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:12px}
.card-accent{border-left:3px solid var(--accent)}
.callout{background:var(--accent-light);border:1px solid rgba(200,16,46,.3);border-radius:10px;padding:14px 18px;margin-bottom:16px;font-size:.9rem}
.callout strong{color:var(--accent)}
.callout-red{background:var(--geotrig-bg);border-color:rgba(248,113,113,.3)}
.callout-red strong{color:var(--geotrig)}
.callout-blue{background:var(--math-bg);border-color:rgba(96,165,250,.3)}
.callout-blue strong{color:var(--math)}
.topic{background:var(--surface);border:1px solid var(--border);border-radius:14px;margin-bottom:10px;overflow:hidden;transition:all .2s}
.topic-header{display:flex;align-items:center;gap:12px;padding:14px 18px;cursor:pointer}
.topic-header:hover{background:rgba(248,113,113,.05)}
.topic-badge{width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.82rem;color:#fff;flex-shrink:0}
.topic-info{flex:1}
.topic-title{font-weight:700;font-size:.95rem;flex:1}
.topic-sub{font-size:.82rem;color:var(--muted)}
.topic-arrow{color:var(--muted);font-size:.9rem;transition:transform .2s;flex-shrink:0}
.topic.open .topic-arrow{transform:rotate(90deg)}
.topic-body{display:none;padding:0 18px 18px;font-size:.93rem;color:#ccc;line-height:1.7}
.topic.open .topic-body{display:block}
.topic-body h4{color:var(--ink);font-size:.9rem;margin:14px 0 6px;text-transform:uppercase;letter-spacing:.5px}
.topic-body ul{padding-left:18px;margin-bottom:10px}
.topic-body li{margin-bottom:6px}

.fm-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:16px}
.fm-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center}
.fm-name{font-weight:700;font-size:.82rem;color:var(--geotrig);margin-bottom:4px}
.fm-eq{font-family:'JetBrains Mono',monospace;font-size:.88rem}

.tri-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px}
.tri-card{background:var(--surface);border:2px solid var(--geotrig);border-radius:12px;padding:16px;text-align:center}
.tri-name{font-weight:700;font-size:1rem;color:var(--geotrig);margin-bottom:4px}
.tri-ratio{font-family:'JetBrains Mono',monospace;font-size:1.15rem;margin-bottom:6px}
.tri-sides{font-size:.82rem;color:var(--muted);line-height:1.5}

.triples-row{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:10px}
.triple{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:6px 14px;font-family:'JetBrains Mono',monospace;font-size:.88rem}

.data-table{width:100%;border-collapse:collapse;font-size:.86rem;margin-bottom:14px}
.data-table th,.data-table td{padding:8px 12px;border:1px solid var(--border);text-align:left;vertical-align:top}
.data-table th{background:var(--surface);font-weight:700;font-size:.76rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted)}
.data-table code{background:var(--geotrig-bg);color:var(--geotrig);padding:1px 6px;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:.84rem}

.exercise{background:var(--surface);border:2px solid var(--geotrig);border-radius:14px;padding:22px;margin-bottom:16px}
.exercise h3{font-family:'Cormorant Garamond',serif;font-size:1.15rem;margin-bottom:4px}
.exercise-sub{font-size:.82rem;color:var(--muted);margin-bottom:14px}
.ex-item{background:var(--paper);border-radius:10px;padding:14px;margin-bottom:10px;border:1px solid var(--border)}
.ex-prompt{font-size:.93rem;margin-bottom:10px;line-height:1.6;color:#ddd}
.ex-prompt code{background:var(--geotrig-bg);color:var(--geotrig);padding:1px 6px;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:.85rem}
.ex-input-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.ex-input{padding:8px 12px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:.95rem;width:120px}
.ex-input:focus{border-color:var(--geotrig);outline:none}
.ex-btn{padding:8px 16px;background:var(--geotrig);color:#fff;border:none;border-radius:6px;cursor:pointer;font-family:inherit;font-size:.85rem;font-weight:600}
.ex-btn:hover{filter:brightness(1.15)}
.classify-opts{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:4px}
.classify-opt{padding:6px 14px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.82rem;transition:all .15s}
.classify-opt:hover:not(.cl-dis){border-color:var(--geotrig);background:var(--geotrig-bg)}
.classify-opt.cl-correct{border-color:var(--correct);background:var(--correct-bg);color:var(--correct)}
.classify-opt.cl-wrong{border-color:var(--wrong);background:var(--wrong-bg);color:var(--wrong)}
.classify-opt.cl-dis{pointer-events:none;opacity:.7}
.mc-choices{display:flex;flex-direction:column;gap:6px}
.mc-choice{padding:10px 14px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.88rem;transition:all .15s;display:flex;align-items:center;gap:10px}
.mc-choice:hover:not(.mc-dis){border-color:var(--geotrig);background:var(--geotrig-bg)}
.mc-letter{font-weight:700;color:var(--muted);min-width:24px;font-family:'JetBrains Mono',monospace}
.mc-choice.mc-correct{border-color:var(--correct);background:var(--correct-bg)}
.mc-choice.mc-wrong{border-color:var(--wrong);background:var(--wrong-bg)}
.mc-choice.mc-dis{pointer-events:none;opacity:.7}
.mc-choice.mc-correct .mc-letter{color:var(--correct)}.mc-choice.mc-wrong .mc-letter{color:var(--wrong)}
.mc-fb{font-size:.85rem;color:var(--muted);line-height:1.6;margin-top:8px;display:none;border-left:3px solid var(--correct);background:var(--paper);padding:8px 12px;border-radius:6px}.mc-fb.show{display:block}
.ex-fb{font-size:.85rem;padding:8px 12px;border-radius:6px;margin-top:8px;display:none;line-height:1.5}
.ex-fb.show{display:block}
.ex-fb.correct{background:var(--correct-bg);color:var(--correct);border:1px solid var(--correct)}
.ex-fb.wrong{background:var(--wrong-bg);color:var(--wrong);border:1px solid var(--wrong)}
.score-bar{display:flex;align-items:center;gap:10px;margin-top:14px;padding-top:10px;border-top:1px solid var(--border)}
.score-bar-label{font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted)}
.score-bar-track{flex:1;height:6px;border-radius:3px;background:var(--border);overflow:hidden}
.score-bar-fill{height:100%;border-radius:3px;background:var(--correct);transition:width .4s ease}
.score-bar-val{font-family:'JetBrains Mono',monospace;font-size:.85rem;font-weight:700;color:var(--correct);min-width:36px;text-align:right}
.tier{font-size:.68rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:2px 8px;border-radius:4px;margin-right:8px}
.tier-1{background:rgba(52,211,153,.15);color:var(--algebra)}.tier-2{background:var(--math-bg);color:var(--math)}.tier-3{background:var(--adv-bg);color:var(--advanced)}

.trig-calc{background:var(--surface);border:2px solid var(--geotrig);border-radius:14px;padding:22px;margin-bottom:16px}
.trig-inputs{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:14px}
.trig-field{display:flex;flex-direction:column;gap:4px}
.trig-field label{font-size:.78rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.5px}
.trig-field input{width:90px;padding:8px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:'JetBrains Mono',monospace;text-align:center}
.trig-field input:focus{border-color:var(--geotrig);outline:none}
.trig-results{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.trig-result{background:var(--paper);border-radius:8px;padding:10px;text-align:center}
.trig-val{font-family:'JetBrains Mono',monospace;font-size:1rem;font-weight:700}
.trig-label{font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;margin-top:2px}

.trap-taxonomy{margin-bottom:24px}
.trap-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px 18px;margin-bottom:10px;display:flex;gap:14px;align-items:flex-start;transition:all .2s}
.trap-card:hover{border-color:var(--accent);transform:translateX(3px)}
.trap-number{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.78rem;color:#fff;flex-shrink:0}
.trap-card-body{flex:1}
.trap-card-name{font-weight:700;font-size:.92rem;margin-bottom:3px}
.trap-card-desc{font-size:.82rem;color:var(--muted);line-height:1.5}
.trap-card-example{font-size:.78rem;color:var(--math);font-family:'JetBrains Mono',monospace;margin-top:4px}

.confidence-row{display:flex;gap:6px;margin-bottom:10px;flex-wrap:wrap}
.conf-tag{padding:5px 12px;border-radius:6px;font-size:.75rem;font-weight:600;cursor:pointer;border:2px solid var(--border);background:var(--surface);transition:all .15s;letter-spacing:.5px}
.conf-tag:hover{border-color:var(--geotrig)}
.conf-tag.selected{border-color:var(--geotrig);background:rgba(248,113,113,.12);color:var(--geotrig)}
.conf-tag[data-conf="guessing"].selected{border-color:var(--psda);background:rgba(251,191,36,.12);color:var(--psda)}
.conf-tag[data-conf="unsure"].selected{border-color:var(--math);background:var(--math-bg);color:var(--math)}
.conf-tag[data-conf="confident"].selected{border-color:var(--geotrig);background:rgba(248,113,113,.12);color:var(--geotrig)}

.timer-bar{position:sticky;top:8px;z-index:50;background:rgba(18,18,18,.92);backdrop-filter:blur(8px);border:1px solid var(--border);border-radius:12px;padding:10px 16px;margin-bottom:20px;display:flex;align-items:center;gap:14px}
.timer-display{font-family:'JetBrains Mono',monospace;font-size:1.1rem;font-weight:700;color:var(--geotrig);min-width:60px}
.timer-display.warning{color:var(--psda)}
.timer-display.danger{color:var(--wrong);animation:pulse 1s ease infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.timer-track{flex:1;height:4px;background:var(--border);border-radius:2px;overflow:hidden}
.timer-fill{height:100%;background:var(--grad);transition:width 1s linear;border-radius:2px}
.timer-fill.warning{background:var(--psda)}
.timer-fill.danger{background:var(--wrong)}
.timer-toggle{padding:5px 12px;background:var(--surface);border:1px solid var(--border);border-radius:6px;font-size:.75rem;color:var(--muted);cursor:pointer;font-family:'Source Sans 3',sans-serif;font-weight:600}
.timer-toggle:hover{border-color:var(--accent);color:var(--ink)}
.timer-toggle.active{background:var(--accent-light);border-color:var(--accent);color:var(--accent)}
.q-dots{display:flex;gap:4px}
.q-dot{width:8px;height:8px;border-radius:50%;background:var(--border)}
.q-dot.correct{background:var(--correct)}
.q-dot.wrong{background:var(--wrong)}

.results-section{margin-top:24px;padding:20px;background:var(--surface);border:1px solid var(--border);border-radius:14px}
.results-section h3{font-family:'Cormorant Garamond',serif;font-size:1.3rem;margin-bottom:14px}
.results-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2px;margin-bottom:16px;background:var(--border);border-radius:10px;overflow:hidden}
.results-grid-header{background:var(--surface);padding:8px;text-align:center;font-size:.68rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted)}
.results-grid-cell{background:var(--paper);padding:10px 8px;text-align:center;font-size:.78rem;min-height:50px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px}
.results-grid-cell.danger-cell{background:var(--danger-bg);border:1px solid rgba(239,68,68,.3)}
.cell-label{font-size:.65rem;color:var(--muted);font-weight:600}
.cell-dots{display:flex;gap:3px;flex-wrap:wrap;justify-content:center}
.cell-dot{width:8px;height:8px;border-radius:50%}
.difficulty-bars{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}
.diff-row{display:flex;align-items:center;gap:10px}
.diff-label{font-size:.78rem;font-weight:600;min-width:60px}
.diff-track{flex:1;height:8px;background:var(--border);border-radius:4px;overflow:hidden}
.diff-fill{height:100%;border-radius:4px;transition:width .5s ease}
.diff-val{font-family:'JetBrains Mono',monospace;font-size:.78rem;font-weight:700;min-width:40px;text-align:right}
.error-category{padding:12px 16px;border-radius:10px;margin-bottom:8px;font-size:.85rem;line-height:1.6}
.error-category .error-label{font-weight:700;margin-bottom:4px}
.error-category .error-items{color:var(--muted);font-size:.82rem}

.complete-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:40px 20px;text-align:center}
.complete-icon{font-size:4rem;margin-bottom:16px;animation:celebrateBounce .6s ease}
@keyframes celebrateBounce{0%{transform:scale(0)}50%{transform:scale(1.2)}100%{transform:scale(1)}}
.complete-screen h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.4rem);margin-bottom:8px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.complete-sub{color:var(--muted);font-size:1rem;margin-bottom:28px}
.takeaway-list{text-align:left;max-width:500px;width:100%;margin-bottom:32px}
.takeaway-item{display:flex;gap:10px;align-items:flex-start;padding:8px 0;font-size:.88rem;color:#ccc}
.takeaway-check{color:var(--correct);flex-shrink:0;font-weight:700}
.nav-cards{display:grid;grid-template-columns:1fr 1fr;gap:12px;max-width:500px;width:100%}
.nav-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px;text-align:center;cursor:pointer;transition:all .2s;text-decoration:none;color:var(--ink)}
.nav-card:hover{border-color:var(--geotrig);transform:translateY(-2px)}
.nav-card-label{font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
.nav-card-title{font-weight:700;font-size:.95rem}

.formula-box{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:14px;margin-bottom:12px;font-family:'JetBrains Mono',monospace;font-size:.88rem;line-height:1.8}
.fn{color:var(--geotrig);font-weight:700}

@media(max-width:600px){.mod-meta{flex-wrap:wrap;gap:10px}.fm-grid{grid-template-columns:1fr 1fr}.tri-grid{grid-template-columns:1fr}.classify-opts{gap:4px}.trig-results{grid-template-columns:repeat(2,1fr)}.trig-inputs{flex-direction:column}.preview-grid{grid-template-columns:1fr 1fr}.welcome-meta{flex-wrap:wrap;gap:12px}.results-grid{grid-template-columns:1fr;gap:1px}.nav-cards{grid-template-columns:1fr}.timer-bar{flex-wrap:wrap;gap:8px}}
</style>
</head>
<body>
<div class="top-stripe"></div>
<div class="screen-progress" id="screenProgress"></div>

<!-- SCREEN 1: WELCOME -->
<div class="screen active fade-in" id="screen-welcome">
  <div class="welcome-screen">
    <div class="welcome-badge">Module 6</div>
    <h1>Geometry & Trigonometry</h1>
    <p class="welcome-sub">Fewer questions (~15%), but highly formulaic ‚Äî memorize the key facts and these become free points.</p>
    <div class="welcome-meta"><span>‚è± 2-3 sessions</span><span>üìã 4 topics</span><span>üî® 6 exercises</span><span>üéØ 10 practice Qs</span></div>
    <div class="preview-grid">
      <div class="preview-card"><div class="preview-icon">üîÑ</div><div class="preview-title">Retrieval Warm-Up</div><div class="preview-desc">5 questions from Module 5 to activate prior knowledge</div></div>
      <div class="preview-card"><div class="preview-icon">üìê</div><div class="preview-title">4 Core Topics</div><div class="preview-desc">Angles & triangles, circles, area & volume, trigonometry</div></div>
      <div class="preview-card"><div class="preview-icon">üéØ</div><div class="preview-title">Trap Taxonomy</div><div class="preview-desc">4 named traps that recur in geometry problems</div></div>
      <div class="preview-card"><div class="preview-icon">üßÆ</div><div class="preview-title">6 Exercises</div><div class="preview-desc">Angle solver, circles, formula picker, triangles, trig calc, composites</div></div>
      <div class="preview-card"><div class="preview-icon">‚è±</div><div class="preview-title">Timed Practice</div><div class="preview-desc">10 SAT-style questions with optional timer</div></div>
      <div class="preview-card"><div class="preview-icon">üìà</div><div class="preview-title">Error Analysis</div><div class="preview-desc">Difficulty breakdown + confidence matrix + trap patterns</div></div>
    </div>
    <button class="start-btn" onclick="goScreen(1)">Start Learning ‚Üí</button>
  </div>
</div>

<!-- SCREEN 2: RETRIEVAL WARM-UP -->
<div class="screen" id="screen-warmup">
  <div class="warmup-container">
    <div class="warmup-header">
      <div class="warmup-badge">Retrieval Warm-Up</div>
      <h2 style="font-family:'Cormorant Garamond',serif;font-size:1.6rem">Module 5 Review</h2>
      <p style="color:var(--muted);font-size:.9rem;margin-top:4px">Quick recall from what you learned last time.</p>
      <div class="warmup-dots" id="warmupDots"></div>
    </div>
    <div id="warmupContent"></div>
  </div>
</div>

<!-- SCREEN 3: LESSON CONTENT -->
<div class="screen" id="screen-lesson">
<div class="container">
<a class="back-link" href="index.html">‚Üê Back to SAT Math Course</a>
<div class="mod-header">
  <div class="mod-badge">Module 6</div>
  <h1>Geometry & Trigonometry</h1>
  <p class="subtitle">Fewer questions (~15%), but highly formulaic ‚Äî memorize the key facts and these become free points.</p>
  <div class="mod-meta"><span>‚è± 2-3 sessions</span><span>üìã 4 topics</span><span>üî® Phase 2: Build</span></div>
</div>

<div class="callout-red callout"><strong>The good news:</strong> Geometry & Trig questions are the most formula-dependent on the SAT. If you memorize the formulas and recognize the patterns, these questions become nearly free points.</div>

<!-- TOPIC 6A -->
<div class="section">
  <div class="section-label">Topic 6A</div>
  <h2>Lines, Angles & Triangles</h2>

  <div class="topic open" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Angle Relationships</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <ul>
        <li><strong>Vertical angles</strong> are equal (formed by intersecting lines, across from each other)</li>
        <li><strong>Supplementary angles</strong> add to 180¬∞ (on a straight line)</li>
        <li><strong>Complementary angles</strong> add to 90¬∞ (form a right angle)</li>
      </ul>
      <h4>Parallel Lines + Transversal</h4>
      <ul>
        <li><strong>Corresponding angles:</strong> EQUAL (same position at each intersection)</li>
        <li><strong>Alternate interior angles:</strong> EQUAL (opposite sides, between the parallels)</li>
        <li><strong>Co-interior (same-side interior):</strong> SUPPLEMENTARY (add to 180¬∞)</li>
      </ul>
    </div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Triangle Facts</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <ul>
        <li><strong>Angle sum:</strong> Interior angles always add to 180¬∞</li>
        <li><strong>Exterior angle theorem:</strong> Exterior angle = sum of two remote interior angles</li>
        <li><strong>Similar triangles:</strong> Same shape, proportional sides. Set up a proportion to find missing sides.</li>
        <li><strong>Triangle inequality:</strong> Any side &lt; sum of the other two sides</li>
      </ul>
    </div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Special Right Triangles & Pythagorean Theorem</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p><strong>Pythagorean Theorem:</strong> a¬≤ + b¬≤ = c¬≤ (c = hypotenuse, always the longest side, opposite the right angle)</p>
      <p>These special triangles appear on nearly every SAT. Memorize the ratios cold.</p>
    </div>
  </div>

  <div class="tri-grid">
    <div class="tri-card">
      <div class="tri-name">30-60-90</div>
      <div class="tri-ratio">1 : ‚àö3 : 2</div>
      <div class="tri-sides">Short leg : Long leg : Hypotenuse<br>Opp 30¬∞ : Opp 60¬∞ : Opp 90¬∞</div>
    </div>
    <div class="tri-card">
      <div class="tri-name">45-45-90</div>
      <div class="tri-ratio">1 : 1 : ‚àö2</div>
      <div class="tri-sides">Leg : Leg : Hypotenuse<br>Two legs are always equal</div>
    </div>
  </div>

  <p style="font-weight:700;font-size:.9rem;margin-bottom:6px">Common Pythagorean Triples (memorize these!):</p>
  <div class="triples-row">
    <div class="triple">3 ‚Äì 4 ‚Äì 5</div>
    <div class="triple">5 ‚Äì 12 ‚Äì 13</div>
    <div class="triple">8 ‚Äì 15 ‚Äì 17</div>
    <div class="triple">7 ‚Äì 24 ‚Äì 25</div>
    <div class="triple">6 ‚Äì 8 ‚Äì 10</div>
    <div class="triple">9 ‚Äì 12 ‚Äì 15</div>
  </div>
  <p style="font-size:.85rem;color:var(--muted)">Last two are multiples of 3-4-5. Any multiple of a triple is also a triple!</p>
</div>

<!-- EXERCISE 1: ANGLE SOLVER -->
<div class="section">
  <div class="section-label">Interactive Exercise 1</div>
  <h2>Angle & Triangle Solver</h2>
  <p>Find the missing angle or side in each scenario.</p>
  <div class="exercise" id="angleEx"></div>
</div>

<!-- TOPIC 6B: CIRCLES -->
<div class="section">
  <div class="section-label">Topic 6B</div>
  <h2>Circles</h2>

  <div class="fm-grid">
    <div class="fm-card"><div class="fm-name">Standard Form</div><div class="fm-eq">(x‚àíh)¬≤+(y‚àík)¬≤=r¬≤</div></div>
    <div class="fm-card"><div class="fm-name">Center</div><div class="fm-eq">(h, k)</div></div>
    <div class="fm-card"><div class="fm-name">Area</div><div class="fm-eq">A = œÄr¬≤</div></div>
    <div class="fm-card"><div class="fm-name">Circumference</div><div class="fm-eq">C = 2œÄr</div></div>
    <div class="fm-card"><div class="fm-name">Arc Length</div><div class="fm-eq">(Œ∏/360) √ó 2œÄr</div></div>
    <div class="fm-card"><div class="fm-name">Sector Area</div><div class="fm-eq">(Œ∏/360) √ó œÄr¬≤</div></div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Converting General Form to Standard Form</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p>Sometimes the SAT gives a circle in expanded/general form: x¬≤ + y¬≤ + Dx + Ey + F = 0</p>
      <p><strong>Strategy:</strong> Complete the square for both x and y.</p>
      <p><strong>Example:</strong> x¬≤ + y¬≤ ‚àí 6x + 4y ‚àí 12 = 0</p>
      <p>Group: (x¬≤ ‚àí 6x) + (y¬≤ + 4y) = 12</p>
      <p>Complete: (x¬≤ ‚àí 6x + 9) + (y¬≤ + 4y + 4) = 12 + 9 + 4</p>
      <p>Result: (x ‚àí 3)¬≤ + (y + 2)¬≤ = 25 ‚Üí Center (3, ‚àí2), Radius 5</p>
    </div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Tangent Lines & Inscribed Angles</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <ul>
        <li><strong>Tangent line:</strong> Touches circle at one point. Perpendicular to radius (90¬∞).</li>
        <li><strong>Central angle:</strong> Vertex at center. Equal to intercepted arc.</li>
        <li><strong>Inscribed angle:</strong> Vertex on circle. Equals HALF the intercepted arc.</li>
      </ul>
    </div>
  </div>

  <div class="callout-blue callout"><strong>Desmos:</strong> Type <code>(x‚àí2)¬≤+(y+3)¬≤=25</code> directly to graph any circle. Find intersections with lines by graphing both.</div>
</div>

<!-- EXERCISE 2: CIRCLE EQUATIONS -->
<div class="section">
  <div class="section-label">Interactive Exercise 2</div>
  <h2>Circle Equation Workshop</h2>
  <p>Find centers, radii, arc lengths, and sector areas.</p>
  <div class="exercise" id="circleEx"></div>
</div>

<!-- TOPIC 6C: AREA & VOLUME -->
<div class="section">
  <div class="section-label">Topic 6C</div>
  <h2>Area, Perimeter & Volume</h2>
  <p>These formulas are on the reference sheet, but memorizing them saves valuable time.</p>

  <div class="fm-grid">
    <div class="fm-card"><div class="fm-name">Rectangle</div><div class="fm-eq">A = lw</div></div>
    <div class="fm-card"><div class="fm-name">Triangle</div><div class="fm-eq">A = ¬Ωbh</div></div>
    <div class="fm-card"><div class="fm-name">Trapezoid</div><div class="fm-eq">A = ¬Ω(b‚ÇÅ+b‚ÇÇ)h</div></div>
    <div class="fm-card"><div class="fm-name">Cylinder</div><div class="fm-eq">V = œÄr¬≤h</div></div>
    <div class="fm-card"><div class="fm-name">Cone</div><div class="fm-eq">V = ‚ÖìœÄr¬≤h</div></div>
    <div class="fm-card"><div class="fm-name">Sphere</div><div class="fm-eq">V = ‚Å¥‚ÅÑ‚ÇÉœÄr¬≥</div></div>
    <div class="fm-card"><div class="fm-name">Pyramid</div><div class="fm-eq">V = ‚ÖìBh</div></div>
    <div class="fm-card"><div class="fm-name">Rect. Prism</div><div class="fm-eq">V = lwh</div></div>
  </div>

  <div class="callout"><strong>Pattern:</strong> Cones and pyramids are always ‚Öì of the corresponding "full" shape. Cone = ‚Öì √ó cylinder. Pyramid = ‚Öì √ó prism.</div>
</div>

<!-- EXERCISE 3: FORMULA PICKER -->
<div class="section">
  <div class="section-label">Interactive Exercise 3</div>
  <h2>Which Formula Do I Need?</h2>
  <p>On the real SAT, nobody tells you which formula to use. Given each problem description, pick the correct formula. This skill separates high scorers from mid-range.</p>
  <div class="exercise" style="border-color:var(--psda)" id="formulaEx"></div>
</div>

<!-- TOPIC 6D: COORDINATE GEOMETRY -->
<div class="section">
  <div class="section-label">Topic 6D</div>
  <h2>Coordinate Geometry & Trigonometry</h2>

  <div class="topic" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
    <div class="topic-header">
      <div class="topic-badge" style="background:var(--geotrig)">6D</div>
      <div class="topic-info"><div class="topic-title">Distance & Midpoint Formulas</div><div class="topic-sub">Finding lengths and midpoints on the coordinate plane</div></div>
      <div class="topic-arrow">‚ñ∏</div>
    </div>
    <div class="topic-body">
      <div class="formula-box">
        <div><span class="fn">Distance:</span> d = ‚àö[(x‚ÇÇ‚àíx‚ÇÅ)¬≤ + (y‚ÇÇ‚àíy‚ÇÅ)¬≤]</div>
        <div style="color:var(--muted);font-size:.82rem;margin-bottom:4px">This IS the Pythagorean theorem on the coordinate plane!</div>
        <div><span class="fn">Midpoint:</span> M = ((x‚ÇÅ+x‚ÇÇ)/2, (y‚ÇÅ+y‚ÇÇ)/2)</div>
        <div style="color:var(--muted);font-size:.82rem">Average the x's and average the y's</div>
      </div>
      <p><strong>Example:</strong> Distance from (1, 2) to (4, 6) = ‚àö[(4‚àí1)¬≤ + (6‚àí2)¬≤] = ‚àö[9 + 16] = ‚àö25 = 5. That's a 3-4-5 right triangle!</p>
      <div class="callout"><strong>Don't memorize the distance formula separately.</strong> Just draw a right triangle on the coordinate plane. The horizontal and vertical distances are the legs. Use a¬≤ + b¬≤ = c¬≤.</div>
      <h4>Key SAT Patterns</h4>
      <ul>
        <li><strong>Distance between two points:</strong> Draw the right triangle. Recognize Pythagorean triples (3-4-5, 5-12-13, 8-15-17).</li>
        <li><strong>Midpoint of a segment:</strong> Average x-coordinates and y-coordinates separately.</li>
        <li><strong>Perimeter of a polygon on a grid:</strong> Find each side length with the distance formula, then sum.</li>
        <li><strong>Endpoint given midpoint:</strong> If M is the midpoint of AB, and you know A and M, then B = (2Mx ‚àí Ax, 2My ‚àí Ay).</li>
        <li><strong>Desmos shortcut:</strong> Plot both points. The distance tool or a simple right-triangle sketch gives the answer fast.</li>
      </ul>
    </div>
  </div>

  <div class="tri-grid">
    <div class="tri-card" style="border-color:var(--adv)">
      <div class="tri-name" style="color:var(--adv)">SOH-CAH-TOA</div>
      <div class="tri-ratio" style="font-size:.95rem"><strong>S</strong>in = <strong>O</strong>pp / <strong>H</strong>yp<br><strong>C</strong>os = <strong>A</strong>dj / <strong>H</strong>yp<br><strong>T</strong>an = <strong>O</strong>pp / <strong>A</strong>dj</div>
    </div>
    <div class="tri-card" style="border-color:var(--psda)">
      <div class="tri-name" style="color:var(--psda)">Key Relationships</div>
      <div style="font-size:.88rem;color:#ccc;line-height:1.7;text-align:left">
        sin(x) = cos(90¬∞ ‚àí x)<br>
        tan(x) = sin(x) / cos(x)<br>
        sin¬≤(x) + cos¬≤(x) = 1<br>
        180¬∞ = œÄ radians
      </div>
    </div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Radians ‚Üî Degrees</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p><strong>Degrees ‚Üí Radians:</strong> multiply by œÄ/180</p>
      <p><strong>Radians ‚Üí Degrees:</strong> multiply by 180/œÄ</p>
      <p><strong>Common conversions:</strong> 30¬∞ = œÄ/6 ¬∑ 45¬∞ = œÄ/4 ¬∑ 60¬∞ = œÄ/3 ¬∑ 90¬∞ = œÄ/2 ¬∑ 180¬∞ = œÄ ¬∑ 360¬∞ = 2œÄ</p>
      <div class="callout-blue callout"><strong>Desmos:</strong> Defaults to radians. Click the wrench icon ‚öô to switch to degrees if needed.</div>
    </div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Complementary Angle Relationship</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p><strong>sin(x) = cos(90¬∞ ‚àí x)</strong> and <strong>cos(x) = sin(90¬∞ ‚àí x)</strong></p>
      <p>In a right triangle, the two acute angles add to 90¬∞. The side opposite one angle is adjacent to the other.</p>
      <p><strong>SAT question type:</strong> "If sin(x) = cos(32¬∞), what is x?" ‚Üí x = 90¬∞ ‚àí 32¬∞ = 58¬∞.</p>
    </div>
  </div>
</div>

<!-- EXERCISE 4: SPECIAL TRIANGLES DRILL -->
<div class="section">
  <div class="section-label">Interactive Exercise 4</div>
  <h2>Special Right Triangles Drill</h2>
  <p>Find the missing side. These patterns appear on almost every SAT.</p>
  <div class="exercise" id="triEx"></div>
</div>

<!-- TRIG CALCULATOR -->
<div class="section">
  <div class="section-label">Interactive Tool</div>
  <h2>Right Triangle Trig Calculator</h2>
  <p>Enter any two sides to see all trig ratios and the missing side.</p>
  <div class="trig-calc">
    <div class="trig-inputs">
      <div class="trig-field"><label>Opposite</label><input type="number" id="trigOpp" placeholder="?" oninput="calcTrig()"></div>
      <div class="trig-field"><label>Adjacent</label><input type="number" id="trigAdj" placeholder="?" oninput="calcTrig()"></div>
      <div class="trig-field"><label>Hypotenuse</label><input type="number" id="trigHyp" placeholder="?" oninput="calcTrig()"></div>
    </div>
    <div class="trig-results" id="trigResults"></div>
    <div id="trigNote" style="font-size:.82rem;color:var(--muted);margin-top:8px"></div>
  </div>
</div>

<!-- EXERCISE 5: COMPOSITE SHAPES -->
<div class="section">
  <div class="section-label">Interactive Exercise 5</div>
  <h2>Composite Shape Calculator</h2>
  <p>Find the shaded or remaining area in each problem. These multi-step geometry problems appear regularly on the SAT. Leave answers in terms of œÄ where appropriate.</p>
  <div class="exercise" style="border-color:var(--geotrig)" id="cmpEx"></div>
</div>

<!-- TRAP TAXONOMY -->
<div class="section">
  <div class="section-label">Math Trap Taxonomy</div>
  <h2>Four Traps That Recur in Geometry & Trig</h2>
  <p>Learn these by name. When you spot one in a problem, you'll know exactly what to watch for.</p>
  <div class="trap-taxonomy">
    <div class="trap-card"><div class="trap-number" style="background:var(--wrong)">1</div><div class="trap-card-body"><div class="trap-card-name">üéØ The Wrong Target</div><div class="trap-card-desc">Solved for the wrong measurement ‚Äî found diameter when they asked for radius, found area when they asked for circumference.</div><div class="trap-card-example">Diameter = 10, Area = œÄ(5¬≤) = 25œÄ (not œÄ(10¬≤) = 100œÄ)</div></div></div>
    <div class="trap-card"><div class="trap-number" style="background:var(--geotrig)">2</div><div class="trap-card-body"><div class="trap-card-name">üìê The Phantom Height</div><div class="trap-card-desc">Used the slant height instead of the actual height in a volume or area formula. The height must be perpendicular to the base.</div><div class="trap-card-example">Cone: V = ‚ÖìœÄr¬≤h uses vertical height, NOT slant height</div></div></div>
    <div class="trap-card"><div class="trap-number" style="background:var(--psda)">3</div><div class="trap-card-body"><div class="trap-card-name">üîÑ The Sign Flip</div><div class="trap-card-desc">In circle equations, (x+3)¬≤ means h = ‚àí3, not h = 3. The sign inside the parentheses is opposite to the center coordinate.</div><div class="trap-card-example">(x+1)¬≤+(y‚àí4)¬≤=9 ‚Üí Center (‚àí1, 4), NOT (1, ‚àí4)</div></div></div>
    <div class="trap-card"><div class="trap-number" style="background:var(--math)">4</div><div class="trap-card-body"><div class="trap-card-name">üìè The Unit Mismatch</div><div class="trap-card-desc">Mixed up degrees and radians, or used inches for one dimension and feet for another.</div><div class="trap-card-example">sin(30) in Desmos = sin(30 radians) ‚â† sin(30¬∞). Switch to degree mode!</div></div></div>
  </div>
</div>

<div style="text-align:center;padding:24px 0">
  <button class="start-btn" onclick="goScreen(3)">Continue to Practice Questions ‚Üí</button>
</div>
</div>
</div>

<!-- SCREEN 4: TIMED PRACTICE -->
<div class="screen" id="screen-practice">
<div class="container">
  <div class="section-label">SAT Practice</div>
  <h2 style="font-family:'Cormorant Garamond',serif;font-size:1.6rem;margin-bottom:4px">Practice Questions</h2>
  <p style="color:var(--muted);font-size:.9rem;margin-bottom:16px">10 questions at three difficulty tiers. Tag your confidence before answering. 95 seconds per question.</p>
  <div class="timer-bar" id="timerBar">
    <div class="timer-display" id="timerDisplay">--:--</div>
    <div class="timer-track"><div class="timer-fill" id="timerFill"></div></div>
    <div class="q-dots" id="qDots"></div>
    <button class="timer-toggle" id="timerToggle" onclick="toggleTimer()">‚è± Timer OFF</button>
  </div>
  <div id="satPractice"></div>
  <div id="practiceResults" style="display:none"></div>
  <div id="practiceNav" style="display:none;text-align:center;padding:24px 0">
    <button class="start-btn" onclick="goScreen(4)">View Summary & Complete Module ‚Üí</button>
  </div>
</div>
</div>

<!-- SCREEN 5: MODULE COMPLETE -->
<div class="screen" id="screen-complete">
  <div class="complete-screen">
    <div class="complete-icon">üéâ</div>
    <h1>Module 6 Complete!</h1>
    <p class="complete-sub">You've conquered Geometry & Trigonometry ‚Äî the most formulaic domain on the SAT.</p>
    <div class="takeaway-list">
      <div style="font-weight:700;margin-bottom:12px;font-size:.85rem;color:var(--geotrig);text-transform:uppercase;letter-spacing:1px">Key Takeaways</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> Triangle angles sum to 180¬∞. Supplementary = 180¬∞. Complementary = 90¬∞.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> Memorize <strong>30-60-90 (1:‚àö3:2)</strong> and <strong>45-45-90 (1:1:‚àö2)</strong> ratios cold.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> Common Pythagorean triples: 3-4-5, 5-12-13, 8-15-17 and their multiples.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> <strong>Choose the right formula</strong> ‚Äî on the real SAT, nobody tells you which to use.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> Circle standard form: (x‚àíh)¬≤+(y‚àík)¬≤=r¬≤. Center = (h,k), Radius = r. Complete the square if needed.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> Arc and sector formulas: multiply by Œ∏/360 (the fraction of the full circle).</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> <strong>SOH-CAH-TOA.</strong> sin(x) = cos(90¬∞‚àíx). 180¬∞ = œÄ radians.</div>
      <div class="takeaway-item"><span class="takeaway-check">‚úì</span> Cones and pyramids = ‚Öì of the corresponding full shape. Composite shapes: add or subtract.</div>
    </div>
    <div id="completePracticeStats"></div>
    <div class="nav-cards">
      <a class="nav-card" href="module-5.html"><div class="nav-card-label">‚Üê Previous</div><div class="nav-card-title">Module 5: Data Analysis</div></a>
      <a class="nav-card" href="module-7.html" style="border-color:var(--geotrig)"><div class="nav-card-label">Next ‚Üí</div><div class="nav-card-title">Module 7: Desmos Mastery</div></a>
    </div>
  </div>
</div>

<script>
// SCREEN NAVIGATION
const SCREENS=['screen-welcome','screen-warmup','screen-lesson','screen-practice','screen-complete'];
let currentScreen=0;
function goScreen(idx){
  if(idx<0||idx>=SCREENS.length)return;
  const cur=document.getElementById(SCREENS[currentScreen]),nxt=document.getElementById(SCREENS[idx]);
  cur.classList.remove('fade-in');cur.classList.add('fade-out');
  setTimeout(()=>{cur.classList.remove('active','fade-out');nxt.classList.add('active','fade-in');currentScreen=idx;updateProgressDots();window.scrollTo(0,0);if(idx===3&&timerEnabled)startTimer();},300);
}
function updateProgressDots(){
  document.getElementById('screenProgress').innerHTML=SCREENS.map((s,i)=>{let cls='screen-dot';if(i<currentScreen)cls+=' completed';if(i===currentScreen)cls+=' current';return `<div class="${cls}" onclick="${i<=currentScreen?'goScreen('+i+')':''}" title="${['Welcome','Warm-Up','Lesson','Practice','Complete'][i]}"></div>`;}).join('');
}
updateProgressDots();

// WARM-UP (Module 5 ‚Äî PSDA content)
const WARMUP_QS=[
  {source:'Module 5 ‚Äî Percent Change',q:'A price goes from $80 to $100. What is the percent increase?',
   ch:['20%','25%','80%','125%'],c:1,
   fb:'Percent change = (new ‚àí old)/old √ó 100 = (100 ‚àí 80)/80 √ó 100 = 25%. Always divide by the OLD value.'},
  {source:'Module 5 ‚Äî Statistics',q:'A data set {2, 5, 5, 8, 80} ‚Äî which measure of center is more resistant to the outlier: mean or median?',
   ch:['Mean','Median','Both equally','Neither'],c:1,
   fb:'The median is resistant to extreme values. The mean is pulled toward outliers.'},
  {source:'Module 5 ‚Äî Scatterplots',q:'A scatterplot has a line of best fit with slope 2.5. Each additional unit of x predicts what change in y?',
   ch:['Decrease of 2.5','Increase of 2.5','No change','Increase of 5'],c:1,
   fb:'The slope represents the rate of change ‚Äî each additional unit of x predicts a 2.5-unit increase in y.'},
  {source:'Module 5 ‚Äî Conditional Probability',q:'P(A|B) means the probability of A given that ___?',
   ch:['A has occurred','A or B has occurred','B has occurred','Neither has occurred'],c:2,
   fb:'P(A|B) = "given B, what is the probability of A?" The condition (B) goes after the vertical bar.'},
  {source:'Module 5 ‚Äî Study Design',q:'A study uses random assignment to treatment groups. This allows what type of conclusion?',
   ch:['Correlation only','Causal (cause and effect)','Generalization to all populations','No valid conclusion'],c:1,
   fb:'Random assignment to groups allows causal conclusions (this is an experiment). Generalizability depends on random sampling.'}
];
let warmupIdx=0,warmupAnswers=[],warmupAnswered=false;
function renderWarmup(){
  document.getElementById('warmupDots').innerHTML=WARMUP_QS.map((_,i)=>{let cls='warmup-dot';if(i<warmupIdx)cls+=warmupAnswers[i]?' done-correct':' done-wrong';if(i===warmupIdx&&warmupIdx<WARMUP_QS.length)cls+=' active';return `<div class="${cls}"></div>`;}).join('');
  const cont=document.getElementById('warmupContent');
  if(warmupIdx>=WARMUP_QS.length){const cor=warmupAnswers.filter(Boolean).length;cont.innerHTML=`<div class="warmup-summary"><div class="warmup-badge">Warm-Up Complete</div><div class="warmup-score">${cor} / ${WARMUP_QS.length}</div><p style="color:var(--muted);font-size:.9rem;margin-bottom:8px">${cor===5?'Perfect recall! Module 5 knowledge is locked in.':cor>=3?'Good recall! A couple topics to revisit.':'Some gaps from Module 5 ‚Äî consider a quick review.'}</p><button class="warmup-continue" onclick="goScreen(2)">Continue to Lesson ‚Üí</button></div>`;return;}
  const q=WARMUP_QS[warmupIdx];warmupAnswered=false;
  cont.innerHTML=`<div class="warmup-q"><div class="source-tag">From ${q.source}</div><div class="q-text">${q.q}</div><div class="warmup-choices" id="warmupChoices">${q.ch.map((ch,ci)=>`<div class="warmup-choice" onclick="answerWarmup(${ci})">${ch}</div>`).join('')}</div><div id="warmupFb" style="display:none"></div></div>`;
}
function answerWarmup(ci){
  if(warmupAnswered)return;warmupAnswered=true;
  const q=WARMUP_QS[warmupIdx],correct=ci===q.c;warmupAnswers.push(correct);
  document.querySelectorAll('.warmup-choice').forEach((ch,i)=>{ch.classList.add('wu-dis');if(i===q.c)ch.classList.add('wu-correct');else if(i===ci&&!correct)ch.classList.add('wu-wrong');});
  const fb=document.getElementById('warmupFb');fb.style.display='block';
  fb.innerHTML=`<div class="warmup-fb">${correct?'‚úì ':'‚úó '}${q.fb}</div><button class="warmup-next" onclick="warmupIdx++;renderWarmup()">${warmupIdx<WARMUP_QS.length-1?'Next Question ‚Üí':'See Results ‚Üí'}</button>`;
  document.getElementById('warmupDots').innerHTML=WARMUP_QS.map((_,i)=>{let cls='warmup-dot';if(i<warmupAnswers.length)cls+=warmupAnswers[i]?' done-correct':' done-wrong';else if(i===warmupIdx+1)cls+=' active';return `<div class="${cls}"></div>`;}).join('');
}
renderWarmup();

// HELPERS
function mkScore(id,correct,total){return `<div class="score-bar"><div class="score-bar-label">Score</div><div class="score-bar-track"><div class="score-bar-fill" style="width:${total?correct/total*100:0}%"></div></div><div class="score-bar-val">${correct}/${total}</div></div>`;}

// EXERCISE 1: ANGLE SOLVER
const ANGLE_QS=[
  {prompt:'Two angles are supplementary. One is 65¬∞. What is the other?',correct:0,opts:['115¬∞','25¬∞','65¬∞','180¬∞'],fb:'Supplementary = 180¬∞. 180 ‚àí 65 = 115¬∞.'},
  {prompt:'In a triangle, two angles are 45¬∞ and 70¬∞. What is the third?',correct:0,opts:['65¬∞','45¬∞','75¬∞','115¬∞'],fb:'Triangle sum = 180¬∞. 180 ‚àí 45 ‚àí 70 = 65¬∞.'},
  {prompt:'Parallel lines cut by a transversal. One angle is 130¬∞. What is the alternate interior angle?',correct:1,opts:['50¬∞','130¬∞','180¬∞','90¬∞'],fb:'Alternate interior angles are EQUAL. Both are 130¬∞.'},
  {prompt:'An exterior angle of a triangle is 120¬∞. The two remote interior angles are equal. What does each measure?',correct:2,opts:['30¬∞','40¬∞','60¬∞','120¬∞'],fb:'Exterior angle = sum of remote interiors. 120 = 2x ‚Üí x = 60¬∞.'},
  {prompt:'Vertical angles: one is (3x + 10)¬∞ and the other is (5x ‚àí 20)¬∞. Find x.',correct:1,opts:['10','15','20','30'],fb:'Vertical angles equal: 3x + 10 = 5x ‚àí 20 ‚Üí 30 = 2x ‚Üí x = 15.'},
  {prompt:'30-60-90: side opposite 30¬∞ = 5. Hypotenuse = ?',correct:2,opts:['5‚àö2','5‚àö3','10','15'],fb:'Ratio 1:‚àö3:2. Short leg = 5, hyp = 5 √ó 2 = 10.'},
  {prompt:'45-45-90: each leg = 7. Hypotenuse = ?',correct:2,opts:['7','14','7‚àö2','7‚àö3'],fb:'Ratio 1:1:‚àö2. Hyp = 7‚àö2.'},
  {prompt:'Right triangle: legs 6 and 8. Hypotenuse = ?',correct:0,opts:['10','12','14','‚àö100'],fb:'6-8-10 is 3-4-5 √ó 2. Or: ‚àö(36+64) = ‚àö100 = 10.'},
];
let angleAns={};
function renderAngles(){
  const total=ANGLE_QS.length;const correct=Object.entries(angleAns).filter(([i,v])=>v===ANGLE_QS[i].correct).length;
  document.getElementById('angleEx').innerHTML=`<h3>üìê Find the Missing Angle/Side</h3><div class="exercise-sub">Apply angle relationships and triangle rules.</div>`+
    ANGLE_QS.map((q,i)=>{
      const a=angleAns[i];const has=a!==undefined;
      return `<div class="ex-item">
        <div class="ex-prompt">${q.prompt}</div>
        <div class="classify-opts">${q.opts.map((o,oi)=>{
          let cls='classify-opt';
          if(has){cls+=' cl-dis';if(oi===q.correct)cls+=' cl-correct';else if(oi===a&&oi!==q.correct)cls+=' cl-wrong';}
          return `<div class="${cls}" onclick="ansAngle(${i},${oi})">${o}</div>`;
        }).join('')}</div>
        <div class="ex-fb${has?' show':''}${has?(a===q.correct?' correct':' wrong'):''}">${has?(a===q.correct?'‚úì ':'‚úó ')+q.fb:''}</div>
      </div>`;
    }).join('')+mkScore('a',correct,total);
}
function ansAngle(i,v){if(angleAns[i]!==undefined)return;angleAns[i]=v;renderAngles();}
renderAngles();

// EXERCISE 2: CIRCLE EQUATIONS
const CIRCLE_QS=[
  {prompt:'<code>(x ‚àí 3)¬≤ + (y + 2)¬≤ = 49</code>. Center?',correct:0,opts:['(3, ‚àí2)','(‚àí3, 2)','(3, 2)','(‚àí3, ‚àí2)'],fb:'h=3, k=‚àí2 (the +2 means k=‚àí2). Center: (3, ‚àí2).'},
  {prompt:'<code>(x ‚àí 3)¬≤ + (y + 2)¬≤ = 49</code>. Radius?',correct:1,opts:['49','7','14','3.5'],fb:'r¬≤ = 49, so r = 7. Trap: equation gives r¬≤, not r!'},
  {prompt:'Center (0, 5), radius 3. Equation?',correct:0,opts:['x¬≤ + (y‚àí5)¬≤ = 9','x¬≤ + (y+5)¬≤ = 9','x¬≤ + (y‚àí5)¬≤ = 3','(x‚àí5)¬≤ + y¬≤ = 9'],fb:'h=0, k=5, r¬≤=9. Answer: x¬≤ + (y‚àí5)¬≤ = 9.'},
  {prompt:'Radius 10, central angle 90¬∞. Arc length?',correct:0,opts:['5œÄ','10œÄ','20œÄ','25œÄ'],fb:'Arc = (90/360) √ó 2œÄ(10) = ¬º √ó 20œÄ = 5œÄ.'},
  {prompt:'Radius 6. Area of a 60¬∞ sector?',correct:0,opts:['6œÄ','12œÄ','36œÄ','2œÄ'],fb:'Sector = (60/360) √ó œÄ(6¬≤) = ‚Öô √ó 36œÄ = 6œÄ.'},
  {prompt:'<code>x¬≤ + y¬≤ ‚àí 10x + 6y + 18 = 0</code>. Radius?',correct:0,opts:['4','16','‚àö18','6'],fb:'Complete the square: (x‚àí5)¬≤+(y+3)¬≤=25+9‚àí18=16. Radius = ‚àö16 = 4.'},
];
let circleAns={};
function renderCircles(){
  const total=CIRCLE_QS.length;const correct=Object.entries(circleAns).filter(([i,v])=>v===CIRCLE_QS[i].correct).length;
  document.getElementById('circleEx').innerHTML=`<h3>‚≠ï Circle Equations</h3><div class="exercise-sub">Identify centers, radii, arcs, and sectors.</div>`+
    CIRCLE_QS.map((q,i)=>{
      const a=circleAns[i];const has=a!==undefined;
      return `<div class="ex-item">
        <div class="ex-prompt">${q.prompt}</div>
        <div class="classify-opts">${q.opts.map((o,oi)=>{
          let cls='classify-opt';
          if(has){cls+=' cl-dis';if(oi===q.correct)cls+=' cl-correct';else if(oi===a&&oi!==q.correct)cls+=' cl-wrong';}
          return `<div class="${cls}" onclick="ansCircle(${i},${oi})">${o}</div>`;
        }).join('')}</div>
        <div class="ex-fb${has?' show':''}${has?(a===q.correct?' correct':' wrong'):''}">${has?(a===q.correct?'‚úì ':'‚úó ')+q.fb:''}</div>
      </div>`;
    }).join('')+mkScore('c',correct,total);
}
function ansCircle(i,v){if(circleAns[i]!==undefined)return;circleAns[i]=v;renderCircles();}
renderCircles();

// EXERCISE 3: FORMULA PICKER
const FORMULA_QS=[
  {scenario:'Shaded region between a circle and inscribed square.',correct:'A = œÄr¬≤ ‚àí s¬≤',opts:['A = œÄr¬≤','A = œÄr¬≤ ‚àí s¬≤','A = s¬≤ ‚àí œÄr¬≤','A = 2œÄr + 4s'],fb:'Circle minus square. Composite: subtract inner from outer.'},
  {scenario:'Hypotenuse of right triangle with legs 7 and 24.',correct:'a¬≤ + b¬≤ = c¬≤',opts:['A = ¬Ωbh','a¬≤ + b¬≤ = c¬≤','SOH-CAH-TOA','(Œ∏/360)√ó2œÄr'],fb:'Pythagorean theorem: 7¬≤+24¬≤=625 ‚Üí c=25.'},
  {scenario:'Arc length, central angle 120¬∞, radius 9.',correct:'(Œ∏/360) √ó 2œÄr',opts:['œÄr¬≤','(Œ∏/360) √ó œÄr¬≤','(Œ∏/360) √ó 2œÄr','2œÄr'],fb:'Arc LENGTH uses circumference: (120/360)√ó18œÄ=6œÄ.'},
  {scenario:'Volume of a cone, radius 5, height 12.',correct:'V = ‚ÖìœÄr¬≤h',opts:['V = œÄr¬≤h','V = ‚ÖìœÄr¬≤h','V = ‚Å¥‚ÅÑ‚ÇÉœÄr¬≥','V = ‚ÖìBh'],fb:'Cone=‚Öì cylinder. V=‚ÖìœÄ(25)(12)=100œÄ.'},
  {scenario:'Know angle and adjacent side. Find opposite.',correct:'tan(Œ∏) = opp/adj',opts:['sin(Œ∏) = opp/hyp','cos(Œ∏) = adj/hyp','tan(Œ∏) = opp/adj','a¬≤ + b¬≤ = c¬≤'],fb:'Have angle+adjacent, need opposite ‚Üí tangent.'},
  {scenario:'Area of sector, 45¬∞, radius 8.',correct:'(Œ∏/360) √ó œÄr¬≤',opts:['(Œ∏/360) √ó 2œÄr','(Œ∏/360) √ó œÄr¬≤','œÄr¬≤','¬Ωr¬≤Œ∏'],fb:'Sector AREA: (45/360)√ó64œÄ=8œÄ.'},
  {scenario:'Square (side 3) cut from rectangle (12√ó8). Remaining area?',correct:'A = lw ‚àí s¬≤',opts:['A = lw','A = lw ‚àí s¬≤','A = lw + s¬≤','A = 2(l+w) ‚àí 4s'],fb:'Rectangle minus square = 96‚àí9=87.'},
  {scenario:'sin(x¬∞) = cos(32¬∞). Find x.',correct:'sin(x) = cos(90‚àíx)',opts:['a¬≤ + b¬≤ = c¬≤','sin(x) = cos(90‚àíx)','sin¬≤+cos¬≤=1','tan = sin/cos'],fb:'Complementary: x=90‚àí32=58¬∞.'},
];
let formulaAns={};
function renderFormulas(){
  const total=FORMULA_QS.length;const correct=Object.entries(formulaAns).filter(([i,v])=>FORMULA_QS[i].opts[v]===FORMULA_QS[i].correct).length;
  document.getElementById('formulaEx').innerHTML=`<h3>üß∞ Pick the Right Formula</h3><div class="exercise-sub">Which formula do you reach for first?</div>`+
    FORMULA_QS.map((q,i)=>{
      const a=formulaAns[i];const has=a!==undefined;
      return `<div class="ex-item">
        <div class="ex-prompt">${q.scenario}</div>
        <div class="classify-opts">${q.opts.map((o,oi)=>{
          let cls='classify-opt';
          if(has){cls+=' cl-dis';if(o===q.correct)cls+=' cl-correct';else if(oi===a&&o!==q.correct)cls+=' cl-wrong';}
          return `<div class="${cls}" onclick="ansFormula(${i},${oi})">${o}</div>`;
        }).join('')}</div>
        <div class="ex-fb${has?' show':''}${has?(q.opts[a]===q.correct?' correct':' wrong'):''}">${has?(q.opts[a]===q.correct?'‚úì ':'‚úó ')+q.fb:''}</div>
      </div>`;
    }).join('')+mkScore('f',correct,total);
}
function ansFormula(i,v){if(formulaAns[i]!==undefined)return;formulaAns[i]=v;renderFormulas();}
renderFormulas();

// EXERCISE 4: SPECIAL TRIANGLES DRILL
const TRI_QS=[
  {prompt:'30-60-90: short leg = 4. Hyp = ?',correct:2,opts:['4‚àö2','4‚àö3','8','12'],fb:'Ratio 1:‚àö3:2. Hyp = 4√ó2 = 8.'},
  {prompt:'30-60-90: hyp = 14. Long leg = ?',correct:2,opts:['7','7‚àö2','7‚àö3','14‚àö3'],fb:'Short = 14/2 = 7. Long = 7‚àö3.'},
  {prompt:'45-45-90: hyp = 10. Each leg = ?',correct:1,opts:['5','5‚àö2','10‚àö2','10'],fb:'Leg = hyp/‚àö2 = 10/‚àö2 = 5‚àö2.'},
  {prompt:'45-45-90: each leg = 3. Hyp = ?',correct:1,opts:['6','3‚àö2','3‚àö3','9'],fb:'Ratio 1:1:‚àö2. Hyp = 3‚àö2.'},
  {prompt:'Right triangle: legs 5 and 12. Hyp = ?',correct:0,opts:['13','17','‚àö17','15'],fb:'5-12-13 is a Pythagorean triple!'},
  {prompt:'Right triangle: leg = 9, hyp = 15. Other leg = ?',correct:2,opts:['6','10','12','‚àö144'],fb:'9¬≤ + x¬≤ = 15¬≤ ‚Üí x¬≤ = 144 ‚Üí x = 12. (3-4-5 √ó 3.)'},
  {prompt:'30-60-90: long leg = 6‚àö3. Short leg = ?',correct:1,opts:['3','6','6‚àö2','12'],fb:'Long = short √ó ‚àö3. Short = 6‚àö3/‚àö3 = 6.'},
  {prompt:'Right triangle: both legs = 1. Hyp = ?',correct:1,opts:['1','‚àö2','2','‚àö3'],fb:'1¬≤ + 1¬≤ = 2 ‚Üí hyp = ‚àö2. The 45-45-90 base case.'},
];
let triAns={};
function renderTris(){
  const total=TRI_QS.length;const correct=Object.entries(triAns).filter(([i,v])=>v===TRI_QS[i].correct).length;
  document.getElementById('triEx').innerHTML=`<h3>üìè Special Triangles Speed Drill</h3><div class="exercise-sub">Find the missing side using special triangle ratios or Pythagorean triples.</div>`+
    TRI_QS.map((q,i)=>{
      const a=triAns[i];const has=a!==undefined;
      return `<div class="ex-item" style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;padding:10px 14px">
        <div style="flex:1;min-width:180px;font-size:.9rem">${q.prompt}</div>
        <div class="classify-opts" style="flex:1">${q.opts.map((o,oi)=>{
          let cls='classify-opt';
          if(has){cls+=' cl-dis';if(oi===q.correct)cls+=' cl-correct';else if(oi===a&&oi!==q.correct)cls+=' cl-wrong';}
          return `<div class="${cls}" onclick="ansTri(${i},${oi})">${o}</div>`;
        }).join('')}</div>
        ${has?`<div style="width:100%;font-size:.82rem;color:var(--muted)">${a===q.correct?'‚úì ':'‚úó '}${q.fb}</div>`:''}</div>`;
    }).join('')+`<div class="score-bar" style="margin:14px 0 0"><div class="score-bar-label">Score</div><div class="score-bar-track"><div class="score-bar-fill" style="width:${total?correct/total*100:0}%"></div></div><div class="score-bar-val">${correct}/${total}</div></div>`;
}
function ansTri(i,v){if(triAns[i]!==undefined)return;triAns[i]=v;renderTris();}
renderTris();

// TRIG CALCULATOR
function calcTrig(){
  const o=parseFloat(document.getElementById('trigOpp').value);
  const a=parseFloat(document.getElementById('trigAdj').value);
  const h=parseFloat(document.getElementById('trigHyp').value);
  const has=[!isNaN(o),!isNaN(a),!isNaN(h)];const count=has.filter(v=>v).length;
  if(count<2){document.getElementById('trigResults').innerHTML='<div style="color:var(--muted);font-size:.88rem;text-align:center;grid-column:1/-1">Enter any two sides to calculate.</div>';document.getElementById('trigNote').innerHTML='';return;}
  let opp=o,adj=a,hyp=h;
  if(!has[0])opp=Math.sqrt(hyp*hyp-adj*adj);
  if(!has[1])adj=Math.sqrt(hyp*hyp-opp*opp);
  if(!has[2])hyp=Math.sqrt(opp*opp+adj*adj);
  if(isNaN(opp)||isNaN(adj)||isNaN(hyp)||hyp<=0){document.getElementById('trigResults').innerHTML='<div style="color:var(--wrong);font-size:.88rem;text-align:center;grid-column:1/-1">Invalid triangle.</div>';return;}
  const sin=opp/hyp,cos=adj/hyp,tan=opp/adj,angle=Math.atan(opp/adj)*180/Math.PI;
  const r=v=>+(v.toFixed(4));
  document.getElementById('trigResults').innerHTML=[
    {l:'Sin Œ∏',v:r(sin),c:'var(--geotrig)'},{l:'Cos Œ∏',v:r(cos),c:'var(--adv)'},{l:'Tan Œ∏',v:r(tan),c:'var(--psda)'},
    {l:'Angle Œ∏',v:r(angle)+'¬∞',c:'var(--algebra)'},{l:'Opp',v:r(opp),c:'var(--ink)'},{l:'Adj',v:r(adj),c:'var(--ink)'},{l:'Hyp',v:r(hyp),c:'var(--ink)'},
  ].map(s=>`<div class="trig-result"><div class="trig-val" style="color:${s.c}">${s.v}</div><div class="trig-label">${s.l}</div></div>`).join('');
  document.getElementById('trigNote').innerHTML=`Complementary angle: ${r(90-angle)}¬∞ ¬∑ sin(${r(angle)}¬∞) = cos(${r(90-angle)}¬∞)`;
}
calcTrig();

// COMPOSITE SHAPES
var CMP_QS=[
  {p:'A square with side 10 has a circle of radius 5 inscribed inside it. Find the shaded area (square minus circle). Leave in terms of \u03c0.',acc:['100-25\u03c0','100-25pi','100 - 25\u03c0','100 - 25pi'],s:'Square: 10\u00b2 = 100. Circle: \u03c0(5\u00b2) = 25\u03c0. Shaded: 100 \u2212 25\u03c0.'},
  {p:'A circle with radius 8 has a square inscribed inside it (corners touch the circle). The square diagonal = 16. Find the square\'s area.',acc:['128'],s:'Diagonal = 16. Side = 16/\u221a2 = 8\u221a2. Area = (8\u221a2)\u00b2 = 128. Or: \u00bdd\u00b2 = \u00bd(16\u00b2) = 128.'},
  {p:'A rectangle is 12 \u00d7 8. A semicircle with diameter 8 is cut from one end. Find the remaining area in terms of \u03c0.',acc:['96-8\u03c0','96-8pi','96 - 8\u03c0','96 - 8pi'],s:'Rectangle: 96. Semicircle: \u00bd\u03c0(4\u00b2) = 8\u03c0. Remaining: 96 \u2212 8\u03c0.'},
  {p:'Two concentric circles have radii 10 and 6. Find the area of the ring (annulus) between them in terms of \u03c0.',acc:['64\u03c0','64pi'],s:'Outer: \u03c0(100). Inner: \u03c0(36). Ring: 100\u03c0 \u2212 36\u03c0 = 64\u03c0.'},
  {p:'An equilateral triangle with side 6 is inscribed in a circle. The circle has radius 2\u221a3. Find the area of the circle minus the triangle, in terms of \u03c0 and \u221a3.',acc:['12\u03c0-9\u221a3','12pi-9\u221a3','12\u03c0 - 9\u221a3','12pi - 9sqrt3'],s:'Circle: \u03c0(2\u221a3)\u00b2 = 12\u03c0. Triangle: (\u221a3/4)(6\u00b2) = 9\u221a3. Shaded: 12\u03c0 \u2212 9\u221a3.'},
];
function renderCmp(){
  document.getElementById('cmpEx').innerHTML='<h3>\ud83d\udd32 Composite Shapes</h3><div class="exercise-sub">Find the shaded or remaining area. Type \u03c0 or "pi" for \u03c0.</div>'+
    CMP_QS.map(function(q,i){return '<div class="ex-item"><div class="ex-prompt">'+q.p+'</div><div class="ex-input-row"><span style="font-size:.85rem;color:var(--muted)">= </span><input class="ex-input" type="text" id="cmp'+i+'" placeholder="?" style="width:160px"><button class="ex-btn" onclick="chkCmp('+i+')">Check</button></div><div class="ex-fb" id="cmpFb'+i+'"></div></div>';}).join('');
}
function chkCmp(i){
  var v=document.getElementById('cmp'+i).value.trim().replace(/\s/g,'').toLowerCase(),fb=document.getElementById('cmpFb'+i),q=CMP_QS[i];
  if(!v){fb.className='ex-fb show wrong';fb.textContent='Enter an answer.';return;}
  var ok=q.acc.some(function(a){return v===a.replace(/\s/g,'').toLowerCase();});
  fb.className='ex-fb show '+(ok?'correct':'wrong');
  fb.textContent=(ok?'\u2713 Correct! ':'\u2717 Answer: '+q.acc[0]+'. ')+q.s;
}
renderCmp();

// TIMED PRACTICE (10 questions)
const PST=[
  {t:1,tp:'6A',q:'What is the area of a circle with diameter 10?',
   ch:['25œÄ','50œÄ','100œÄ','10œÄ'],c:0,
   fb:'Diameter = 10, radius = 5. Area = œÄ(5¬≤) = 25œÄ. Trap: using diameter instead of radius.',
   trap:'wrong_target',trapAnswer:2,trapDesc:'Used diameter instead of radius ‚Äî The Wrong Target'},
  {t:1,tp:'6D',q:'In a right triangle, sin(A) = 3/5. What is cos(A)?',
   ch:['3/5','4/5','5/3','3/4'],c:1,
   fb:'sin = opp/hyp = 3/5. Adjacent = ‚àö(25‚àí9) = 4. cos = adj/hyp = 4/5.',
   trap:null,trapAnswer:0,trapDesc:'Confused sin and cos ratios'},
  {t:1,tp:'6A',q:'Triangle angles: 35¬∞ and 75¬∞. Third angle?',
   ch:['70¬∞','90¬∞','110¬∞','80¬∞'],c:0,
   fb:'180 ‚àí 35 ‚àí 75 = 70¬∞.',
   trap:null,trapAnswer:1,trapDesc:'Added instead of subtracted from 180'},
  {t:2,tp:'6C',q:'A cylinder has radius 4 and height 10. Volume?',
   ch:['40œÄ','80œÄ','160œÄ','640œÄ'],c:2,
   fb:'V = œÄr¬≤h = œÄ(16)(10) = 160œÄ.',
   trap:'phantom_height',trapAnswer:0,trapDesc:'Used diameter for radius or forgot to square ‚Äî Phantom Height'},
  {t:2,tp:'6D',q:'If sin(x) = cos(40¬∞), what is x?',
   ch:['40¬∞','50¬∞','60¬∞','90¬∞'],c:1,
   fb:'sin(x) = cos(90¬∞‚àíx). So cos(40¬∞) = sin(50¬∞). x = 50¬∞.',
   trap:'unit_mismatch',trapAnswer:0,trapDesc:'Used the given angle directly ‚Äî Unit Mismatch on complementary relationship'},
  {t:2,tp:'6B',q:'Circle equation: <code>(x+1)¬≤ + (y‚àí4)¬≤ = 36</code>. Point (‚àí1, y) is on the circle. Find the positive value of y.',
   ch:['10','4','6','8'],c:0,
   fb:'Plug in x=‚àí1: (0)¬≤+(y‚àí4)¬≤=36 ‚Üí y‚àí4=¬±6 ‚Üí y=10 or y=‚àí2. Positive: y=10.',
   trap:'sign_flip',trapAnswer:1,trapDesc:'Forgot the ¬±, only found one solution ‚Äî The Sign Flip'},
  {t:2,tp:'6D',q:'Convert 240¬∞ to radians.',
   ch:['4œÄ/3','3œÄ/4','2œÄ/3','4œÄ'],c:0,
   fb:'240 √ó œÄ/180 = 240œÄ/180 = 4œÄ/3.',
   trap:'unit_mismatch',trapAnswer:1,trapDesc:'Inverted the fraction ‚Äî Unit Mismatch'},
  {t:3,tp:'6C',q:'A cone and cylinder have the same radius and height. Cylinder volume = 90œÄ. Cone volume = ?',
   ch:['30œÄ','45œÄ','270œÄ','90œÄ'],c:0,
   fb:'Cone = ‚Öì √ó cylinder = ‚Öì √ó 90œÄ = 30œÄ.',
   trap:'wrong_target',trapAnswer:3,trapDesc:'Forgot the ‚Öì relationship ‚Äî The Wrong Target'},
  {t:3,tp:'6B',q:'Circle has center (2, ‚àí3) and passes through (6, 0). What is the equation?',
   ch:['(x‚àí2)¬≤+(y+3)¬≤=25','(x+2)¬≤+(y‚àí3)¬≤=25','(x‚àí2)¬≤+(y+3)¬≤=5','(x‚àí6)¬≤+y¬≤=25'],c:0,
   fb:'Radius = distance from (2,‚àí3) to (6,0) = ‚àö(4¬≤+3¬≤) = ‚àö25 = 5. r¬≤=25. Equation: (x‚àí2)¬≤+(y+3)¬≤=25.',
   trap:'sign_flip',trapAnswer:1,trapDesc:'Flipped the signs in the equation ‚Äî The Sign Flip'},
  {t:3,tp:'6C',q:'Square side 10 with inscribed circle. Shaded area outside circle, inside square?',
   ch:['100‚àí25œÄ','100‚àí100œÄ','25œÄ‚àí100','400‚àí100œÄ'],c:0,
   fb:'Square = 100. Circle r=5, area = 25œÄ. Shaded = 100 ‚àí 25œÄ. Composite shape!',
   trap:'wrong_target',trapAnswer:1,trapDesc:'Used diameter as radius for circle area ‚Äî The Wrong Target'},
];

const TRAP_NAMES={'wrong_target':'üéØ Wrong Target','phantom_height':'üìê Phantom Height','sign_flip':'üîÑ Sign Flip','unit_mismatch':'üìè Unit Mismatch'};

let pstA={},pstConf={},pstTime={},pstStartTime=null;
let timerEnabled=false,timerInterval=null,timerSeconds=0;
const SECS_PER_Q=95;let totalTimerSecs=PST.length*SECS_PER_Q;

function toggleTimer(){
  timerEnabled=!timerEnabled;const btn=document.getElementById('timerToggle');
  btn.textContent=timerEnabled?'‚è± Timer ON':'‚è± Timer OFF';btn.classList.toggle('active',timerEnabled);
  if(!timerEnabled&&timerInterval){clearInterval(timerInterval);timerInterval=null;document.getElementById('timerDisplay').textContent='--:--';document.getElementById('timerFill').style.width='100%';}
  else if(timerEnabled&&currentScreen===3){startTimer();}
}
function startTimer(){
  if(timerInterval)clearInterval(timerInterval);timerSeconds=totalTimerSecs;updateTimerDisplay();
  timerInterval=setInterval(()=>{timerSeconds--;updateTimerDisplay();if(timerSeconds<=0){clearInterval(timerInterval);timerInterval=null;}},1000);pstStartTime=Date.now();
}
function updateTimerDisplay(){
  const disp=document.getElementById('timerDisplay'),fill=document.getElementById('timerFill');
  const mins=Math.floor(timerSeconds/60),secs=timerSeconds%60;
  disp.textContent=`${mins}:${secs.toString().padStart(2,'0')}`;
  const pct=(timerSeconds/totalTimerSecs)*100;fill.style.width=pct+'%';
  disp.className='timer-display';fill.className='timer-fill';
  if(pct<15){disp.classList.add('danger');fill.classList.add('danger');}
  else if(pct<35){disp.classList.add('warning');fill.classList.add('warning');}
}

function renderPST(){
  const answered=Object.keys(pstA).length;
  document.getElementById('qDots').innerHTML=PST.map((_,i)=>{let cls='q-dot';if(pstA[i]!==undefined)cls+=pstA[i]===PST[i].c?' correct':' wrong';return `<div class="${cls}"></div>`;}).join('');
  document.getElementById('satPractice').innerHTML=PST.map((q,i)=>{
    const a=pstA[i],h=a!==undefined;const conf=pstConf[i];
    const tierLabel=q.t===1?'Easy':q.t===2?'Medium':'Hard';
    const trapName=q.trap?TRAP_NAMES[q.trap]||'':'';
    return `<div class="ex-item" style="border-color:${q.t===1?'var(--algebra)':q.t===2?'var(--math)':'var(--advanced)'}">
      <div style="margin-bottom:6px;display:flex;align-items:center;gap:8px;flex-wrap:wrap">
        <span class="tier tier-${q.t}">${tierLabel}</span><span style="font-size:.75rem;color:var(--muted)">Topic ${q.tp}</span>
        ${trapName&&h?`<span style="font-size:.72rem;color:var(--accent)">Trap: ${trapName}</span>`:''}
      </div>
      <div class="ex-prompt">${q.q}</div>
      ${!h?`<div class="confidence-row">
        <div class="conf-tag ${conf==='guessing'?'selected':''}" data-conf="guessing" onclick="setConf(${i},'guessing')">Guessing</div>
        <div class="conf-tag ${conf==='unsure'?'selected':''}" data-conf="unsure" onclick="setConf(${i},'unsure')">Unsure</div>
        <div class="conf-tag ${conf==='confident'?'selected':''}" data-conf="confident" onclick="setConf(${i},'confident')">Confident</div>
      </div>`:`<div style="font-size:.72rem;color:var(--muted);margin-bottom:6px">Confidence: ${conf||'not tagged'}</div>`}
      <div class="mc-choices">${q.ch.map((ch,ci)=>{let c='mc-choice';if(h){c+=' mc-dis';if(ci===q.c)c+=' mc-correct';else if(ci===a)c+=' mc-wrong';}return `<div class="${c}" onclick="aPST(${i},${ci})"><div class="mc-letter">${'ABCD'[ci]}</div><div>${ch}</div></div>`;}).join('')}</div>
      <div class="mc-fb${h?' show':''}">${h?(a===q.c?'‚úì Correct! ':'‚úó Incorrect. ')+q.fb+(a!==q.c&&q.trapAnswer===a?'<br><span style="color:var(--psda)">‚ö†Ô∏è '+q.trapDesc+'</span>':''):''}</div>
    </div>`;
  }).join('');
  if(answered===PST.length){if(timerInterval){clearInterval(timerInterval);timerInterval=null;}document.getElementById('practiceNav').style.display='block';showPracticeResults();}
}
function setConf(i,level){if(pstA[i]!==undefined)return;pstConf[i]=level;renderPST();}
function aPST(i,v){if(pstA[i]!==undefined)return;pstA[i]=v;if(pstStartTime){pstTime[i]=Date.now()-pstStartTime;pstStartTime=Date.now();}renderPST();}

function showPracticeResults(){
  const total=PST.length,correct=Object.entries(pstA).filter(([i,v])=>v===PST[i].c).length;
  const byDiff={1:{cor:0,tot:0},2:{cor:0,tot:0},3:{cor:0,tot:0}};
  PST.forEach((q,i)=>{byDiff[q.t].tot++;if(pstA[i]===q.c)byDiff[q.t].cor++;});
  const matrix={};['guessing','unsure','confident'].forEach(c=>{matrix[c]={correct:[],wrong:[]};});
  PST.forEach((q,i)=>{const conf=pstConf[i]||'unsure';matrix[conf][pstA[i]===q.c?'correct':'wrong'].push(i);});
  const errors={content_gap:[],trap_answer:[],careless:[],calibration:[]};
  PST.forEach((q,i)=>{if(pstA[i]===q.c)return;const conf=pstConf[i]||'unsure';if(pstA[i]===q.trapAnswer)errors.trap_answer.push({i,desc:q.trapDesc,topic:q.tp});else errors.content_gap.push({i,topic:q.tp});if(conf==='confident'){if(q.t===1)errors.careless.push({i,topic:q.tp});errors.calibration.push({i,topic:q.tp});}});

  let html=`<div class="results-section"><h3>üìä Practice Results: ${correct}/${total}</h3>
    <div style="margin-bottom:20px"><div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px">By Difficulty</div>
    <div class="difficulty-bars">
      <div class="diff-row"><span class="diff-label" style="color:var(--algebra)">Easy</span><div class="diff-track"><div class="diff-fill" style="width:${byDiff[1].tot?byDiff[1].cor/byDiff[1].tot*100:0}%;background:var(--algebra)"></div></div><span class="diff-val" style="color:var(--algebra)">${byDiff[1].cor}/${byDiff[1].tot}</span></div>
      <div class="diff-row"><span class="diff-label" style="color:var(--math)">Medium</span><div class="diff-track"><div class="diff-fill" style="width:${byDiff[2].tot?byDiff[2].cor/byDiff[2].tot*100:0}%;background:var(--math)"></div></div><span class="diff-val" style="color:var(--math)">${byDiff[2].cor}/${byDiff[2].tot}</span></div>
      <div class="diff-row"><span class="diff-label" style="color:var(--advanced)">Hard</span><div class="diff-track"><div class="diff-fill" style="width:${byDiff[3].tot?byDiff[3].cor/byDiff[3].tot*100:0}%;background:var(--advanced)"></div></div><span class="diff-val" style="color:var(--advanced)">${byDiff[3].cor}/${byDiff[3].tot}</span></div>
    </div></div>`;
  html+=`<div style="margin-bottom:20px"><div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px">Confidence √ó Accuracy Matrix</div>
    <div class="results-grid">
      <div class="results-grid-header"></div><div class="results-grid-header">Guessing</div><div class="results-grid-header">Unsure</div><div class="results-grid-header">Confident</div>
      <div class="results-grid-header">‚úì Correct</div>
      <div class="results-grid-cell"><div class="cell-label">Lucky</div><div class="cell-dots">${matrix.guessing.correct.map(()=>'<div class="cell-dot" style="background:var(--psda)"></div>').join('')}</div><div style="font-size:.7rem;color:var(--muted)">${matrix.guessing.correct.length}</div></div>
      <div class="results-grid-cell"><div class="cell-label">Developing</div><div class="cell-dots">${matrix.unsure.correct.map(()=>'<div class="cell-dot" style="background:var(--math)"></div>').join('')}</div><div style="font-size:.7rem;color:var(--muted)">${matrix.unsure.correct.length}</div></div>
      <div class="results-grid-cell"><div class="cell-label">Solid</div><div class="cell-dots">${matrix.confident.correct.map(()=>'<div class="cell-dot" style="background:var(--correct)"></div>').join('')}</div><div style="font-size:.7rem;color:var(--muted)">${matrix.confident.correct.length}</div></div>
      <div class="results-grid-header">‚úó Wrong</div>
      <div class="results-grid-cell"><div class="cell-label">Expected</div><div class="cell-dots">${matrix.guessing.wrong.map(()=>'<div class="cell-dot" style="background:var(--muted)"></div>').join('')}</div><div style="font-size:.7rem;color:var(--muted)">${matrix.guessing.wrong.length}</div></div>
      <div class="results-grid-cell"><div class="cell-label">Needs work</div><div class="cell-dots">${matrix.unsure.wrong.map(()=>'<div class="cell-dot" style="background:var(--psda)"></div>').join('')}</div><div style="font-size:.7rem;color:var(--muted)">${matrix.unsure.wrong.length}</div></div>
      <div class="results-grid-cell danger-cell"><div class="cell-label" style="color:var(--wrong);font-weight:700">‚ö†Ô∏è DANGER</div><div class="cell-dots">${matrix.confident.wrong.map(()=>'<div class="cell-dot" style="background:var(--wrong)"></div>').join('')}</div><div style="font-size:.7rem;color:var(--wrong)">${matrix.confident.wrong.length}</div></div>
    </div>
    ${matrix.confident.wrong.length>0?'<div class="callout" style="border-color:var(--wrong);background:var(--wrong-bg)"><strong style="color:var(--wrong)">Confident + Wrong</strong> is the most dangerous category. These errors persist because you won\'t self-correct what you think you already know.</div>':''}
  </div>`;
  const hasErrors=errors.trap_answer.length+errors.content_gap.length>0;
  if(hasErrors){
    html+=`<div style="margin-bottom:16px"><div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px">Error Pattern Analysis</div>`;
    if(errors.trap_answer.length>0)html+=`<div class="error-category" style="background:rgba(251,191,36,.08);border:1px solid rgba(251,191,36,.3)"><div class="error-label" style="color:var(--psda)">üü° Trap Answers (${errors.trap_answer.length})</div><div class="error-items">${errors.trap_answer.map(e=>e.desc).join(' ¬∑ ')}</div></div>`;
    if(errors.content_gap.length>0)html+=`<div class="error-category" style="background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.3)"><div class="error-label" style="color:var(--wrong)">üî¥ Content Gaps (${errors.content_gap.length})</div><div class="error-items">Topics: ${[...new Set(errors.content_gap.map(e=>e.topic))].join(', ')}</div></div>`;
    if(errors.careless.length>0)html+=`<div class="error-category" style="background:rgba(96,165,250,.08);border:1px solid rgba(96,165,250,.3)"><div class="error-label" style="color:var(--math)">üîµ Possible Careless Errors (${errors.careless.length})</div><div class="error-items">Confident + wrong on easy questions ‚Äî likely arithmetic mistakes</div></div>`;
    if(errors.calibration.length>0)html+=`<div class="error-category" style="background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.3)"><div class="error-label" style="color:var(--wrong)">‚ö†Ô∏è Calibration Issues (${errors.calibration.length})</div><div class="error-items">You were confident but wrong ‚Äî review these topics carefully</div></div>`;
    html+=`</div>`;
  }
  html+=`</div>`;
  document.getElementById('practiceResults').style.display='block';
  document.getElementById('practiceResults').innerHTML=html;
  document.getElementById('completePracticeStats').innerHTML=`
    <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px 20px;margin-bottom:24px;max-width:500px;width:100%;text-align:left">
      <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px">Practice Results</div>
      <div style="font-family:'JetBrains Mono',monospace;font-size:1.4rem;font-weight:700;color:var(--correct);margin-bottom:8px">${correct}/${total} correct</div>
      <div style="font-size:.82rem;color:var(--muted)">Easy: ${byDiff[1].cor}/${byDiff[1].tot} ¬∑ Medium: ${byDiff[2].cor}/${byDiff[2].tot} ¬∑ Hard: ${byDiff[3].cor}/${byDiff[3].tot}</div>
    </div>`;
}
renderPST();
</script>
<script src="/translate.js"></script>
</body>
</html>
