<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Session 6: Final Practice & Course Review ‚Äî PSAT 8/9 R&W ‚Äî PantherPrep</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--ink:#f0f0f0;--paper:#121212;--accent:#C8102E;--accent-light:rgba(200,16,46,.15);--border:#2a2a2a;--muted:#999;--surface:#1a1a1a;--craft:#60a5fa;--craft-bg:rgba(96,165,250,.1);--info:#34d399;--info-bg:rgba(52,211,153,.1);--express:#fbbf24;--express-bg:rgba(251,191,36,.1);--convention:#f87171;--convention-bg:rgba(248,113,113,.1);--correct:#22c55e;--correct-bg:rgba(34,197,94,.12);--wrong:#ef4444;--wrong-bg:rgba(239,68,68,.12)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);line-height:1.65}
.top-stripe{height:4px;background:linear-gradient(90deg,#C8102E 0%,#C8102E 50%,#fff 50%,#fff 100%);position:fixed;top:0;left:0;right:0;z-index:100}
.container{max-width:800px;margin:0 auto;padding:20px 20px 60px}
.back-link{display:inline-flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem;padding:8px 0;margin-top:8px;cursor:pointer;text-decoration:none}
.back-link:hover{color:var(--accent)}
.mod-header{padding:40px 0 30px;border-bottom:1px solid var(--border);margin-bottom:32px}
.mod-badge{display:inline-block;background:var(--accent);color:#fff;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:14px}
.mod-header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700;margin-bottom:6px}
.mod-header .subtitle{color:var(--muted);font-size:1rem}
.mod-meta{display:flex;gap:20px;margin-top:14px;font-size:.82rem;color:var(--muted)}
.section{margin-bottom:36px}
.section-label{font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:6px}
.section h2{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:700;margin-bottom:12px}
.section p{color:#ccc;font-size:.93rem;margin-bottom:12px;line-height:1.7}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:12px}
.card-accent{border-left:3px solid var(--accent)}
.callout{background:var(--accent-light);border:1px solid rgba(200,16,46,.3);border-radius:10px;padding:14px 18px;margin-bottom:16px;font-size:.9rem}
.callout strong{color:var(--accent)}

/* STRATEGY RECAP */
.strat-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-bottom:16px}
.strat-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px;font-size:.85rem}
.strat-name{font-weight:700;color:var(--accent);margin-bottom:3px;font-size:.9rem}
.strat-desc{color:var(--muted);font-size:.82rem;line-height:1.5}

/* TIMER */
.timer-bar{background:var(--surface);border:2px solid var(--accent);border-radius:12px;padding:16px;text-align:center;margin-bottom:16px}
.timer-display{font-family:'JetBrains Mono',monospace;font-size:2.2rem;font-weight:700;margin-bottom:8px}
.timer-display.running{color:var(--express)}
.timer-display.done{color:var(--correct)}
.timer-display.warning{color:var(--wrong)}
.timer-btn{display:inline-block;padding:8px 24px;border:2px solid var(--accent);border-radius:8px;background:var(--accent);color:#fff;font-family:inherit;font-size:.9rem;font-weight:600;cursor:pointer;margin:0 4px;transition:all .15s}
.timer-btn:hover{background:#a00d24}
.timer-btn.outline{background:transparent;color:var(--accent)}
.timer-btn.outline:hover{background:var(--accent-light)}

/* SAT PRACTICE */
.sat-q{background:var(--paper);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:10px}
.sat-passage{background:var(--surface);border-left:3px solid var(--craft);padding:12px 14px;border-radius:0 8px 8px 0;font-size:.9rem;line-height:1.75;margin-bottom:12px;color:#ddd;font-style:italic}
.sat-stem{font-size:.95rem;font-weight:600;margin-bottom:10px}
.sat-choices{display:flex;flex-direction:column;gap:6px}
.sat-choice{display:flex;align-items:flex-start;gap:10px;padding:10px 12px;background:var(--surface);border:2px solid var(--border);border-radius:10px;cursor:pointer;font-size:.88rem;transition:all .15s}
.sat-choice:hover:not(.sc-dis){border-color:var(--accent);background:var(--accent-light)}
.sat-choice.sc-correct{border-color:var(--correct);background:var(--correct-bg)}
.sat-choice.sc-wrong{border-color:var(--wrong);background:var(--wrong-bg)}
.sat-choice.sc-dis{pointer-events:none;opacity:.6}
.sc-letter{flex-shrink:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--border);font-weight:700;font-size:.78rem}
.sat-choice.sc-correct .sc-letter{background:var(--correct);color:#fff}
.sat-choice.sc-wrong .sc-letter{background:var(--wrong);color:#fff}
.sat-fb{margin-top:8px;padding:10px;border-radius:8px;font-size:.82rem;line-height:1.5;display:none}
.sat-fb.show{display:block}
.sat-fb.sfb-correct{background:var(--correct-bg);border:1px solid var(--correct)}
.sat-fb.sfb-wrong{background:var(--wrong-bg);border:1px solid var(--wrong)}
.domain-tag{display:inline-block;font-size:.68rem;font-weight:700;letter-spacing:.5px;text-transform:uppercase;padding:2px 8px;border-radius:10px;margin-right:6px}
.ex-num{font-size:.78rem;font-weight:700;color:var(--muted);margin-bottom:6px}
.ex-score{text-align:center;padding:10px 0;font-size:.88rem;color:var(--muted)}

/* ERROR CODES */
.ec-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:8px;margin-bottom:16px}
.ec-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center}
.ec-code{font-family:'JetBrains Mono',monospace;font-size:1.4rem;font-weight:700;margin-bottom:2px}
.ec-name{font-weight:700;font-size:.85rem;margin-bottom:2px}
.ec-desc{font-size:.78rem;color:var(--muted);line-height:1.4}

/* ERROR LOG */
.elog{background:var(--surface);border:2px solid var(--convention);border-radius:14px;padding:22px;margin-bottom:16px}
.elog h3{font-family:'Cormorant Garamond',serif;font-size:1.2rem;margin-bottom:4px}
.elog-sub{font-size:.85rem;color:var(--muted);margin-bottom:14px}
.elog-row{display:grid;grid-template-columns:50px 1fr 1fr 1fr;gap:8px;align-items:center;padding:8px 0;border-bottom:1px solid var(--border);font-size:.84rem}
.elog-row:last-child{border-bottom:none}
.elog-head{font-weight:700;font-size:.72rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted)}
.elog-qnum{font-weight:700;font-family:'JetBrains Mono',monospace;text-align:center}
.elog-sel{padding:5px 8px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.82rem;width:100%}
.elog-sel:focus{border-color:var(--convention);outline:none}
.elog-summary{margin-top:16px;padding:14px;background:var(--paper);border-radius:10px;border:1px solid var(--border)}
.elog-summary h4{margin-bottom:8px;font-size:.95rem}
.elog-bar-row{display:flex;align-items:center;gap:8px;margin-bottom:6px}
.elog-bar-label{width:120px;font-size:.82rem;color:#ccc;flex-shrink:0}
.elog-bar{flex:1;height:10px;background:var(--border);border-radius:5px;overflow:hidden}
.elog-bar-fill{height:100%;border-radius:5px;transition:width .3s}
.elog-bar-val{font-family:'JetBrains Mono',monospace;font-size:.78rem;color:var(--muted);width:30px;text-align:right;flex-shrink:0}

/* REFLECTION */
.reflect-q{background:var(--paper);border-radius:10px;padding:14px;margin-bottom:8px;border:1px solid var(--border)}
.reflect-num{display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;background:var(--accent);color:#fff;font-weight:700;font-size:.75rem;margin-right:8px}
.reflect-text{font-size:.9rem;color:#ccc;display:inline}
.reflect-input{width:100%;padding:8px 10px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.85rem;margin-top:8px;resize:vertical;min-height:40px}
.reflect-input:focus{border-color:var(--accent);outline:none}

/* PROGRESS TRACKER */
.progress-table{width:100%;border-collapse:collapse;margin-bottom:16px;font-size:.88rem}
.progress-table th{text-align:left;padding:10px 12px;border-bottom:2px solid var(--accent);font-size:.75rem;text-transform:uppercase;letter-spacing:1px;color:var(--muted)}
.progress-table td{padding:10px 12px;border-bottom:1px solid var(--border)}
.progress-table tr:last-child td{border-bottom:2px solid var(--accent);font-weight:700}
.score-input{width:48px;padding:4px 6px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:.88rem;text-align:center}
.score-input:focus{border-color:var(--accent);outline:none}
.trend-cell{font-size:1.1rem;text-align:center}

/* STRATEGY TOOLKIT */
.toolkit-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:14px 16px;margin-bottom:8px;display:flex;gap:14px;align-items:flex-start}
.toolkit-name{font-weight:700;color:var(--info);font-size:.95rem;min-width:100px;flex-shrink:0}
.toolkit-desc{color:#ccc;font-size:.88rem;line-height:1.5}

/* CELEBRATION */
.celebrate-box{background:linear-gradient(135deg,rgba(200,16,46,.15),rgba(52,211,153,.1));border:2px solid var(--accent);border-radius:16px;padding:32px;text-align:center;margin-bottom:20px}
.celebrate-box h2{font-family:'Cormorant Garamond',serif;font-size:2rem;margin-bottom:8px;background:linear-gradient(90deg,var(--accent),var(--info));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.celebrate-box p{color:#ccc;font-size:1rem;line-height:1.6}
.celebrate-stats{display:flex;justify-content:center;gap:32px;margin-top:18px;flex-wrap:wrap}
.celebrate-stat{text-align:center}
.celebrate-stat .num{font-family:'JetBrains Mono',monospace;font-size:2rem;font-weight:700;color:var(--accent)}
.celebrate-stat .label{font-size:.78rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px}

/* CONFIDENCE RATER */
.conf-grid{display:grid;grid-template-columns:1fr;gap:6px;margin-bottom:16px}
.conf-row{display:flex;align-items:center;gap:10px;padding:8px 12px;background:var(--surface);border:1px solid var(--border);border-radius:8px;font-size:.85rem}
.conf-label{flex:1;color:#ccc}
.conf-dots{display:flex;gap:4px}
.conf-dot{width:28px;height:28px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:.7rem;font-weight:700;color:var(--muted);transition:all .15s}
.conf-dot:hover{border-color:var(--accent);color:var(--accent)}
.conf-dot.active-1{border-color:var(--wrong);background:var(--wrong-bg);color:var(--wrong)}
.conf-dot.active-2{border-color:var(--express);background:var(--express-bg);color:var(--express)}
.conf-dot.active-3{border-color:var(--info);background:var(--info-bg);color:var(--info)}
.conf-dot.active-4{border-color:var(--correct);background:var(--correct-bg);color:var(--correct)}

.btn{display:inline-block;background:var(--accent);color:#fff;font-family:inherit;font-size:.9rem;font-weight:600;padding:10px 24px;border:none;border-radius:8px;cursor:pointer;transition:all .2s}
.btn:hover{background:#a00d24}
.btn-sm{padding:8px 16px;font-size:.82rem}

.mod-nav{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-top:1px solid var(--border);margin-top:40px}
.mod-nav a{color:var(--accent);text-decoration:none;font-weight:600;font-size:.9rem;display:flex;align-items:center;gap:6px}
.mod-nav a:hover{text-decoration:underline}

@media(max-width:600px){.mod-meta{flex-wrap:wrap;gap:10px}.strat-grid{grid-template-columns:1fr}.ec-grid{grid-template-columns:1fr 1fr}.elog-row{grid-template-columns:40px 1fr 1fr}.celebrate-stats{gap:18px}}
</style>
</head>
<body>
<div class="top-stripe"></div>
<div class="container">
<a class="back-link" href="index.html">‚Üê Back to R&W Course</a>

<div class="mod-header">
  <div class="mod-badge">Session 6 ¬∑ Final</div>
  <h1>Practice Set 3 (Q11‚Äì20) & Full Course Review</h1>
  <p class="subtitle">Final timed practice covering Expression of Ideas and Standard English Conventions, plus a full-course progress review.</p>
  <div class="mod-meta">
    <span>‚è± 60 minutes</span>
    <span>üìã 6 sections</span>
    <span>üèÅ Final Session</span>
  </div>
</div>

<!-- STRATEGY RECAP -->
<div class="section">
  <div class="section-label">Part 1 ¬∑ 5 min</div>
  <h2>Strategy Toolkit ‚Äî Quick Refresh</h2>
  <p>One last look at your core strategies before the final practice set. You've used these for 5 sessions ‚Äî they should feel automatic by now.</p>
  <div class="strat-grid">
    <div class="strat-card"><div class="strat-name">POE</div><div class="strat-desc">Eliminate wrong answers: too extreme, unsupported, off-topic, reversed, right words/wrong meaning.</div></div>
    <div class="strat-card"><div class="strat-name">POOD</div><div class="strat-desc">Grammar first, reading second ‚Äî bank the easier points.</div></div>
    <div class="strat-card"><div class="strat-name">LOTD</div><div class="strat-desc">Never blank. Same guessing letter every time.</div></div>
    <div class="strat-card"><div class="strat-name">Self-Correct</div><div class="strat-desc">Score ‚Üí diagnose ‚Üí THEN read explanations.</div></div>
  </div>
  <div class="callout"><strong>Final Set Reminder:</strong> This set is harder than Sets 1 & 2. If your score drops, don't panic ‚Äî focus on whether your <em>process</em> improved. Did you use POE? Did you manage time well? Process over score.</div>
</div>

<!-- TIMED PRACTICE -->
<div class="section">
  <div class="section-label">Part 2 ¬∑ 15 min</div>
  <h2>Practice Questions 11‚Äì20</h2>
  <p>This final set covers <strong>Expression of Ideas</strong> (Q11‚Äì14: Transitions & Rhetorical Synthesis) and <strong>Standard English Conventions</strong> (Q15‚Äì20: Semicolons, Nonessential Clauses, Participial Phrases, Subject-Verb Agreement, Appositives, Correlative Conjunctions). Try to answer all 10 within 15 minutes.</p>
  <div class="callout"><strong>Self-Correction Protocol:</strong> Try all questions FIRST without peeking at explanations. After you finish, click "Show Answers" to review. Score yourself before reading the explanations.</div>
  <div class="timer-bar" id="timerBar">
    <div class="timer-display" id="timerDisplay">15:00</div>
    <button class="timer-btn" id="timerStart" onclick="startTimer()">‚ñ∂ Start Timer</button>
    <button class="timer-btn outline" onclick="resetTimer()">‚Ü∫ Reset</button>
  </div>
  <div id="satQuestions"></div>
  <div style="text-align:center;margin:12px 0">
    <button class="btn" id="showBtn" onclick="showAllAnswers()">Show All Answers</button>
  </div>
  <div id="satScore" class="ex-score"></div>
</div>

<!-- ERROR TYPE CODES -->
<div class="section">
  <div class="section-label">Part 3</div>
  <h2>Error Type Codes</h2>
  <p>You've seen these before. Use them one last time to classify your errors below. By now, you should notice patterns in which codes come up most often.</p>
  <div class="ec-grid">
    <div class="ec-card"><div class="ec-code" style="color:var(--wrong)">MR</div><div class="ec-name">Misread</div><div class="ec-desc">Didn't read the passage or question carefully enough</div></div>
    <div class="ec-card"><div class="ec-code" style="color:var(--craft)">CG</div><div class="ec-name">Content Gap</div><div class="ec-desc">Didn't know the grammar rule or vocabulary</div></div>
    <div class="ec-card"><div class="ec-code" style="color:var(--express)">TF</div><div class="ec-name">Trap/Distractor</div><div class="ec-desc">Wrong answer seemed right because it used passage words</div></div>
    <div class="ec-card"><div class="ec-code" style="color:#f97316">RS</div><div class="ec-name">Rushed</div><div class="ec-desc">Went too fast and made a careless mistake</div></div>
    <div class="ec-card"><div class="ec-code" style="color:var(--info)">OT</div><div class="ec-name">Overthought</div><div class="ec-desc">Talked myself out of the right answer</div></div>
    <div class="ec-card"><div class="ec-code" style="color:var(--muted)">GS</div><div class="ec-name">Guessed</div><div class="ec-desc">Ran out of time or had no idea</div></div>
  </div>
</div>

<!-- ERROR LOG -->
<div class="section">
  <div class="section-label">Part 4 ¬∑ Interactive</div>
  <h2>Error Log</h2>
  <p>For every question you got wrong, select the domain and error type. The summary updates automatically.</p>
  <div class="elog" id="errorLog"></div>
</div>

<!-- PROGRESS TRACKER -->
<div class="section">
  <div class="section-label">Part 5 ¬∑ Course Review</div>
  <h2>Progress Tracker: Sets 1‚Äì3</h2>
  <p>Enter your scores from all three practice sets to see your growth across the course. Look for trends ‚Äî are you getting stronger in specific domains?</p>
  <div class="card">
    <table class="progress-table">
      <thead>
        <tr><th>Domain</th><th>Set 1</th><th>Set 2</th><th>Set 3</th><th>Trend</th></tr>
      </thead>
      <tbody id="progressBody"></tbody>
    </table>
  </div>
</div>

<!-- CONFIDENCE RATER -->
<div class="section">
  <div class="section-label">Part 5 (continued)</div>
  <h2>Skill Confidence Check</h2>
  <p>Rate your confidence on each skill area from 1 (not confident) to 4 (very confident). Be honest ‚Äî this helps you target your remaining study time.</p>
  <div class="conf-grid" id="confGrid"></div>
</div>

<!-- FINAL REFLECTIONS -->
<div class="section">
  <div class="section-label">Part 6 ¬∑ Final Reflection</div>
  <h2>Final Reflection Questions</h2>
  <p>These are the most important questions of the course. Answer them carefully ‚Äî they'll guide your study between now and test day.</p>
  <div id="reflections"></div>
  <div style="text-align:center;margin-top:12px">
    <button class="btn btn-sm" onclick="exportReflections()">üìã Export Full Course Report</button>
  </div>
</div>

<!-- STRATEGY TOOLKIT REFERENCE -->
<div class="section">
  <div class="section-label">Reference</div>
  <h2>Your Strategy Toolkit ‚Äî Quick Reference</h2>
  <p>Keep these strategies in mind on test day.</p>
  <div class="toolkit-card"><div class="toolkit-name">POE</div><div class="toolkit-desc">Eliminate wrong answers: too extreme, unsupported, off-topic, reversed, right words/wrong meaning.</div></div>
  <div class="toolkit-card"><div class="toolkit-name">POOD</div><div class="toolkit-desc">Grammar first, reading second ‚Äî bank the easier points.</div></div>
  <div class="toolkit-card"><div class="toolkit-name">LOTD</div><div class="toolkit-desc">Never blank. Same letter every guess.</div></div>
  <div class="toolkit-card"><div class="toolkit-name">Self-Correct</div><div class="toolkit-desc">Score ‚Üí diagnose ‚Üí THEN read explanations.</div></div>
  <div class="toolkit-card"><div class="toolkit-name">Data Check</div><div class="toolkit-desc">For quantitative evidence: does the answer match what the data ACTUALLY says?</div></div>
  <div class="toolkit-card"><div class="toolkit-name">Two-Part Trap</div><div class="toolkit-desc">Wrong answers often get one thing right, one wrong. Read every word.</div></div>
  <div class="toolkit-card"><div class="toolkit-name">Semicolon Rule</div><div class="toolkit-desc">[clause]; however, [clause] ‚Äî semicolon before, comma after conjunctive adverb.</div></div>
</div>

<!-- CELEBRATION -->
<div class="section">
  <div class="celebrate-box">
    <h2>Course Complete!</h2>
    <p>You've built the strategies and skills to succeed.<br>Trust your POE instincts. Stay disciplined with pacing.<br><strong>You've got this!</strong></p>
    <div class="celebrate-stats">
      <div class="celebrate-stat"><div class="num">6</div><div class="label">Sessions</div></div>
      <div class="celebrate-stat"><div class="num">60</div><div class="label">Questions</div></div>
      <div class="celebrate-stat"><div class="num">3</div><div class="label">Practice Sets</div></div>
    </div>
    <p style="margin-top:18px;font-size:.9rem;color:var(--muted)">Good luck on test day! üéØ</p>
  </div>
</div>

<div class="mod-nav">
  <a href="module-5.html">‚Üê Session 5</a>
  <a href="index.html">Back to Course Home ‚Üí</a>
</div>
</div>

<script>
// ============ TIMER ============
let timerSec=900,timerInt=null,timerRunning=false;
function updateTimerUI(){
  const m=Math.floor(timerSec/60),s=timerSec%60;
  const el=document.getElementById('timerDisplay');
  el.textContent=`${m}:${s.toString().padStart(2,'0')}`;
  el.className='timer-display'+(timerRunning?' running':'')+(timerSec===0?' done':'')+(timerSec<=120&&timerSec>0?' warning':'');
}
function startTimer(){
  if(timerRunning)return;timerRunning=true;
  document.getElementById('timerStart').textContent='‚è∏ Running';
  timerInt=setInterval(()=>{
    if(timerSec>0){timerSec--;updateTimerUI();}
    else{clearInterval(timerInt);timerRunning=false;document.getElementById('timerStart').textContent='‚è∞ Time!';}
  },1000);
}
function resetTimer(){clearInterval(timerInt);timerRunning=false;timerSec=900;updateTimerUI();document.getElementById('timerStart').textContent='‚ñ∂ Start Timer';}
updateTimerUI();

// ============ PRACTICE QUESTIONS ============
const QS=[
  {domain:'Expression of Ideas',skill:'Transitions',
   passage:'High microplastics in Arctic sea ice initially surprised researchers ‚Äî Arctic is thousands of miles from population centers. _________ scientists understand ocean currents transport microplastics from industrialized coasts to polar waters, where particles become trapped in forming ice.',
   stem:'Which transition best completes the text?',
   choices:['In other words,','For instance,','Consequently,','Since then, however,'],
   correct:3,fb:'"Since then, however," captures temporal shift (understanding came AFTER surprise) + contrast (surprised, but NOW they understand). "In other words" = restatement, but the second sentence is NEW understanding, not rephrasing. "For instance" = example, but ocean current explanation is a resolution, not an example. "Consequently" = result, but the emphasis is on temporal shift + contrast, not strict causation.'},
  {domain:'Expression of Ideas',skill:'Transitions',
   passage:'Many people assume creative genius = sudden flashes of inspiration. _________ research consistently shows breakthroughs follow years of deliberate practice, deep domain knowledge, and sustained engagement ‚Äî \'prepared mind\' creativity.',
   stem:'Which transition best completes the text?',
   choices:['Similarly,','In reality,','Not surprisingly,','For this reason,'],
   correct:1,fb:'"In reality" corrects a misconception ‚Äî common assumption (sudden inspiration) vs. what research shows (deliberate practice). Perfect myth-vs-fact bridge. "Similarly" = agreement, but the second sentence CONTRADICTS the first. "Not surprisingly" implies findings are expected, but they contradict what "many people assume." "For this reason" implies research was caused by the assumption ‚Äî makes no logical sense.'},
  {domain:'Expression of Ideas',skill:'Rhetorical Synthesis',
   passage:'Student notes on vertical farming:<br>- Grow crops in stacked indoor layers with LED lighting<br>- Same yield as 400 acres traditional farmland<br>- 95% less water via hydroponics<br>- 30-50% more expensive due to LED energy costs<br>- Year-round operation, near cities<br><br>Goal: Present as promising but imperfect solution.',
   stem:'Which choice most effectively accomplishes this?',
   choices:['Vertical farms use LED lighting indoors and produce the same yield as 400 acres.','Although vertical farming offers remarkable advantages ‚Äî 95% less water, year-round operation, high yields near cities ‚Äî LED lighting makes it 30-50% more expensive, a barrier to widespread adoption.','Located near cities, vertical farms use hydroponics to reduce water use and transportation.','High energy costs make vertical farming impractical despite water efficiency.'],
   correct:1,fb:'"Although" clause stacks 3 advantages; main clause presents the key limitation (cost). Final phrase frames as "promising but not yet viable." Both halves addressed with specific data. A = only advantages. C = only benefits. D = too negative ("impractical" loses the "promising" half).'},
  {domain:'Expression of Ideas',skill:'Rhetorical Synthesis',
   passage:'A professor wants to recommend a student for a research internship. The letter should highlight the student\'s ability to work independently in challenging field conditions.',
   stem:'Which most effectively accomplishes this?',
   choices:['Mariana earns top grades and participates actively in class discussions.','Mariana has read extensively in marine biology and discusses literature with unusual depth.','During a coral reef survey in the Florida Keys, Mariana independently managed a data station for two weeks when her partner fell ill, working alone in open-water conditions with unpredictable currents, collecting the most accurate data set of any team.','Mariana is well-liked and served as Marine Biology Club president.'],
   correct:2,fb:'"Independently managed" = independent work. "Partner fell ill" = adapted to challenges. "Open-water with unpredictable currents" = challenging conditions. "Most accurate data" = excellent results. Every element matches the prompt. A = classroom settings. B = reading/knowledge. D = social/organizational skills.'},
  {domain:'Standard English',skill:'Semicolons + Conjunctive Adverbs',
   passage:'The study found mentored students earned higher grades; _________ the mentored students also reported greater confidence.',
   stem:'Which conforms to Standard English?',
   choices:['moreover,','moreover','moreover;','moreover.'],
   correct:0,fb:'After a semicolon, conjunctive adverb "moreover" gets a comma: [clause]; moreover, [clause]. Correct pattern. B = missing comma after "moreover." C = second semicolon creates awkward 3-segment sentence. D = period after "moreover" creates a fragment.'},
  {domain:'Standard English',skill:'Nonessential Clauses',
   passage:'The filmmaker, whose documentary about climate change won three international _________ announced that her next project would focus on ocean acidification.',
   stem:'Which conforms to Standard English?',
   choices:['awards announced','awards, announced','awards; announced','awards. Announced'],
   correct:1,fb:'Nonessential clause correctly enclosed by paired commas. Main sentence: "The filmmaker announced that..." The "whose...awards" clause is a removable aside, opened with a comma before "whose" and needing a closing comma after "awards." A = missing closing comma. C = semicolon can\'t close a nonessential clause. D = period splits mid-sentence, creating a fragment.'},
  {domain:'Standard English',skill:'Introductory Participial Phrases',
   passage:'Having completed the advanced training _________ the paramedic was certified to perform emergency procedures previously restricted to physicians.',
   stem:'Which conforms to Standard English?',
   choices:['program the paramedic','program; the paramedic','program, the paramedic','program. The paramedic'],
   correct:2,fb:'Comma correctly separates introductory participial phrase from main clause. Subject "the paramedic" properly follows the comma (no dangling modifier). A = no punctuation, run-on. B = semicolon joins independent clauses, but "Having completed..." can\'t stand alone. D = period creates fragment.'},
  {domain:'Standard English',skill:'Subject-Verb Agreement + Verb Forms',
   passage:'The journalist reported that the company\'s profits _________ steadily over the past five quarters, a trend analysts attributed to increasing demand.',
   stem:'Which conforms to Standard English?',
   choices:['has risen','had risen','have rose','have risen'],
   correct:3,fb:'"Have risen" = plural present perfect. Matches plural "profits" and time signal "over the past five quarters" (past to present). "Risen" = correct past participle. A = "has" is singular but "profits" is plural. B = "had risen" is past perfect (before another past action), but "over the past five quarters" connects to present. C = "rose" is simple past, not a past participle.'},
  {domain:'Standard English',skill:'Appositive Phrases',
   passage:'The town\'s oldest building, a stone church constructed in _________ served as a hospital during the Civil War and later as the first public school.',
   stem:'Which conforms to Standard English?',
   choices:['1782,','1782','1782;','1782.'],
   correct:0,fb:'Appositive "a stone church constructed in 1782" needs a closing comma. Opening comma before "a stone church" ‚Üí closing comma after "1782." Main sentence: "The town\'s oldest building served as a hospital." B = missing closing comma. C = semicolon can\'t close an appositive. D = period splits the sentence into two fragments.'},
  {domain:'Standard English',skill:'Correlative Conjunctions',
   passage:'Neither the proposed budget cuts _________ the hiring freeze will take effect until the board reviews the quarterly financial report.',
   stem:'Which conforms to Standard English?',
   choices:['or','and','nor','but'],
   correct:2,fb:'"Neither...nor" = correct correlative pair. Always together. Meaning: not the cuts AND also not the freeze will take effect. "Neither...or" (A) = common speech error but incorrect in Standard English. "Neither...and" (B) = not a valid pair. "Neither...but" (D) = invalid, "but" signals contrast.'},
];
const DOM_COLORS={
  'Expression of Ideas':{bg:'rgba(251,191,36,.15)',color:'#fbbf24'},
  'Standard English':{bg:'rgba(248,113,113,.15)',color:'#f87171'},
};
let satAns={};let answersShown=false;
function renderSAT(){
  document.getElementById('satQuestions').innerHTML=QS.map((q,i)=>{
    const ans=satAns[i];const has=ans!==undefined;const showFb=answersShown&&has;
    const dc=DOM_COLORS[q.domain]||{bg:'rgba(200,16,46,.15)',color:'#C8102E'};
    return `<div class="sat-q">
      <div class="ex-num"><span class="domain-tag" style="background:${dc.bg};color:${dc.color}">${q.domain}</span> ${q.skill} ¬∑ Q${i+11}</div>
      <div class="sat-passage">${q.passage}</div>
      <div class="sat-stem">${q.stem}</div>
      <div class="sat-choices">${q.choices.map((ch,ci)=>{
        let cls='sat-choice';
        if(answersShown&&has){cls+=' sc-dis';if(ci===q.correct)cls+=' sc-correct';else if(ci===ans&&ci!==q.correct)cls+=' sc-wrong';}
        return `<div class="${cls}" style="${has&&ci===ans&&!answersShown?'border-color:var(--accent);background:var(--accent-light)':''}" onclick="pickAns(${i},${ci})"><div class="sc-letter">${'ABCD'[ci]}</div><div>${ch}</div></div>`;
      }).join('')}</div>
      <div class="sat-fb${showFb?' show':''}${showFb?(ans===q.correct?' sfb-correct':' sfb-wrong'):''}">${showFb?(ans===q.correct?'‚úì Correct! ':'‚úó Incorrect. ')+q.fb:''}</div></div>`;
  }).join('');
  if(answersShown){
    const t=QS.length,c=Object.entries(satAns).filter(([i,v])=>v===QS[i].correct).length;
    document.getElementById('satScore').innerHTML=`<strong style="color:${c>=8?'var(--correct)':c>=5?'var(--express)':'var(--wrong)'}">${c}/${t} correct</strong> (${Math.round(c/t*100)}%)`;
    document.getElementById('showBtn').style.display='none';
    renderErrorLog();
  }
}
function pickAns(i,ci){if(answersShown)return;satAns[i]=ci;renderSAT();}
function showAllAnswers(){
  if(Object.keys(satAns).length<QS.length){
    const missing=QS.length-Object.keys(satAns).length;
    if(!confirm(`You have ${missing} unanswered question${missing>1?'s':''}. Show answers anyway?`))return;
  }
  answersShown=true;if(timerRunning){clearInterval(timerInt);timerRunning=false;}
  renderSAT();
}
renderSAT();

// ============ ERROR LOG ============
const DOMAINS=['Expression of Ideas','Standard English','Information & Ideas','Craft & Structure'];
const ETYPES=['MR ‚Äî Misread','CG ‚Äî Content Gap','TF ‚Äî Trap/Distractor','RS ‚Äî Rushed','OT ‚Äî Overthought','GS ‚Äî Guessed'];
const ETYPE_COLORS={'MR':'var(--wrong)','CG':'var(--craft)','TF':'var(--express)','RS':'#f97316','OT':'var(--info)','GS':'var(--muted)'};
const ELK='pp_p89rw_s6_elog';
function loadEL(){return JSON.parse(localStorage.getItem(ELK)||'{}');}
function saveEL(d){localStorage.setItem(ELK,JSON.stringify(d));}

function renderErrorLog(){
  const el=loadEL();
  const wrongQs=[];
  if(answersShown){
    QS.forEach((q,i)=>{if(satAns[i]!==undefined&&satAns[i]!==q.correct)wrongQs.push(i);});
  }
  
  let html=`<h3>üìã Error Log</h3><div class="elog-sub">${wrongQs.length===0&&answersShown?'No errors! Great work on the final set!':'Log each error with its domain and error type.'}</div>`;
  
  if(wrongQs.length>0){
    html+=`<div class="elog-row"><div class="elog-head">Q#</div><div class="elog-head">Domain</div><div class="elog-head">Error Type</div><div class="elog-head">Skill</div></div>`;
    wrongQs.forEach(i=>{
      const q=QS[i];
      html+=`<div class="elog-row">
        <div class="elog-qnum">${i+11}</div>
        <div><select class="elog-sel" onchange="updateEL(${i},'dom',this.value)"><option value="">‚Äî</option>${DOMAINS.map(d=>`<option${el[i]?.dom===d?' selected':''}>${d}</option>`).join('')}</select></div>
        <div><select class="elog-sel" onchange="updateEL(${i},'et',this.value)"><option value="">‚Äî</option>${ETYPES.map(e=>`<option${el[i]?.et===e?' selected':''}>${e}</option>`).join('')}</select></div>
        <div style="font-size:.8rem;color:var(--muted)">${q.skill}</div></div>`;
    });
    
    const etCounts={};const domCounts={};
    wrongQs.forEach(i=>{
      const d=el[i];if(!d)return;
      if(d.et){const code=d.et.split(' ‚Äî ')[0];etCounts[code]=(etCounts[code]||0)+1;}
      if(d.dom){domCounts[d.dom]=(domCounts[d.dom]||0)+1;}
    });
    const maxET=Math.max(1,...Object.values(etCounts));
    const maxDom=Math.max(1,...Object.values(domCounts));
    
    html+=`<div class="elog-summary"><h4>Error Summary</h4>`;
    if(Object.keys(etCounts).length>0){
      html+=`<div style="font-size:.78rem;font-weight:700;color:var(--muted);margin-bottom:6px;text-transform:uppercase;letter-spacing:1px">By Type</div>`;
      Object.entries(etCounts).sort((a,b)=>b[1]-a[1]).forEach(([k,v])=>{
        html+=`<div class="elog-bar-row"><div class="elog-bar-label" style="color:${ETYPE_COLORS[k]||'var(--muted)'}">${k}</div><div class="elog-bar"><div class="elog-bar-fill" style="width:${v/maxET*100}%;background:${ETYPE_COLORS[k]||'var(--muted)'}"></div></div><div class="elog-bar-val">${v}</div></div>`;
      });
    }
    if(Object.keys(domCounts).length>0){
      html+=`<div style="font-size:.78rem;font-weight:700;color:var(--muted);margin:10px 0 6px;text-transform:uppercase;letter-spacing:1px">By Domain</div>`;
      const domColors={'Expression of Ideas':'var(--express)','Standard English':'var(--convention)','Information & Ideas':'var(--info)','Craft & Structure':'var(--craft)'};
      Object.entries(domCounts).sort((a,b)=>b[1]-a[1]).forEach(([k,v])=>{
        html+=`<div class="elog-bar-row"><div class="elog-bar-label" style="color:${domColors[k]||'#ccc'}">${k}</div><div class="elog-bar"><div class="elog-bar-fill" style="width:${v/maxDom*100}%;background:${domColors[k]||'var(--muted)'}"></div></div><div class="elog-bar-val">${v}</div></div>`;
      });
    }
    html+=`</div>`;
  } else if(!answersShown){
    html+=`<p style="color:var(--muted);font-size:.88rem;text-align:center;padding:20px 0">Complete the practice questions and click "Show Answers" to populate the error log.</p>`;
  }
  
  document.getElementById('errorLog').innerHTML=html;
}
function updateEL(i,field,val){const d=loadEL();if(!d[i])d[i]={};d[i][field]=val;saveEL(d);renderErrorLog();}
renderErrorLog();

// ============ PROGRESS TRACKER ============
const PROG_DOMAINS=[
  {name:'Information & Ideas',max:[5,6,6]},
  {name:'Craft & Structure',max:[3,4,4]},
  {name:'Expression of Ideas',max:[4,4,4]},
  {name:'Std. English Conv.',max:[8,6,6]},
  {name:'TOTAL',max:[20,20,20]},
];
const PK='pp_p89rw_s6_progress';
function loadProg(){return JSON.parse(localStorage.getItem(PK)||'{}');}
function saveProg(d){localStorage.setItem(PK,JSON.stringify(d));}

function renderProgress(){
  const d=loadProg();
  document.getElementById('progressBody').innerHTML=PROG_DOMAINS.map((dom,di)=>{
    const isTotal=dom.name==='TOTAL';
    const cells=[1,2,3].map(s=>{
      const key=`${di}_${s}`;
      const max=dom.max[s-1];
      if(isTotal){
        // Auto-calculate totals
        let sum=0;let hasAny=false;
        PROG_DOMAINS.forEach((pd,pi)=>{if(pi<4){const v=d[`${pi}_${s}`];if(v!==undefined&&v!==''){sum+=parseInt(v)||0;hasAny=true;}}});
        return `<td><span style="font-family:'JetBrains Mono',monospace;color:${hasAny?'var(--ink)':'var(--muted)'}">${hasAny?sum:'‚Äî'}</span><span style="color:var(--muted);font-size:.8rem">/${max}</span></td>`;
      }
      return `<td><input class="score-input" type="number" min="0" max="${max}" value="${d[key]||''}" placeholder="‚Äî" onchange="updateProg('${key}',this.value)"><span style="color:var(--muted);font-size:.8rem">/${max}</span></td>`;
    });
    // Trend
    const vals=[1,2,3].map(s=>{
      if(isTotal){
        let sum=0;let hasAny=false;
        PROG_DOMAINS.forEach((pd,pi)=>{if(pi<4){const v=d[`${pi}_${s}`];if(v!==undefined&&v!==''){sum+=parseInt(v)||0;hasAny=true;}}});
        return hasAny?sum/dom.max[s-1]:null;
      }
      const v=d[`${di}_${s}`];
      return v!==undefined&&v!==''?parseInt(v)/dom.max[s-1]:null;
    });
    let trend='‚Äî';
    const validVals=vals.filter(v=>v!==null);
    if(validVals.length>=2){
      const diff=validVals[validVals.length-1]-validVals[0];
      if(diff>0.05)trend='üìà';
      else if(diff<-0.05)trend='üìâ';
      else trend='‚û°Ô∏è';
    }
    return `<tr style="${isTotal?'font-weight:700':''}"><td style="${isTotal?'border-top:2px solid var(--accent)':''}${isTotal?';font-weight:700':''}">${dom.name}</td>${cells.join('')}<td class="trend-cell" style="${isTotal?'border-top:2px solid var(--accent)':''}">${trend}</td></tr>`;
  }).join('');
}
function updateProg(key,val){const d=loadProg();d[key]=val;saveProg(d);renderProgress();}
renderProgress();

// ============ CONFIDENCE RATER ============
const CONF_SKILLS=[
  'Main Idea / Central Claim','Textual Evidence','Inferences','Vocabulary in Context',
  'Purpose & Point of View','Text Structure','Rhetorical Synthesis','Transitions',
  'Subject-Verb Agreement','Verb Tense & Forms','Pronoun-Antecedent Agreement',
  'Comma & Punctuation Rules','Sentence Structure / Boundaries','Nonessential Clauses & Appositives'
];
const CK='pp_p89rw_s6_conf';
function loadConf(){return JSON.parse(localStorage.getItem(CK)||'{}');}
function saveConf(d){localStorage.setItem(CK,JSON.stringify(d));}

function renderConf(){
  const d=loadConf();
  document.getElementById('confGrid').innerHTML=CONF_SKILLS.map((sk,si)=>{
    const val=d[si]||0;
    return `<div class="conf-row">
      <div class="conf-label">${sk}</div>
      <div class="conf-dots">${[1,2,3,4].map(n=>
        `<div class="conf-dot${val===n?` active-${n}`:''}" onclick="setConf(${si},${n})">${n}</div>`
      ).join('')}</div>
    </div>`;
  }).join('');
}
function setConf(si,val){const d=loadConf();d[si]=d[si]===val?0:val;saveConf(d);renderConf();}
renderConf();

// ============ REFLECTIONS ============
const REFLECT_QS=[
  'Set 3 is harder. If your score dropped, which question types caused trouble ‚Äî content gaps or strategy errors?',
  'Look across all 3 sets. Is one error type (MR, CG, TF, RS, OT, GS) recurring? What will you do about it?',
  'Which domain showed the most consistent improvement? Which has been most stubborn?',
  'Did any Set 3 questions require aggressive POE (eliminating 2‚Äì3 before choosing)?',
  'If you could study ONE grammar rule before the real test, which would it be?',
  'What is your goal score for a future Practice Set 4? What specific actions will get you there?',
];
const RK='pp_p89rw_s6_reflect';
function loadR(){return JSON.parse(localStorage.getItem(RK)||'{}');}
function saveR(d){localStorage.setItem(RK,JSON.stringify(d));}
function renderReflect(){
  const d=loadR();
  document.getElementById('reflections').innerHTML=REFLECT_QS.map((q,i)=>`
    <div class="reflect-q"><span class="reflect-num">${i+1}</span><span class="reflect-text">${q}</span>
    <textarea class="reflect-input" placeholder="Your answer..." oninput="saveReflect(${i},this.value)">${d[i]||''}</textarea></div>`).join('');
}
function saveReflect(i,v){const d=loadR();d[i]=v;saveR(d);}
renderReflect();

// ============ EXPORT ============
function exportReflections(){
  const el=loadEL();const r=loadR();const prog=loadProg();const conf=loadConf();
  let t='SESSION 6 ‚Äî FULL COURSE REPORT ‚Äî PantherPrep PSAT 8/9 R&W\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
  if(answersShown){
    const c=Object.entries(satAns).filter(([i,v])=>v===QS[i].correct).length;
    t+=`SET 3 SCORE: ${c}/${QS.length} (${Math.round(c/QS.length*100)}%)\n\n`;
  }
  t+='PROGRESS TRACKER (Sets 1-3):\n';
  PROG_DOMAINS.forEach((dom,di)=>{
    const scores=[1,2,3].map(s=>{
      if(dom.name==='TOTAL'){
        let sum=0;let hasAny=false;
        PROG_DOMAINS.forEach((pd,pi)=>{if(pi<4){const v=prog[`${pi}_${s}`];if(v!==undefined&&v!==''){sum+=parseInt(v)||0;hasAny=true;}}});
        return hasAny?`${sum}/${dom.max[s-1]}`:'‚Äî';
      }
      const v=prog[`${di}_${s}`];return v?`${v}/${dom.max[s-1]}`:'‚Äî';
    });
    t+=`  ${dom.name}: ${scores.join(' | ')}\n`;
  });
  t+='\nSKILL CONFIDENCE:\n';
  CONF_SKILLS.forEach((sk,si)=>{
    const v=conf[si]||0;
    t+=`  ${sk}: ${'‚óè'.repeat(v)+'‚óã'.repeat(4-v)} (${v}/4)\n`;
  });
  t+='\nERROR LOG:\n';
  Object.entries(el).forEach(([i,d])=>{t+=`  Q${parseInt(i)+11}: ${d.dom||'‚Äî'} | ${d.et||'‚Äî'} | ${QS[i]?.skill||''}\n`;});
  t+='\nFINAL REFLECTIONS:\n';
  REFLECT_QS.forEach((q,i)=>{t+=`  ${i+1}. ${q}\n     ‚Üí ${r[i]||'(not answered)'}\n\n`;});
  navigator.clipboard.writeText(t).then(()=>alert('Copied to clipboard!')).catch(()=>{const a=document.createElement('textarea');a.value=t;document.body.appendChild(a);a.select();document.execCommand('copy');document.body.removeChild(a);alert('Copied!');});
}
</script>
<script src="/translate.js"></script></body>
</html>
