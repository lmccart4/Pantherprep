<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Session 3: Practice Set 2 ‚Äî PSAT 8/9 R&W ‚Äî PantherPrep</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--ink:#f0f0f0;--paper:#121212;--accent:#C8102E;--accent-light:rgba(200,16,46,.15);--border:#2a2a2a;--muted:#999;--surface:#1a1a1a;--craft:#60a5fa;--craft-bg:rgba(96,165,250,.1);--info:#34d399;--info-bg:rgba(52,211,153,.1);--express:#fbbf24;--express-bg:rgba(251,191,36,.1);--convention:#f87171;--convention-bg:rgba(248,113,113,.1);--correct:#22c55e;--correct-bg:rgba(34,197,94,.12);--wrong:#ef4444;--wrong-bg:rgba(239,68,68,.12)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);line-height:1.65}
.top-stripe{height:4px;background:linear-gradient(90deg,#C8102E 0%,#C8102E 50%,#fff 50%,#fff 100%);position:fixed;top:0;left:0;right:0;z-index:100}
.container{max-width:800px;margin:0 auto;padding:20px 20px 60px}
.back-link{display:inline-flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem;padding:8px 0;margin-top:8px;cursor:pointer;text-decoration:none}
.back-link:hover{color:var(--accent)}
.mod-header{padding:40px 0 30px;border-bottom:1px solid var(--border);margin-bottom:32px}
.mod-badge{display:inline-block;background:var(--craft);color:#000;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:14px}
.mod-header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700;margin-bottom:6px}
.mod-header .subtitle{color:var(--muted);font-size:1rem}
.mod-meta{display:flex;gap:20px;margin-top:14px;font-size:.82rem;color:var(--muted)}
.section{margin-bottom:36px}
.section-label{font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:6px}
.section h2{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:700;margin-bottom:12px}
.section p{color:#ccc;font-size:.93rem;margin-bottom:12px;line-height:1.7}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:12px}
.card-accent{border-left:3px solid var(--accent)}
.callout{background:var(--accent-light);border:1px solid rgba(200,16,46,.3);border-radius:10px;padding:14px 18px;margin-bottom:16px;font-size:.9rem}
.callout strong{color:var(--accent)}

/* SKILL FOCUS CARDS */
.skill-grid{display:grid;grid-template-columns:1fr;gap:10px;margin-bottom:16px}
.skill-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px 18px;cursor:pointer;transition:all .2s;position:relative;overflow:hidden}
.skill-card::before{content:'';position:absolute;left:0;top:0;bottom:0;width:4px;border-radius:4px 0 0 4px}
.skill-card.sk-inference::before{background:var(--info)}
.skill-card.sk-crosstext::before{background:var(--express)}
.skill-card.sk-strengthen::before{background:var(--craft)}
.skill-card:hover{border-color:var(--accent);transform:translateX(4px)}
.skill-name{font-weight:700;font-size:1rem;margin-bottom:4px}
.skill-desc{font-size:.85rem;color:var(--muted);line-height:1.5}
.skill-tip{display:none;margin-top:10px;padding:10px 12px;background:var(--paper);border-radius:8px;font-size:.84rem;color:#ddd;line-height:1.6;border:1px solid var(--border)}
.skill-card.open .skill-tip{display:block}
.skill-toggle{position:absolute;top:16px;right:16px;font-size:.75rem;color:var(--muted);transition:transform .2s}
.skill-card.open .skill-toggle{transform:rotate(180deg)}

/* STRATEGY RECAP */
.strat-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-bottom:16px}
.strat-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px;font-size:.85rem}
.strat-name{font-weight:700;color:var(--accent);margin-bottom:3px;font-size:.9rem}
.strat-desc{color:var(--muted);font-size:.82rem;line-height:1.5}

/* TIMER */
.timer-bar{background:var(--surface);border:2px solid var(--accent);border-radius:12px;padding:16px;text-align:center;margin-bottom:16px}
.timer-display{font-family:'JetBrains Mono',monospace;font-size:2.2rem;font-weight:700;margin-bottom:8px}
.timer-display.running{color:var(--express)}
.timer-display.done{color:var(--correct)}
.timer-display.warning{color:var(--wrong)}
.timer-btn{display:inline-block;padding:8px 24px;border:2px solid var(--accent);border-radius:8px;background:var(--accent);color:#fff;font-family:inherit;font-size:.9rem;font-weight:600;cursor:pointer;margin:0 4px;transition:all .15s}
.timer-btn:hover{background:#a00d24}
.timer-btn.outline{background:transparent;color:var(--accent)}
.timer-btn.outline:hover{background:var(--accent-light)}

/* SAT PRACTICE */
.sat-q{background:var(--paper);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:10px}
.sat-passage{background:var(--surface);border-left:3px solid var(--craft);padding:12px 14px;border-radius:0 8px 8px 0;font-size:.9rem;line-height:1.75;margin-bottom:12px;color:#ddd;font-style:italic}
.sat-stem{font-size:.95rem;font-weight:600;margin-bottom:10px}
.sat-choices{display:flex;flex-direction:column;gap:6px}
.sat-choice{display:flex;align-items:flex-start;gap:10px;padding:10px 12px;background:var(--surface);border:2px solid var(--border);border-radius:10px;cursor:pointer;font-size:.88rem;transition:all .15s}
.sat-choice:hover:not(.sc-dis){border-color:var(--accent);background:var(--accent-light)}
.sat-choice.sc-correct{border-color:var(--correct);background:var(--correct-bg)}
.sat-choice.sc-wrong{border-color:var(--wrong);background:var(--wrong-bg)}
.sat-choice.sc-dis{pointer-events:none;opacity:.6}
.sat-choice.sc-correct.sc-dis{opacity:1}
.sat-choice.sc-wrong.sc-dis{opacity:1}
.sc-letter{flex-shrink:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--border);font-weight:700;font-size:.78rem}
.sat-choice.sc-correct .sc-letter{background:var(--correct);color:#fff}
.sat-choice.sc-wrong .sc-letter{background:var(--wrong);color:#fff}
.sat-fb{margin-top:8px;padding:10px;border-radius:8px;font-size:.82rem;line-height:1.5;display:none}
.sat-fb.show{display:block}
.sat-fb.sfb-correct{background:var(--correct-bg);border:1px solid var(--correct)}
.sat-fb.sfb-wrong{background:var(--wrong-bg);border:1px solid var(--wrong)}
.domain-tag{display:inline-block;font-size:.68rem;font-weight:700;letter-spacing:.5px;text-transform:uppercase;padding:2px 8px;border-radius:10px;margin-right:6px}
.ex-num{font-size:.78rem;font-weight:700;color:var(--muted);margin-bottom:6px}
.ex-score{text-align:center;padding:10px 0;font-size:.88rem;color:var(--muted)}

/* ERROR CODES */
.ec-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:8px;margin-bottom:16px}
.ec-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center}
.ec-code{font-family:'JetBrains Mono',monospace;font-size:1.4rem;font-weight:700;margin-bottom:2px}
.ec-name{font-weight:700;font-size:.85rem;margin-bottom:2px}
.ec-desc{font-size:.78rem;color:var(--muted);line-height:1.4}

/* ERROR LOG */
.elog{background:var(--surface);border:2px solid var(--convention);border-radius:14px;padding:22px;margin-bottom:16px}
.elog h3{font-family:'Cormorant Garamond',serif;font-size:1.2rem;margin-bottom:4px}
.elog-sub{font-size:.85rem;color:var(--muted);margin-bottom:14px}
.elog-row{display:grid;grid-template-columns:50px 1fr 1fr 1fr;gap:8px;align-items:center;padding:8px 0;border-bottom:1px solid var(--border);font-size:.84rem}
.elog-row:last-child{border-bottom:none}
.elog-head{font-weight:700;font-size:.72rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted)}
.elog-qnum{font-weight:700;font-family:'JetBrains Mono',monospace;text-align:center}
.elog-sel{padding:5px 8px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.82rem;width:100%}
.elog-sel:focus{border-color:var(--convention);outline:none}
.elog-summary{margin-top:16px;padding:14px;background:var(--paper);border-radius:10px;border:1px solid var(--border)}
.elog-summary h4{margin-bottom:8px;font-size:.95rem}
.elog-bar-row{display:flex;align-items:center;gap:8px;margin-bottom:6px}
.elog-bar-label{width:120px;font-size:.82rem;color:#ccc;flex-shrink:0}
.elog-bar{flex:1;height:10px;background:var(--border);border-radius:5px;overflow:hidden}
.elog-bar-fill{height:100%;border-radius:5px;transition:width .3s}
.elog-bar-val{font-family:'JetBrains Mono',monospace;font-size:.78rem;color:var(--muted);width:30px;text-align:right;flex-shrink:0}

/* REFLECTION */
.reflect-q{background:var(--paper);border-radius:10px;padding:14px;margin-bottom:8px;border:1px solid var(--border)}
.reflect-num{display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;background:var(--accent);color:#fff;font-weight:700;font-size:.75rem;margin-right:8px}
.reflect-text{font-size:.9rem;color:#ccc;display:inline}
.reflect-input{width:100%;padding:8px 10px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.85rem;margin-top:8px;resize:vertical;min-height:40px}
.reflect-input:focus{border-color:var(--accent);outline:none}

/* MINI-QUIZ (interactive skill check) */
.miniquiz{background:var(--surface);border:2px solid var(--info);border-radius:14px;padding:20px;margin-bottom:16px}
.miniquiz h3{font-family:'Cormorant Garamond',serif;font-size:1.15rem;margin-bottom:4px}
.miniquiz-sub{font-size:.85rem;color:var(--muted);margin-bottom:14px}
.mq-item{padding:14px;background:var(--paper);border:1px solid var(--border);border-radius:10px;margin-bottom:10px}
.mq-prompt{font-size:.9rem;font-weight:600;margin-bottom:10px}
.mq-opts{display:flex;flex-direction:column;gap:6px}
.mq-opt{display:flex;align-items:center;gap:10px;padding:8px 12px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.85rem;transition:all .15s}
.mq-opt:hover:not(.mq-dis){border-color:var(--accent);background:var(--accent-light)}
.mq-opt.mq-right{border-color:var(--correct);background:var(--correct-bg)}
.mq-opt.mq-nope{border-color:var(--wrong);background:var(--wrong-bg)}
.mq-opt.mq-dis{pointer-events:none;opacity:.55}
.mq-opt.mq-right.mq-dis,.mq-opt.mq-nope.mq-dis{opacity:1}
.mq-fb{margin-top:8px;font-size:.82rem;color:var(--muted);line-height:1.5;display:none}
.mq-fb.show{display:block}
.mq-score{text-align:center;font-size:.9rem;padding:10px 0;color:var(--muted);display:none}
.mq-score.show{display:block}

.btn{display:inline-block;background:var(--accent);color:#fff;font-family:inherit;font-size:.9rem;font-weight:600;padding:10px 24px;border:none;border-radius:8px;cursor:pointer;transition:all .2s}
.btn:hover{background:#a00d24}
.btn-sm{padding:8px 16px;font-size:.82rem}

.mod-nav{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-top:1px solid var(--border);margin-top:40px}
.mod-nav a{color:var(--accent);text-decoration:none;font-weight:600;font-size:.9rem;display:flex;align-items:center;gap:6px}
.mod-nav a:hover{text-decoration:underline}

/* PROGRESS RING */
.progress-ring-wrap{display:flex;align-items:center;gap:16px;margin-bottom:16px}
.progress-ring{position:relative;width:80px;height:80px}
.progress-ring svg{transform:rotate(-90deg)}
.progress-ring circle{fill:none;stroke-width:6}
.progress-ring .bg{stroke:var(--border)}
.progress-ring .fg{stroke:var(--correct);stroke-linecap:round;transition:stroke-dashoffset .5s ease}
.progress-ring .ring-label{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-family:'JetBrains Mono',monospace;font-size:1.1rem;font-weight:700}
.progress-stats{font-size:.88rem;color:#ccc;line-height:1.7}

@media(max-width:600px){.mod-meta{flex-wrap:wrap;gap:10px}.strat-grid{grid-template-columns:1fr}.ec-grid{grid-template-columns:1fr 1fr}.elog-row{grid-template-columns:40px 1fr 1fr}}
</style>
</head>
<body>
<div class="top-stripe"></div>
<div class="container">
<a class="back-link" href="index.html">‚Üê Back to R&W Course</a>

<div class="mod-header">
  <div class="mod-badge">Session 3 ¬∑ Practice</div>
  <h1>Practice Set 2 (Q1‚Äì10): Building Confidence</h1>
  <p class="subtitle">Info & Ideas and Craft & Structure ‚Äî inference, cross-text analysis, strengthen/weaken, and more.</p>
  <div class="mod-meta">
    <span>‚è± 60 minutes</span>
    <span>üìã 5 sections</span>
    <span>üî® Phase 2: Building Confidence</span>
  </div>
</div>

<!-- SKILL FOCUS -->
<div class="section">
  <div class="section-label">Part 1 ¬∑ 5 min</div>
  <h2>Set 2 Skill Focus</h2>
  <p>This practice set targets three key skill categories. Tap each card to reveal a strategy tip before you begin.</p>
  <div class="skill-grid">
    <div class="skill-card sk-inference" onclick="toggleSkill(this)">
      <span class="skill-toggle">‚ñº</span>
      <div class="skill-name">Inference Questions</div>
      <div class="skill-desc">Must be logically supported by text evidence ‚Äî not just plausible in real life.</div>
      <div class="skill-tip">üí° <strong>Strategy:</strong> The right answer is always the most directly supported by the passage. If you're thinking "that could be true in the real world," it's probably a trap. Ask yourself: "Does the text literally say or strongly imply this?"</div>
    </div>
    <div class="skill-card sk-crosstext" onclick="toggleSkill(this)">
      <span class="skill-toggle">‚ñº</span>
      <div class="skill-name">Cross-Text Questions</div>
      <div class="skill-desc">Focus on how authors respond to each other. Where do they agree? Disagree?</div>
      <div class="skill-tip">üí° <strong>Strategy:</strong> Summarize each text's position in one sentence before looking at the answer choices. The question usually asks how Text 2 would respond to Text 1 ‚Äî find the overlap and the difference.</div>
    </div>
    <div class="skill-card sk-strengthen" onclick="toggleSkill(this)">
      <span class="skill-toggle">‚ñº</span>
      <div class="skill-name">Strengthen / Weaken</div>
      <div class="skill-desc">Identify the specific claim, then find the most direct evidence for or against it.</div>
      <div class="skill-tip">üí° <strong>Strategy:</strong> First, underline the specific claim in the passage. Then for each answer choice, ask: "Does this make the claim MORE likely (strengthen) or LESS likely (weaken)?" Eliminate choices that are irrelevant to the actual claim.</div>
    </div>
  </div>
</div>

<!-- WARM-UP MINI-QUIZ -->
<div class="section">
  <div class="section-label">Part 1b ¬∑ Interactive Warm-Up</div>
  <h2>Quick Skill Check</h2>
  <p>Before diving into the full practice set, test your understanding of each skill type with these warm-up questions.</p>
  <div class="miniquiz" id="miniQuiz"></div>
</div>

<!-- TIMED PRACTICE -->
<div class="section">
  <div class="section-label">Part 2 ¬∑ 15 min</div>
  <h2>Practice Questions 1‚Äì10</h2>
  <p>This set covers <strong>Info & Ideas</strong> (Q1‚Äì6) and <strong>Craft & Structure</strong> (Q7‚Äì10). Try to answer all 10 within 15 minutes.</p>
  <div class="callout"><strong>Self-Correction Protocol:</strong> Try all questions FIRST without peeking at explanations. After you finish, click "Show Answers" to review. Score yourself before reading the explanations.</div>
  <div class="timer-bar" id="timerBar">
    <div class="timer-display" id="timerDisplay">15:00</div>
    <button class="timer-btn" id="timerStart" onclick="startTimer()">‚ñ∂ Start Timer</button>
    <button class="timer-btn outline" onclick="resetTimer()">‚Ü∫ Reset</button>
  </div>
  <div id="satQuestions"></div>
  <div style="text-align:center;margin:12px 0">
    <button class="btn" id="showBtn" onclick="showAllAnswers()">Show All Answers</button>
  </div>
  <div id="satScore" class="ex-score"></div>
</div>

<!-- PROGRESS SNAPSHOT -->
<div class="section" id="progressSection" style="display:none">
  <div class="section-label">Score Snapshot</div>
  <h2>Your Performance</h2>
  <div class="progress-ring-wrap">
    <div class="progress-ring">
      <svg width="80" height="80"><circle class="bg" cx="40" cy="40" r="34"/><circle class="fg" id="ringFg" cx="40" cy="40" r="34" stroke-dasharray="213.6" stroke-dashoffset="213.6"/></svg>
      <div class="ring-label" id="ringLabel">‚Äî</div>
    </div>
    <div class="progress-stats" id="progressStats"></div>
  </div>
</div>

<!-- ERROR TYPE CODES -->
<div class="section">
  <div class="section-label">Part 3</div>
  <h2>Error Type Codes</h2>
  <p>Use these codes to classify every error in your error log below. Understanding WHY you got something wrong is more important than knowing the right answer.</p>
  <div class="ec-grid">
    <div class="ec-card"><div class="ec-code" style="color:var(--wrong)">MR</div><div class="ec-name">Misread</div><div class="ec-desc">Didn't read the passage or question carefully enough</div></div>
    <div class="ec-card"><div class="ec-code" style="color:var(--craft)">CG</div><div class="ec-name">Content Gap</div><div class="ec-desc">Didn't know the concept or vocabulary</div></div>
    <div class="ec-card"><div class="ec-code" style="color:var(--express)">TF</div><div class="ec-name">Trap/Distractor</div><div class="ec-desc">Wrong answer seemed right because it used passage words or sounded logical</div></div>
    <div class="ec-card"><div class="ec-code" style="color:#f97316">RS</div><div class="ec-name">Rushed</div><div class="ec-desc">Went too fast and made a careless mistake</div></div>
    <div class="ec-card"><div class="ec-code" style="color:var(--info)">OT</div><div class="ec-name">Overthought</div><div class="ec-desc">Talked myself out of the right answer</div></div>
    <div class="ec-card"><div class="ec-code" style="color:var(--muted)">GS</div><div class="ec-name">Guessed</div><div class="ec-desc">Ran out of time or had no idea</div></div>
  </div>
</div>

<!-- ERROR LOG -->
<div class="section">
  <div class="section-label">Part 4 ¬∑ Interactive</div>
  <h2>Error Log</h2>
  <p>For every question you got wrong, select the domain and error type. The summary updates automatically.</p>
  <div class="elog" id="errorLog"></div>
</div>

<!-- REFLECTION -->
<div class="section">
  <div class="section-label">Part 5 (continued)</div>
  <h2>Reflection Questions</h2>
  <p>Answer these honestly ‚Äî they guide your study plan going forward.</p>
  <div id="reflections"></div>
  <div style="text-align:center;margin-top:12px">
    <button class="btn btn-sm" onclick="exportReflections()">üìã Export Error Log & Reflections</button>
  </div>
</div>

<!-- KEY TAKEAWAYS -->
<div class="section">
  <div class="section-label">Summary</div>
  <h2>Key Takeaways</h2>
  <div class="card card-accent">
    <ol style="padding-left:18px;font-size:.93rem;color:#ccc;line-height:2">
      <li>Inference answers must be <em>supported by the text</em> ‚Äî not just "true in real life."</li>
      <li>Cross-text questions test the <em>relationship</em> between authors: where they agree, disagree, or add nuance.</li>
      <li>Strengthen/weaken questions require you to identify the <em>specific claim</em> first, then evaluate each choice against it.</li>
      <li>"Controlling for" a variable means accounting for its effect ‚Äî not eliminating or ignoring it.</li>
      <li>Words-in-context questions almost always test a <em>secondary meaning</em> ‚Äî the obvious definition is usually the trap.</li>
    </ol>
  </div>
</div>

<div class="mod-nav">
  <a href="module-2.html">‚Üê Session 2: Practice Set 1</a>
  <a href="module-4.html">Session 4: Practice Set 2 (Q11‚Äì20) ‚Üí</a>
</div>
</div>

<script>
// ============ SKILL TOGGLE ============
function toggleSkill(el){el.classList.toggle('open');}

// ============ MINI-QUIZ ============
const MQ=[
  {prompt:'A study found that students who eat breakfast score higher on tests. The study controlled for sleep duration. What does "controlled for sleep duration" mean?',
   opts:['Only students who sleep 8+ hours were included','The researchers statistically accounted for differences in sleep so it wouldn\'t skew the results','Students were required to sleep the same amount','Sleep was found to have no effect on test scores'],
   ans:1,fb:'Controlling for a variable means using statistical methods to remove its influence ‚Äî ensuring observed effects aren\'t caused by it. It doesn\'t mean restricting participants or claiming it has no effect.'},
  {prompt:'Text 1 argues X is entirely caused by Factor A. Text 2 says Factor A played a role, but Factor B had already started the process. How would Text 2 respond to Text 1?',
   opts:['Completely reject Text 1\'s position','Agree with Text 1 but add a minor detail','Partially agree while arguing the cause is more complex','Argue that Factor A is irrelevant'],
   ans:2,fb:'Text 2 accepts Factor A\'s role ("played a role") but adds Factor B. This is a classic "partially agree but argue it\'s more complex" response ‚Äî the most common cross-text pattern on the PSAT.'},
  {prompt:'A researcher claims dark-colored animals absorb more heat. Which finding would WEAKEN this claim?',
   opts:['Dark-colored animals are more common in cold climates','A related species showed no temperature difference between dark and light members','Predators avoid dark-colored prey','Dark-colored animals are also larger on average'],
   ans:1,fb:'If a related species shows NO temperature difference between dark and light, it directly challenges the claim that color affects heat absorption. The other choices address different topics (distribution, predation, body size).'},
];
let mqAns={};
function renderMQ(){
  let h='<h3>üéØ Warm-Up Quiz</h3><div class="miniquiz-sub">3 quick questions to prime your brain for Set 2\'s skill types.</div>';
  MQ.forEach((q,i)=>{
    const picked=mqAns[i];const done=picked!==undefined;
    h+=`<div class="mq-item"><div class="mq-prompt">${i+1}. ${q.prompt}</div><div class="mq-opts">`;
    q.opts.forEach((o,oi)=>{
      let cls='mq-opt';
      if(done){cls+=' mq-dis';if(oi===q.ans)cls+=' mq-right';else if(oi===picked&&oi!==q.ans)cls+=' mq-nope';}
      h+=`<div class="${cls}" onclick="pickMQ(${i},${oi})">${o}</div>`;
    });
    h+=`</div><div class="mq-fb${done?' show':''}">${done?(picked===q.ans?'‚úì Correct! ':'‚úó Not quite. ')+q.fb:''}</div></div>`;
  });
  const total=Object.keys(mqAns).length;
  const correct=Object.entries(mqAns).filter(([i,v])=>v===MQ[i].ans).length;
  h+=`<div class="mq-score${total===MQ.length?' show':''}">${correct}/${MQ.length} correct ‚Äî ${correct===MQ.length?'Perfect! You\'re ready for the practice set.':correct>=2?'Nice work! Keep these strategies in mind.':'Review the tips above before starting the practice set.'}</div>`;
  document.getElementById('miniQuiz').innerHTML=h;
}
function pickMQ(i,oi){if(mqAns[i]!==undefined)return;mqAns[i]=oi;renderMQ();}
renderMQ();

// ============ TIMER ============
let timerSec=900,timerInt=null,timerRunning=false;
function updateTimerUI(){
  const m=Math.floor(timerSec/60),s=timerSec%60;
  const el=document.getElementById('timerDisplay');
  el.textContent=`${m}:${s.toString().padStart(2,'0')}`;
  el.className='timer-display'+(timerRunning?' running':'')+(timerSec===0?' done':'')+(timerSec<=120&&timerSec>0?' warning':'');
}
function startTimer(){
  if(timerRunning)return;timerRunning=true;
  document.getElementById('timerStart').textContent='‚è∏ Running';
  timerInt=setInterval(()=>{
    if(timerSec>0){timerSec--;updateTimerUI();}
    else{clearInterval(timerInt);timerRunning=false;document.getElementById('timerStart').textContent='‚è∞ Time!';}
  },1000);
}
function resetTimer(){clearInterval(timerInt);timerRunning=false;timerSec=900;updateTimerUI();document.getElementById('timerStart').textContent='‚ñ∂ Start Timer';}
updateTimerUI();

// ============ PRACTICE QUESTIONS ============
const QS=[
  {domain:'Info & Ideas',skill:'Inferences',
   passage:'A longitudinal study tracked 1,200 children ages 5‚Äì15. Children read to aloud 20+ min/day before school scored 14 percentile points higher on reading assessments at age 10. This advantage persisted even after controlling for household income, parental education level, and school quality.',
   stem:'What is the most significant implication of "even after controlling for household income, parental education level, and school quality"?',
   choices:['The study was conducted only among wealthy families.','Being read to provides a measurable reading advantage not simply a result of other socioeconomic factors.','Household income has no effect on children\'s reading ability.','The researchers were unable to determine why being read to improves scores.'],
   correct:1,fb:'Controlling for income = accounting across ALL levels, not restricting to wealthy (A). "Not simply a result of other socioeconomic factors" (B) perfectly captures the implication: the benefit is independent of wealth, education, or school quality. C overstates ‚Äî controlling ‚â† declaring irrelevant. D describes a failure the passage never mentions.'},
  {domain:'Info & Ideas',skill:'Cross-Text',
   passage:'Text 1: Dr. Ogden ‚Äî extinction caused almost entirely by Chicxulub asteroid. Evidence: global iridium layer, rapid die-off.<br>Text 2: Dr. Mehta ‚Äî dinosaurs already declining due to Deccan Traps volcanism. Asteroid was "the final blow to an already weakened ecosystem."',
   stem:'How would Dr. Mehta most likely respond to Dr. Ogden?',
   choices:['Agree asteroid was primary but suggest more research.','Argue iridium evidence is unreliable.','Acknowledge asteroid\'s role while arguing volcanic activity had already made dinosaurs vulnerable.','Reject that dinosaurs went extinct.'],
   correct:2,fb:'Mehta doesn\'t agree it was primary ‚Äî calls it "the final blow," not main driver (A). Mehta never questions iridium evidence (B). C precisely captures Mehta: accepts asteroid\'s role but argues ecosystem was already weakened. D is completely unsupported.'},
  {domain:'Info & Ideas',skill:'Central Ideas',
   passage:'Gig economy workers: higher flexibility, lower financial security. Survey of 5,000: 78% value flexible hours, 63% difficulty budgeting, 22% have health insurance vs. 71% of traditional workers.',
   stem:'Which best describes the passage\'s overall structure?',
   choices:['Presents problem then proposes solution.','Introduces general finding then supports with specific data.','Compares two economic theories.','Describes a historical trend and predicts the future.'],
   correct:1,fb:'No solution proposed (A) ‚Äî it\'s descriptive, not prescriptive. B is correct: opens with general finding (flexibility vs. security), then 3 specific data points. No theories named (C). Current conditions, not history or predictions (D).'},
  {domain:'Info & Ideas',skill:'Command of Evidence',
   passage:'Dr. Tanaka: poison dart frog coloring = dual purpose (aposematic + thermoregulation). Darker frogs in D. tinctorius absorbed heat more efficiently, maintaining higher body temps in shaded understory.',
   stem:'Which finding would most weaken the thermoregulation hypothesis?',
   choices:['Predators avoid brightly colored prey.','Darker frogs in a related species showed NO body temperature difference vs. lighter members.','Frogs are most active during warmest hours.','Non-toxic frogs also display bright coloration.'],
   correct:1,fb:'A supports aposematic function ‚Äî irrelevant to thermoregulation. B directly undermines the mechanism: if a related species shows NO temperature difference between colors, the color-temperature link fails. C doesn\'t address whether color affects thermoregulation. D relates to mimicry, not heat absorption.'},
  {domain:'Info & Ideas',skill:'Command of Evidence',
   passage:'Austin invested $47M in protected bike lanes (2018‚Äì2023), 12‚Üí68 miles. Cycling up 340%, fatalities 4.2‚Üí1.1/year. A researcher argues other factors may explain the fatality decrease.',
   stem:'Which, if true, best supports the researcher\'s argument?',
   choices:['City also implemented traffic-calming: reduced speed limits and added speed bumps citywide.','Nearby cities without protected lanes also saw cycling increases.','Protected lanes cost much more than painted lanes.','Austin\'s population grew 15%.'],
   correct:0,fb:'A is correct: Speed limits + bumps = confounding variable that could independently explain the fatality decrease. B addresses ridership, not fatalities. C is about cost, not safety. D (population growth + fewer fatalities) could actually strengthen the bike lane case.'},
  {domain:'Info & Ideas',skill:'Inferences',
   passage:'Crows solved multi-step puzzles: (1) get small stick, (2) use it to reach larger stick on shelf, (3) use larger stick to open box. 7 of 10 completed within 20 min on first attempt, no prior training.',
   stem:'What makes this achievement particularly noteworthy?',
   choices:['They found food inside a locked box.','They completed a complex sequential task requiring foresight without being taught.','Researchers discovered crows are more intelligent than all other birds.','Crows were selected based on previous abilities.'],
   correct:1,fb:'Simply finding food isn\'t remarkable (A). B captures both the complexity (3 steps ahead) and spontaneous success (first attempt, no training). No comparison to all other birds was made (C). The passage says "no prior training" but not that crows were pre-selected (D).'},
  {domain:'Craft & Structure',skill:'Text Structure',
   passage:'The proposed highway expansion would undoubtedly ease rush-hour congestion in the short term. Yet decades of research show wider highways generate additional traffic ‚Äî "induced demand." Within 5‚Äì10 years, traffic returns to pre-expansion levels or worse.',
   stem:'Author\'s purpose in mentioning short-term congestion relief?',
   choices:['Argue in favor of expansion.','Acknowledge an apparent benefit before presenting evidence against long-term effectiveness.','Suggest short-term solutions are always preferable.','Demonstrate researchers disagree.'],
   correct:1,fb:'Overall passage argues AGAINST expansion (A). B is correct: classic concession-then-rebuttal ‚Äî grants short-term benefit, then "Yet" pivots to long-term evidence. Author\'s point is opposite of C. Research is presented as consistent, not disagreeing (D).'},
  {domain:'Craft & Structure',skill:'Text Structure',
   passage:'Mr. Aldous moved through his evening routine with the mechanical precision of the beacon above him. He wound the clockwork, trimmed the wick, polished the brass ‚Äî each motion rehearsed ten thousand times until his hands could perform them independent of thought. Only when the rhythm broke did something like awareness flicker behind his eyes, brief as the light\'s own rotation.',
   stem:'The comparison to "the beacon above him" primarily serves to:',
   choices:['Suggest Mr. Aldous is frightened of the lighthouse.','Emphasize the automated, repetitive nature of his daily existence.','Indicate he is the most important person in town.','Foreshadow a dangerous storm.'],
   correct:1,fb:'Nothing suggests fear (A). B is correct: the beacon rotates mechanically and automatically ‚Äî Aldous\'s hands work "independent of thought." He\'s become almost machine-like. Comparison is about repetition, not importance (C). No storm is mentioned or foreshadowed (D).'},
  {domain:'Craft & Structure',skill:'Words in Context',
   passage:'The apprentice spent years learning not only the technical skills of glassblowing but also how to cultivate the patience required to work with molten glass, which punishes haste and rewards deliberation.',
   stem:'What does "cultivate" most nearly mean?',
   choices:['To grow crops in prepared soil','To develop or nurture a quality through effort over time','To socialize with influential people','To decorate or make more attractive'],
   correct:1,fb:'A is the agricultural (literal) meaning ‚Äî but here the apprentice develops patience, not farming. B is correct: "spent years" developing patience through "effort over time." C can mean developing social connections, but the object is "patience," an internal quality. D has no standard usage that fits.'},
  {domain:'Craft & Structure',skill:'Words in Context',
   passage:'The dancer\'s movement was fluid and continuous until she arrested her spin and held perfectly still, suspended in an impossible balance that seemed to defy gravity.',
   stem:'What does "arrested" most nearly mean?',
   choices:['Taken into police custody','Attracted or captured attention','Suddenly stopped or halted','Deteriorated or declined'],
   correct:2,fb:'A is the common everyday meaning but makes no sense for a dancer mid-performance. "Arresting" can mean attention-grabbing (B), but she "arrested her spin and held still" = physical action of stopping. C is correct: she abruptly halted her rotation ‚Äî contrast between "fluid" movement and sudden stillness confirms it. D ("arrested" in medical usage) doesn\'t fit a controlled halt.'},
];
const DOM_COLORS={
  'Info & Ideas':{bg:'rgba(52,211,153,.15)',color:'#34d399'},
  'Craft & Structure':{bg:'rgba(96,165,250,.15)',color:'#60a5fa'},
};
let satAns={};let answersShown=false;
function renderSAT(){
  document.getElementById('satQuestions').innerHTML=QS.map((q,i)=>{
    const ans=satAns[i];const has=ans!==undefined;const showFb=answersShown&&has;
    const dc=DOM_COLORS[q.domain]||{bg:'rgba(200,16,46,.15)',color:'#C8102E'};
    return `<div class="sat-q">
      <div class="ex-num"><span class="domain-tag" style="background:${dc.bg};color:${dc.color}">${q.domain}</span> ${q.skill} ¬∑ Q${i+1}</div>
      <div class="sat-passage">${q.passage}</div>
      <div class="sat-stem">${q.stem}</div>
      <div class="sat-choices">${q.choices.map((ch,ci)=>{
        let cls='sat-choice';
        if(answersShown&&has){cls+=' sc-dis';if(ci===q.correct)cls+=' sc-correct';else if(ci===ans&&ci!==q.correct)cls+=' sc-wrong';}
        return `<div class="${cls}" style="${has&&ci===ans&&!answersShown?'border-color:var(--accent);background:var(--accent-light)':''}" onclick="pickAns(${i},${ci})"><div class="sc-letter">${'ABCD'[ci]}</div><div>${ch}</div></div>`;
      }).join('')}</div>
      <div class="sat-fb${showFb?' show':''}${showFb?(ans===q.correct?' sfb-correct':' sfb-wrong'):''}">${showFb?(ans===q.correct?'‚úì Correct! ':'‚úó Incorrect. ')+q.fb:''}</div></div>`;
  }).join('');
  if(answersShown){
    const t=QS.length,c=Object.entries(satAns).filter(([i,v])=>v===QS[i].correct).length;
    document.getElementById('satScore').innerHTML=`<strong style="color:${c>=8?'var(--correct)':c>=5?'var(--express)':'var(--wrong)'}">${c}/${t} correct</strong> (${Math.round(c/t*100)}%)`;
    document.getElementById('showBtn').style.display='none';
    showProgress(c,t);
    renderErrorLog();
  }
}
function pickAns(i,ci){if(answersShown)return;satAns[i]=ci;renderSAT();}
function showAllAnswers(){
  if(Object.keys(satAns).length<QS.length){
    const missing=QS.length-Object.keys(satAns).length;
    if(!confirm(`You have ${missing} unanswered question${missing>1?'s':''}. Show answers anyway?`))return;
  }
  answersShown=true;if(timerRunning){clearInterval(timerInt);timerRunning=false;}
  renderSAT();
}
renderSAT();

// ============ PROGRESS RING ============
function showProgress(correct,total){
  const pct=Math.round(correct/total*100);
  const circ=213.6;
  const offset=circ-(pct/100*circ);
  document.getElementById('progressSection').style.display='block';
  document.getElementById('ringLabel').textContent=pct+'%';
  setTimeout(()=>{document.getElementById('ringFg').style.strokeDashoffset=offset;},100);
  // Domain breakdown
  const domStats={};
  QS.forEach((q,i)=>{
    if(!domStats[q.domain])domStats[q.domain]={total:0,correct:0};
    domStats[q.domain].total++;
    if(satAns[i]===q.correct)domStats[q.domain].correct++;
  });
  let statsHtml=`<strong>${correct}/${total}</strong> overall<br>`;
  Object.entries(domStats).forEach(([dom,s])=>{
    const dc=DOM_COLORS[dom]||{color:'#ccc'};
    statsHtml+=`<span style="color:${dc.color}">${dom}:</span> ${s.correct}/${s.total}<br>`;
  });
  document.getElementById('progressStats').innerHTML=statsHtml;
}

// ============ ERROR LOG ============
const DOMAINS=['Info & Ideas','Craft & Structure','Expression of Ideas','Standard English'];
const ETYPES=['MR ‚Äî Misread','CG ‚Äî Content Gap','TF ‚Äî Trap/Distractor','RS ‚Äî Rushed','OT ‚Äî Overthought','GS ‚Äî Guessed'];
const ETYPE_COLORS={'MR':'var(--wrong)','CG':'var(--craft)','TF':'var(--express)','RS':'#f97316','OT':'var(--info)','GS':'var(--muted)'};
const ELK='pp_p89rw_s3_elog';
function loadEL(){return JSON.parse(localStorage.getItem(ELK)||'{}');}
function saveEL(d){localStorage.setItem(ELK,JSON.stringify(d));}

function renderErrorLog(){
  const el=loadEL();
  const wrongQs=[];
  if(answersShown){
    QS.forEach((q,i)=>{if(satAns[i]!==undefined&&satAns[i]!==q.correct)wrongQs.push(i);});
  }
  
  let html=`<h3>üìã Error Log</h3><div class="elog-sub">${wrongQs.length===0&&answersShown?'No errors! Great work!':'Log each error with its domain and error type.'}</div>`;
  
  if(wrongQs.length>0){
    html+=`<div class="elog-row"><div class="elog-head">Q#</div><div class="elog-head">Domain</div><div class="elog-head">Error Type</div><div class="elog-head">Skill</div></div>`;
    wrongQs.forEach(i=>{
      const q=QS[i];
      html+=`<div class="elog-row">
        <div class="elog-qnum">${i+1}</div>
        <div><select class="elog-sel" onchange="updateEL(${i},'dom',this.value)"><option value="">‚Äî</option>${DOMAINS.map(d=>`<option${el[i]?.dom===d?' selected':''}>${d}</option>`).join('')}</select></div>
        <div><select class="elog-sel" onchange="updateEL(${i},'et',this.value)"><option value="">‚Äî</option>${ETYPES.map(e=>`<option${el[i]?.et===e?' selected':''}>${e}</option>`).join('')}</select></div>
        <div style="font-size:.8rem;color:var(--muted)">${q.skill}</div></div>`;
    });
    
    const etCounts={};const domCounts={};
    wrongQs.forEach(i=>{
      const d=el[i];if(!d)return;
      if(d.et){const code=d.et.split(' ‚Äî ')[0];etCounts[code]=(etCounts[code]||0)+1;}
      if(d.dom){domCounts[d.dom]=(domCounts[d.dom]||0)+1;}
    });
    const maxET=Math.max(1,...Object.values(etCounts));
    const maxDom=Math.max(1,...Object.values(domCounts));
    
    html+=`<div class="elog-summary"><h4>Error Summary</h4>`;
    if(Object.keys(etCounts).length>0){
      html+=`<div style="font-size:.78rem;font-weight:700;color:var(--muted);margin-bottom:6px;text-transform:uppercase;letter-spacing:1px">By Type</div>`;
      Object.entries(etCounts).sort((a,b)=>b[1]-a[1]).forEach(([k,v])=>{
        html+=`<div class="elog-bar-row"><div class="elog-bar-label" style="color:${ETYPE_COLORS[k]||'var(--muted)'}">${k}</div><div class="elog-bar"><div class="elog-bar-fill" style="width:${v/maxET*100}%;background:${ETYPE_COLORS[k]||'var(--muted)'}"></div></div><div class="elog-bar-val">${v}</div></div>`;
      });
    }
    if(Object.keys(domCounts).length>0){
      html+=`<div style="font-size:.78rem;font-weight:700;color:var(--muted);margin:10px 0 6px;text-transform:uppercase;letter-spacing:1px">By Domain</div>`;
      const domClrs={'Expression of Ideas':'var(--express)','Standard English':'var(--convention)','Info & Ideas':'var(--info)','Craft & Structure':'var(--craft)'};
      Object.entries(domCounts).sort((a,b)=>b[1]-a[1]).forEach(([k,v])=>{
        html+=`<div class="elog-bar-row"><div class="elog-bar-label" style="color:${domClrs[k]||'#ccc'}">${k}</div><div class="elog-bar"><div class="elog-bar-fill" style="width:${v/maxDom*100}%;background:${domClrs[k]||'var(--muted)'}"></div></div><div class="elog-bar-val">${v}</div></div>`;
      });
    }
    html+=`</div>`;
  } else if(!answersShown){
    html+=`<p style="color:var(--muted);font-size:.88rem;text-align:center;padding:20px 0">Complete the practice questions and click "Show Answers" to populate the error log.</p>`;
  }
  
  document.getElementById('errorLog').innerHTML=html;
}
function updateEL(i,field,val){const d=loadEL();if(!d[i])d[i]={};d[i][field]=val;saveEL(d);renderErrorLog();}
renderErrorLog();

// ============ REFLECTIONS ============
const REFLECT_QS=[
  'Which skill type (Inference, Cross-Text, Strengthen/Weaken, Words in Context, Text Structure) was hardest for you?',
  'Did you fall for any "true in real life but not supported by the text" traps? Which question(s)?',
  'What was your most common error type? (This tells you HOW to change your approach.)',
  'Compare your performance on Info & Ideas vs. Craft & Structure. Where are you stronger?',
  'What\'s one specific thing you\'ll do differently on Set 2 (Q11‚Äì20) next session?',
];
const RK='pp_p89rw_s3_reflect';
function loadR(){return JSON.parse(localStorage.getItem(RK)||'{}');}
function saveR(d){localStorage.setItem(RK,JSON.stringify(d));}
function renderReflect(){
  const d=loadR();
  document.getElementById('reflections').innerHTML=REFLECT_QS.map((q,i)=>`
    <div class="reflect-q"><span class="reflect-num">${i+1}</span><span class="reflect-text">${q}</span>
    <textarea class="reflect-input" placeholder="Your answer..." oninput="saveReflect(${i},this.value)">${d[i]||''}</textarea></div>`).join('');
}
function saveReflect(i,v){const d=loadR();d[i]=v;saveR(d);}
renderReflect();

// ============ EXPORT ============
function exportReflections(){
  const el=loadEL();const r=loadR();
  let t='SESSION 3 ERROR LOG & REFLECTIONS ‚Äî PantherPrep PSAT 8/9 R&W\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
  if(answersShown){
    const c=Object.entries(satAns).filter(([i,v])=>v===QS[i].correct).length;
    t+=`SCORE: ${c}/${QS.length} (${Math.round(c/QS.length*100)}%)\n\n`;
  }
  t+='ERROR LOG:\n';
  Object.entries(el).forEach(([i,d])=>{t+=`  Q${parseInt(i)+1}: ${d.dom||'‚Äî'} | ${d.et||'‚Äî'} | ${QS[i]?.skill||''}\n`;});
  t+='\nREFLECTIONS:\n';
  REFLECT_QS.forEach((q,i)=>{t+=`  ${i+1}. ${q}\n     ‚Üí ${r[i]||'(not answered)'}\n\n`;});
  navigator.clipboard.writeText(t).then(()=>alert('Copied to clipboard!')).catch(()=>{const a=document.createElement('textarea');a.value=t;document.body.appendChild(a);a.select();document.execCommand('copy');document.body.removeChild(a);alert('Copied!');});
}
</script>
<script src="/translate.js"></script></body>
</html>
