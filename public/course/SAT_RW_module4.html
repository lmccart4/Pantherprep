<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 4: Conventions Boss Battle ‚Äî PantherPrep SAT R&W</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: #0a0a0f; color: #e2e8f0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
button { font-family: inherit; }
</style>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.3.1/umd/react.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.3.1/umd/react-dom.production.min.js"></script>
</head>
<body>
<div id="root"></div>
<script>
const { useState, useEffect, useCallback, useRef } = React;
const ACCENT = "#10b981";
const ACCENT2 = "#f59e0b";
const BLUE = "#3b82f6";
const PURPLE = "#a855f7";
const RED = "#ef4444";
const PINK = "#ec4899";
const DARK = "#0a0a0f";
const CARD = "#13131f";
const BORDER = "#1e293b";
const MUTED = "#64748b";
const TEXT = "#e2e8f0";
const SUB = "#94a3b8";
const btn = (bg, color, extra) => ({
  padding: "12px 28px",
  borderRadius: 10,
  border: "none",
  background: bg,
  color,
  fontWeight: 700,
  fontSize: 15,
  cursor: "pointer",
  transition: "transform .12s",
  ...extra
});
const SKILL_META = {
  boundary: { label: "Boundaries", color: ACCENT2, icon: "‚ö°" },
  agreement: { label: "Agreement", color: BLUE, icon: "üéØ" },
  modifier: { label: "Modifiers", color: PURPLE, icon: "üîÆ" },
  parallel: { label: "Parallelism", color: ACCENT, icon: "‚öñÔ∏è" },
  comparison: { label: "Comparisons", color: PINK, icon: "üîç" },
  tense: { label: "Verb Tense", color: "#06b6d4", icon: "‚è∞" }
};
const BATTLE_QUESTIONS = [
  // ‚ïê‚ïê‚ïê PHASE 1: WARM-UP (8 questions, mostly easy-medium) ‚ïê‚ïê‚ïê
  {
    id: 1,
    phase: 1,
    skill: "boundary",
    diff: "easy",
    passage: "The museum's new wing houses artifacts from ancient Egypt ______ visitors can also explore interactive exhibits on daily life in the Nile Delta.",
    choices: ["Egypt,", "Egypt;", "Egypt", "Egypt, and"],
    answer: 1,
    explain: "Two independent clauses. Semicolon correctly joins them. Comma alone = splice."
  },
  {
    id: 2,
    phase: 1,
    skill: "agreement",
    diff: "easy",
    passage: "The series of lectures on artificial intelligence ______ scheduled to begin next Monday at the downtown campus.",
    choices: ["are", "is", "were", "have been"],
    answer: 1,
    explain: 'Subject is "series" (singular). "Of lectures on artificial intelligence" is a prepositional phrase. Singular = "is."'
  },
  {
    id: 3,
    phase: 1,
    skill: "modifier",
    diff: "easy",
    passage: "Inspired by her grandmother's stories, ______ wrote her first novel at the age of nineteen.",
    choices: ["the novel by Elena", "Elena's first book", "Elena", "it was Elena who"],
    answer: 2,
    explain: "Who was inspired? Elena. She must be the subject after the comma."
  },
  {
    id: 4,
    phase: 1,
    skill: "parallel",
    diff: "easy",
    passage: "The training program teaches participants to set goals, manage their time, and ______ .",
    choices: ["communication skills are developed", "developing communication skills", "develop communication skills", "they develop communication skills"],
    answer: 2,
    explain: '"To set, manage, and develop" ‚Äî infinitive series. All must match.'
  },
  {
    id: 5,
    phase: 1,
    skill: "boundary",
    diff: "medium",
    passage: "Dr. Vasquez has studied coral reef ecosystems for over twenty ______ that ocean acidification poses a greater threat than previously estimated.",
    choices: ["years, believes", "years believes", "years; believes", "years. Believes"],
    answer: 0,
    explain: '"Who has studied...twenty years" is a nonrestrictive relative clause (implied "who"). The comma after "years" closes it, returning to: "Dr. Vasquez...believes." Period/semicolon would create a fragment.'
  },
  {
    id: 6,
    phase: 1,
    skill: "tense",
    diff: "medium",
    passage: "By the time the investigators arrived at the scene, the witnesses ______ already provided their statements to the local police.",
    choices: ["have", "has", "had", "would have"],
    answer: 2,
    explain: 'Past perfect: providing statements happened BEFORE investigators arrived. "Had already provided."'
  },
  {
    id: 7,
    phase: 1,
    skill: "agreement",
    diff: "medium",
    passage: "Neither the principal nor the teachers ______ able to explain the sudden drop in test scores across all grade levels.",
    choices: ["was", "were", "is", "has been"],
    answer: 1,
    explain: 'Neither/nor: verb agrees with the closer subject. "Teachers" (plural) is closer = "were."'
  },
  {
    id: 8,
    phase: 1,
    skill: "comparison",
    diff: "medium",
    passage: "The fuel efficiency of the new hybrid model is significantly better than ______ .",
    choices: ["the previous model", "that of the previous model", "compared to the previous model", "what the previous model was"],
    answer: 1,
    explain: 'Comparing efficiency to efficiency. "That of" refers back to "fuel efficiency." A compares efficiency to a model (faulty).'
  },
  // ‚ïê‚ïê‚ïê PHASE 2: ESCALATION (9 questions, medium-hard) ‚ïê‚ïê‚ïê
  {
    id: 9,
    phase: 2,
    skill: "boundary",
    diff: "medium",
    passage: "The company announced three strategic priorities for the coming fiscal year ______ expanding into Southeast Asian markets, launching a direct-to-consumer platform, and investing $200 million in sustainable manufacturing.",
    choices: ["year,", "year:", "year;", "year ‚Äî"],
    answer: 1,
    explain: 'Colon introduces a list specifying the "three strategic priorities." Left side is an independent clause.'
  },
  {
    id: 10,
    phase: 2,
    skill: "modifier",
    diff: "medium",
    passage: "Completed after nearly a decade of construction, ______ has become the city's most recognizable landmark.",
    choices: ["the architects celebrated because the bridge", "tourists frequently photograph the bridge, which", "the bridge", "the bridge's completion was celebrated, and it"],
    answer: 2,
    explain: "What was completed? The bridge. It must be the subject after the comma."
  },
  {
    id: 11,
    phase: 2,
    skill: "agreement",
    diff: "hard",
    passage: "The anthology of essays, poems, and short stories that ______ compiled by Dr. Whitfield has been nominated for a National Book Award.",
    choices: ["was", "were", "have been", "are"],
    answer: 0,
    explain: '"That" refers to "anthology" (singular), not the items inside it. The anthology was compiled.'
  },
  {
    id: 12,
    phase: 2,
    skill: "parallel",
    diff: "hard",
    passage: "The candidate promised not only to lower taxes but also ______ in public education.",
    choices: ["increasing investment", "she would increase investment", "to increase investment", "an increase of investment"],
    answer: 2,
    explain: '"Not only to lower...but also to increase." Infinitive pairs with infinitive.'
  },
  {
    id: 13,
    phase: 2,
    skill: "tense",
    diff: "hard",
    passage: "If the proposed amendment ______ ratified by two-thirds of the states, it would fundamentally alter the balance of power between federal and state governments.",
    choices: ["was", "were", "is", "will be"],
    answer: 1,
    explain: 'Subjunctive in hypothetical contrary-to-fact condition. "If [subject] were" regardless of number. "Would" in the main clause confirms this is hypothetical.'
  },
  {
    id: 14,
    phase: 2,
    skill: "boundary",
    diff: "hard",
    passage: "The sculptor's latest installation ‚Äî a towering arrangement of recycled steel beams and shattered glass ______ draws thousands of visitors to the waterfront gallery each month.",
    choices: [",", "‚Äî", ";", ":"],
    answer: 1,
    explain: 'An opening em-dash before "a towering arrangement" needs a closing em-dash to match. Dashes come in pairs when setting off an aside.'
  },
  {
    id: 15,
    phase: 2,
    skill: "modifier",
    diff: "hard",
    passage: "Having analyzed data from over 50,000 patient records spanning three decades, ______ challenged the prevailing assumption that the treatment was universally effective.",
    choices: ["the study's findings", "a new conclusion was reached that", "the research team's findings", "the research team"],
    answer: 3,
    explain: `Who analyzed data? The research team. They must be the subject. "The study's findings" and "the research team's findings" didn't analyze anything ‚Äî they ARE the analysis.`
  },
  {
    id: 16,
    phase: 2,
    skill: "comparison",
    diff: "hard",
    passage: "Like the novels of Toni Morrison, ______ explores themes of identity, memory, and belonging through richly layered narratives.",
    choices: ["Chimamanda Ngozi Adichie's fiction", "the fiction of Chimamanda Ngozi Adichie", "Chimamanda Ngozi Adichie", "the themes in Chimamanda Ngozi Adichie's work"],
    answer: 2,
    explain: `"Like the novels of Morrison" sets up a comparison, but the verb "explores" needs a person or body of work as subject. "Adichie" (the author) explores themes. Comparing author's approach to author's approach.`
  },
  // ‚ïê‚ïê‚ïê PHASE 3: FINAL STAND (8 questions, all hard) ‚ïê‚ïê‚ïê
  {
    id: 17,
    phase: 3,
    skill: "boundary",
    diff: "hard",
    passage: "Researchers found that participants who exercised regularly showed improved cognitive function; ______ those who combined exercise with meditation showed even greater gains.",
    choices: ["however,", "however;", "furthermore,", "furthermore"],
    answer: 2,
    explain: `After a semicolon, the conjunctive adverb + comma begins the next clause. "Furthermore" adds to the point (both groups improved, the second even more). "However" would imply contrast, which doesn't fit.`
  },
  {
    id: 18,
    phase: 3,
    skill: "agreement",
    diff: "hard",
    passage: "The professor, along with several graduate students and a visiting researcher from Tokyo, ______ published a comprehensive review of the literature on quantum entanglement.",
    choices: ["have", "has", "are", "were"],
    answer: 1,
    explain: `"The professor" is the subject (singular). "Along with..." is a parenthetical phrase, NOT a compound subject. Unlike "and," phrases like "along with," "together with," and "as well as" don't make the subject plural.`
  },
  {
    id: 19,
    phase: 3,
    skill: "modifier",
    diff: "hard",
    passage: "Originally designed as a temporary shelter for earthquake victims, ______ has been continuously occupied for over forty years and now functions as a permanent community center.",
    choices: ["the building's transformation surprised city planners", "residents have transformed the building, which", "the prefabricated structure", "architects were surprised that the structure"],
    answer: 2,
    explain: "What was originally designed? The structure. It must be the subject. The building's transformation, residents, and architects weren't designed as shelters."
  },
  {
    id: 20,
    phase: 3,
    skill: "parallel",
    diff: "hard",
    passage: "The report recommended that the agency increase its oversight capacity, ______ , and establish clearer guidelines for interagency communication.",
    choices: ["hiring additional inspectors should be a priority", "additional inspectors be hired", "hire additional inspectors", "with the hiring of additional inspectors"],
    answer: 2,
    explain: 'Subjunctive series after "recommended that": increase, hire, establish. All base-form verbs.'
  },
  {
    id: 21,
    phase: 3,
    skill: "tense",
    diff: "hard",
    passage: "The artist, whose murals ______ the walls of buildings in twelve countries, announced yesterday that she will begin a new series focused on climate migration.",
    choices: ["adorn", "adorned", "have adorned", "had adorned"],
    answer: 2,
    explain: `Present perfect: the murals started adorning walls in the past and still do now (they're still on the buildings). "Have adorned" captures this ongoing state.`
  },
  {
    id: 22,
    phase: 3,
    skill: "boundary",
    diff: "hard",
    passage: "While the committee acknowledged the proposal's merits ______ voted to table the discussion until additional funding sources could be identified.",
    choices: [", it", "; it", ", they", ": it"],
    answer: 0,
    explain: '"While the committee acknowledged..." is a dependent clause. A comma + subject ("it" referring to committee) correctly connects it to the independent clause. Semicolon/colon after a dependent clause creates a fragment.'
  },
  {
    id: 23,
    phase: 3,
    skill: "agreement",
    diff: "hard",
    passage: "Among the many innovations displayed at the technology expo ______ a prototype solar panel capable of generating electricity from both direct sunlight and ambient indoor lighting.",
    choices: ["were", "was", "are", "have been"],
    answer: 1,
    explain: 'Inverted order. Subject comes after: "a prototype solar panel" (singular). "Among the innovations WAS a prototype."'
  },
  {
    id: 24,
    phase: 3,
    skill: "comparison",
    diff: "hard",
    passage: "The salaries of nurses in rural hospitals are often significantly lower than ______ in major metropolitan medical centers.",
    choices: ["nurses", "those of nurses", "the nurses working", "nurses' salaries are"],
    answer: 1,
    explain: 'Comparing salaries to salaries. "Those of nurses" = the salaries of nurses. A compares salaries to nurses (faulty).'
  },
  {
    id: 25,
    phase: 3,
    skill: "modifier",
    diff: "hard",
    passage: "A Nobel laureate in physics and an accomplished violinist, ______ defied the assumption that scientific and artistic talents are mutually exclusive.",
    choices: ["Einstein's legacy", "the achievements of Einstein", "Einstein", "it was Einstein who"],
    answer: 2,
    explain: `"A Nobel laureate..." is an appositive renaming a person. Einstein (the person) must be the subject. "Einstein's legacy" and "the achievements" aren't a laureate or violinist.`
  }
];
const PHASES = [
  { name: "Phase 1: Warm-Up", subtitle: "The Sentinel awakens...", hp: 8, color: ACCENT2, icon: "üõ°Ô∏è" },
  { name: "Phase 2: Escalation", subtitle: "The Sentinel powers up!", hp: 8, color: PURPLE, icon: "‚öîÔ∏è" },
  { name: "Phase 3: Final Stand", subtitle: "The Sentinel enters rage mode!", hp: 9, color: RED, icon: "üî•" }
];
function Welcome({ onNext }) {
  const [show, setShow] = useState(false);
  useEffect(() => {
    setTimeout(() => setShow(true), 100);
  }, []);
  return /* @__PURE__ */ React.createElement("div", { style: { display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", minHeight: "100vh", padding: "0 24px", transition: "all .7s", opacity: show ? 1 : 0, transform: show ? "translateY(0)" : "translateY(16px)" } }, /* @__PURE__ */ React.createElement("div", { style: { background: `${RED}22`, border: `1px solid ${RED}44`, borderRadius: 12, padding: "6px 18px", fontSize: 13, letterSpacing: 1.5, textTransform: "uppercase", color: RED, marginBottom: 12, fontWeight: 600 } }, "Unit 1 ‚Ä¢ Module 4"), /* @__PURE__ */ React.createElement("h1", { style: { fontSize: "clamp(2rem,5vw,3.5rem)", fontWeight: 900, background: `linear-gradient(135deg,${ACCENT2},${RED},${PURPLE})`, WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent", lineHeight: 1.1, textAlign: "center", marginBottom: 16 } }, "Conventions Boss Battle"), /* @__PURE__ */ React.createElement("p", { style: { color: SUB, fontSize: 18, maxWidth: 560, textAlign: "center", lineHeight: 1.6, marginBottom: 32 } }, "The Grammar Sentinel guards the gate to Unit 2. Defeat it by answering 25 conventions questions across three escalating phases. Everything from Modules 1-3 is fair game."), /* @__PURE__ */ React.createElement("div", { style: { background: `linear-gradient(135deg,${CARD},#1a1a2e)`, border: `1px solid ${RED}33`, borderRadius: 20, padding: 32, marginBottom: 32, maxWidth: 500, width: "100%", textAlign: "center" } }, /* @__PURE__ */ React.createElement("div", { style: { fontSize: 64, marginBottom: 12 } }, "ü§ñ"), /* @__PURE__ */ React.createElement("div", { style: { color: RED, fontWeight: 900, fontSize: 22, marginBottom: 4 } }, "The Grammar Sentinel"), /* @__PURE__ */ React.createElement("div", { style: { color: MUTED, fontSize: 13, marginBottom: 20 } }, "Level 4 Boss ‚Ä¢ 25 HP"), /* @__PURE__ */ React.createElement("div", { style: { display: "flex", justifyContent: "center", gap: 8, flexWrap: "wrap" } }, Object.values(SKILL_META).map((s, i) => /* @__PURE__ */ React.createElement("span", { key: i, style: { background: `${s.color}15`, color: s.color, padding: "4px 10px", borderRadius: 6, fontSize: 11, fontWeight: 600 } }, s.icon, " ", s.label)))), /* @__PURE__ */ React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(auto-fit,minmax(200px,1fr))", gap: 12, maxWidth: 650, width: "100%", marginBottom: 40 } }, [
    { icon: "‚ù§Ô∏è", title: "3 Phases", desc: "8 + 8 + 9 questions, escalating difficulty" },
    { icon: "üî•", title: "Combo System", desc: "Consecutive correct answers build your combo" },
    { icon: "‚≠ê", title: "Bonus XP", desc: "Speed and accuracy earn bonus points" }
  ].map((c, i) => /* @__PURE__ */ React.createElement("div", { key: i, style: { background: CARD, border: `1px solid ${BORDER}`, borderRadius: 14, padding: 20, textAlign: "center" } }, /* @__PURE__ */ React.createElement("div", { style: { fontSize: 28, marginBottom: 6 } }, c.icon), /* @__PURE__ */ React.createElement("div", { style: { color: TEXT, fontWeight: 700, fontSize: 14, marginBottom: 2 } }, c.title), /* @__PURE__ */ React.createElement("div", { style: { color: MUTED, fontSize: 12, lineHeight: 1.4 } }, c.desc)))), /* @__PURE__ */ React.createElement(
    "button",
    {
      onClick: onNext,
      style: { ...btn(`linear-gradient(135deg,${RED},#b91c1c)`, TEXT), fontSize: 17, padding: "16px 40px", letterSpacing: 0.5 },
      onMouseOver: (e) => e.currentTarget.style.transform = "scale(1.04)",
      onMouseOut: (e) => e.currentTarget.style.transform = "scale(1)"
    },
    "Begin Battle ‚öîÔ∏è"
  ));
}
function BattleArena({ onComplete }) {
  const [qIdx, setQIdx] = useState(0);
  const [selected, setSelected] = useState(null);
  const [confirmed, setConfirmed] = useState(false);
  const [answers, setAnswers] = useState([]);
  const [combo, setCombo] = useState(0);
  const [maxCombo, setMaxCombo] = useState(0);
  const [bossHP, setBossHP] = useState(25);
  const [playerHP, setPlayerHP] = useState(25);
  const [shakeScreen, setShakeScreen] = useState(false);
  const [flashGreen, setFlashGreen] = useState(false);
  const [flashRed, setFlashRed] = useState(false);
  const [startTime, setStartTime] = useState(Date.now());
  const [totalTime, setTotalTime] = useState(0);
  const q = BATTLE_QUESTIONS[qIdx];
  const total = BATTLE_QUESTIONS.length;
  const phase = PHASES[q.phase - 1];
  const skill = SKILL_META[q.skill];
  const phaseQs = BATTLE_QUESTIONS.filter((bq) => bq.phase === q.phase);
  const phaseIdx = phaseQs.indexOf(q);
  const phaseTotal = phaseQs.length;
  function handleConfirm() {
    if (selected === null) return;
    const correct = selected === q.answer;
    const ms = Date.now() - startTime;
    setConfirmed(true);
    setAnswers((p) => [...p, { qid: q.id, correct, skill: q.skill, ms }]);
    if (correct) {
      const newCombo = combo + 1;
      setCombo(newCombo);
      if (newCombo > maxCombo) setMaxCombo(newCombo);
      const dmg = 1;
      setBossHP((hp) => Math.max(0, hp - dmg));
      setFlashGreen(true);
      setTimeout(() => setFlashGreen(false), 400);
    } else {
      setCombo(0);
      setPlayerHP((hp) => Math.max(0, hp - 1));
      setShakeScreen(true);
      setFlashRed(true);
      setTimeout(() => {
        setShakeScreen(false);
        setFlashRed(false);
      }, 400);
    }
  }
  function handleNext() {
    if (qIdx < total - 1) {
      setQIdx(qIdx + 1);
      setSelected(null);
      setConfirmed(false);
      setStartTime(Date.now());
    } else {
      const elapsed = answers.reduce((a, ans) => a + ans.ms, 0);
      setTotalTime(elapsed);
      onComplete({
        answers,
        bossHP,
        playerHP,
        combo: maxCombo,
        totalTime: elapsed
      });
    }
  }
  const HealthBar = ({ current, max, color, label, reverse }) => /* @__PURE__ */ React.createElement("div", { style: { flex: 1, minWidth: 0 } }, /* @__PURE__ */ React.createElement("div", { style: { display: "flex", justifyContent: reverse ? "flex-end" : "flex-start", alignItems: "center", gap: 6, marginBottom: 4 } }, /* @__PURE__ */ React.createElement("span", { style: { color, fontWeight: 700, fontSize: 12 } }, label), /* @__PURE__ */ React.createElement("span", { style: { color: MUTED, fontSize: 11 } }, current, "/", max)), /* @__PURE__ */ React.createElement("div", { style: { height: 10, background: BORDER, borderRadius: 5, overflow: "hidden", direction: reverse ? "rtl" : "ltr" } }, /* @__PURE__ */ React.createElement("div", { style: { height: "100%", width: `${current / max * 100}%`, background: color, borderRadius: 5, transition: "width .5s ease" } })));
  return /* @__PURE__ */ React.createElement("div", { style: {
    maxWidth: 700,
    margin: "0 auto",
    padding: "24px 20px",
    minHeight: "100vh",
    animation: shakeScreen ? "shake .3s" : "none"
  } }, /* @__PURE__ */ React.createElement("div", { style: { background: `linear-gradient(135deg,${CARD},#1a1a2e)`, border: `1px solid ${phase.color}33`, borderRadius: 16, padding: 16, marginBottom: 20 } }, /* @__PURE__ */ React.createElement("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 12 } }, /* @__PURE__ */ React.createElement("div", { style: { color: phase.color, fontSize: 12, fontWeight: 700, letterSpacing: 1 } }, phase.icon, " ", phase.name), /* @__PURE__ */ React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 6 } }, combo > 0 && /* @__PURE__ */ React.createElement("span", { style: { background: `${ACCENT2}22`, color: ACCENT2, padding: "2px 8px", borderRadius: 6, fontSize: 11, fontWeight: 800, animation: "pulse 1s infinite" } }, combo, "x COMBO"), /* @__PURE__ */ React.createElement("span", { style: { color: skill.color, fontSize: 11, fontWeight: 600, padding: "2px 8px", borderRadius: 6, background: `${skill.color}15` } }, skill.icon, " ", skill.label))), /* @__PURE__ */ React.createElement("div", { style: { display: "flex", gap: 16, alignItems: "center" } }, /* @__PURE__ */ React.createElement(HealthBar, { current: playerHP, max: 25, color: ACCENT, label: "YOU" }), /* @__PURE__ */ React.createElement("div", { style: { color: MUTED, fontSize: 16, fontWeight: 900 } }, "VS"), /* @__PURE__ */ React.createElement(HealthBar, { current: bossHP, max: 25, color: RED, label: "BOSS", reverse: true }))), /* @__PURE__ */ React.createElement("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 12 } }, /* @__PURE__ */ React.createElement("div", { style: { color: TEXT, fontWeight: 800, fontSize: 15 } }, "Q", qIdx + 1, " of ", total), /* @__PURE__ */ React.createElement("span", { style: {
    fontSize: 10,
    padding: "2px 8px",
    borderRadius: 4,
    fontWeight: 700,
    background: q.diff === "easy" ? `${ACCENT}22` : q.diff === "medium" ? `${ACCENT2}22` : `${RED}22`,
    color: q.diff === "easy" ? ACCENT : q.diff === "medium" ? ACCENT2 : RED
  } }, q.diff)), /* @__PURE__ */ React.createElement("div", { style: { height: 4, background: BORDER, borderRadius: 2, marginBottom: 20, overflow: "hidden" } }, /* @__PURE__ */ React.createElement("div", { style: { height: "100%", width: `${(qIdx + (confirmed ? 1 : 0)) / total * 100}%`, background: `linear-gradient(90deg,${ACCENT},${ACCENT2},${RED})`, borderRadius: 2, transition: "width .4s" } })), /* @__PURE__ */ React.createElement("div", { style: {
    background: CARD,
    border: `1px solid ${BORDER}`,
    borderRadius: 16,
    padding: 24,
    marginBottom: 20,
    boxShadow: flashGreen ? `0 0 20px ${ACCENT}33` : flashRed ? `0 0 20px ${RED}33` : "none",
    transition: "box-shadow .3s"
  } }, /* @__PURE__ */ React.createElement("div", { style: { color: "#cbd5e1", fontSize: 15, lineHeight: 1.8, fontFamily: "Georgia, serif" } }, q.passage)), /* @__PURE__ */ React.createElement("div", { style: { display: "flex", flexDirection: "column", gap: 10, marginBottom: 24 } }, q.choices.map((c, ci) => {
    const letter = "ABCD"[ci];
    const isSel = selected === ci;
    const isCorr = ci === q.answer;
    let bg = CARD, bdr = `1px solid ${BORDER}`, tc = "#cbd5e1";
    if (confirmed && isCorr) {
      bg = `${ACCENT}18`;
      bdr = `2px solid ${ACCENT}`;
      tc = ACCENT;
    } else if (confirmed && isSel && !isCorr) {
      bg = `${RED}18`;
      bdr = `2px solid ${RED}`;
      tc = RED;
    } else if (isSel && !confirmed) {
      bg = `${phase.color}15`;
      bdr = `2px solid ${phase.color}`;
      tc = phase.color;
    }
    return /* @__PURE__ */ React.createElement(
      "button",
      {
        key: ci,
        onClick: () => {
          if (!confirmed) setSelected(ci);
        },
        disabled: confirmed,
        style: { display: "flex", alignItems: "center", gap: 12, padding: "14px 18px", borderRadius: 12, background: bg, border: bdr, cursor: confirmed ? "default" : "pointer", textAlign: "left", width: "100%" }
      },
      /* @__PURE__ */ React.createElement("span", { style: {
        minWidth: 28,
        height: 28,
        borderRadius: 8,
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        fontWeight: 800,
        fontSize: 13,
        background: confirmed && isCorr ? ACCENT : confirmed && isSel && !isCorr ? RED : isSel ? phase.color : BORDER,
        color: isSel || confirmed ? DARK : MUTED
      } }, letter),
      /* @__PURE__ */ React.createElement("span", { style: { color: tc, fontSize: 14, fontFamily: "Georgia, serif" } }, c)
    );
  })), confirmed && /* @__PURE__ */ React.createElement("div", { style: { background: selected === q.answer ? `${ACCENT}11` : `${RED}11`, border: `1px solid ${selected === q.answer ? ACCENT : RED}44`, borderRadius: 12, padding: 16, marginBottom: 20 } }, /* @__PURE__ */ React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 8, marginBottom: 6 } }, /* @__PURE__ */ React.createElement("span", { style: { fontSize: 18 } }, selected === q.answer ? "‚úÖ" : "‚ùå"), /* @__PURE__ */ React.createElement("span", { style: { color: selected === q.answer ? ACCENT : RED, fontWeight: 800, fontSize: 15 } }, selected === q.answer ? combo >= 3 ? "COMBO HIT! " + combo + "x" : "Correct!" : "Miss!")), /* @__PURE__ */ React.createElement("div", { style: { color: SUB, fontSize: 13, lineHeight: 1.6 } }, q.explain)), /* @__PURE__ */ React.createElement("div", { style: { display: "flex", justifyContent: "flex-end" } }, !confirmed ? /* @__PURE__ */ React.createElement(
    "button",
    {
      onClick: handleConfirm,
      disabled: selected === null,
      style: btn(selected === null ? BORDER : phase.color, selected === null ? "#475569" : DARK, { fontSize: 14, padding: "10px 24px" })
    },
    "Attack ‚öîÔ∏è"
  ) : /* @__PURE__ */ React.createElement(
    "button",
    {
      onClick: handleNext,
      style: btn(`linear-gradient(135deg,${phase.color},${DARK})`, TEXT, { fontSize: 14, padding: "10px 24px" })
    },
    qIdx < total - 1 ? "Next ‚Üí" : "Final Results ‚Üí"
  )), /* @__PURE__ */ React.createElement("style", null, `
        @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-6px)} 50%{transform:translateX(6px)} 75%{transform:translateX(-4px)} }
        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.6} }
      `));
}
function Results({ data }) {
  const [show, setShow] = useState(false);
  const [tab, setTab] = useState("overview");
  useEffect(() => {
    setTimeout(() => setShow(true), 200);
  }, []);
  const { answers, bossHP, playerHP, combo, totalTime } = data;
  const correct = answers.filter((a) => a.correct).length;
  const total = answers.length;
  const pct = Math.round(correct / total * 100);
  const defeated = bossHP <= 0;
  const mins = Math.floor(totalTime / 6e4);
  const secs = Math.round(totalTime % 6e4 / 1e3);
  const skillBreakdown = {};
  Object.keys(SKILL_META).forEach((s) => {
    const qs = answers.filter((a) => a.skill === s);
    if (qs.length > 0) {
      skillBreakdown[s] = { total: qs.length, correct: qs.filter((a) => a.correct).length };
    }
  });
  const baseXP = correct * 100;
  const comboXP = combo * 50;
  const speedBonus = pct >= 80 && totalTime < 15 * 60 * 1e3 ? 500 : pct >= 60 && totalTime < 20 * 60 * 1e3 ? 250 : 0;
  const perfectBonus = pct === 100 ? 1e3 : 0;
  const totalXP = baseXP + comboXP + speedBonus + perfectBonus;
  return /* @__PURE__ */ React.createElement("div", { style: { transition: "all .7s", opacity: show ? 1 : 0, transform: show ? "translateY(0)" : "translateY(16px)", maxWidth: 800, margin: "0 auto", padding: "40px 20px 80px" } }, /* @__PURE__ */ React.createElement("div", { style: { textAlign: "center", marginBottom: 40 } }, /* @__PURE__ */ React.createElement("div", { style: { fontSize: 72, marginBottom: 8 } }, defeated ? "üèÜ" : "üõ°Ô∏è"), /* @__PURE__ */ React.createElement("h1", { style: {
    fontSize: "clamp(2rem,5vw,3rem)",
    fontWeight: 900,
    background: defeated ? `linear-gradient(135deg,${ACCENT2},${ACCENT})` : `linear-gradient(135deg,${RED},${ACCENT2})`,
    WebkitBackgroundClip: "text",
    WebkitTextFillColor: "transparent",
    marginBottom: 8
  } }, defeated ? "VICTORY!" : "Defeated..."), /* @__PURE__ */ React.createElement("p", { style: { color: SUB, fontSize: 16 } }, defeated ? "The Grammar Sentinel has been vanquished!" : "The Sentinel survives with " + bossHP + " HP remaining. Train more and try again!")), /* @__PURE__ */ React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(auto-fit,minmax(120px,1fr))", gap: 12, marginBottom: 32 } }, [
    { label: "Score", value: `${correct}/${total}`, sub: `${pct}%`, color: pct >= 80 ? ACCENT : pct >= 60 ? ACCENT2 : RED },
    { label: "Max Combo", value: `${combo}x`, sub: combo >= 5 ? "Unstoppable!" : combo >= 3 ? "Nice streak!" : "Keep trying", color: ACCENT2 },
    { label: "Time", value: `${mins}m ${secs}s`, sub: `${Math.round(totalTime / total / 1e3)}s avg`, color: BLUE },
    { label: "XP Earned", value: totalXP.toLocaleString(), sub: "total points", color: PURPLE }
  ].map((s, i) => /* @__PURE__ */ React.createElement("div", { key: i, style: { background: CARD, border: `1px solid ${BORDER}`, borderRadius: 14, padding: 16, textAlign: "center" } }, /* @__PURE__ */ React.createElement("div", { style: { color: MUTED, fontSize: 11, fontWeight: 600, textTransform: "uppercase", letterSpacing: 0.5, marginBottom: 4 } }, s.label), /* @__PURE__ */ React.createElement("div", { style: { color: s.color, fontWeight: 900, fontSize: 22 } }, s.value), /* @__PURE__ */ React.createElement("div", { style: { color: "#475569", fontSize: 11, marginTop: 2 } }, s.sub)))), /* @__PURE__ */ React.createElement("div", { style: { background: CARD, border: `1px solid ${BORDER}`, borderRadius: 16, padding: 20, marginBottom: 24 } }, /* @__PURE__ */ React.createElement("div", { style: { color: PURPLE, fontWeight: 700, fontSize: 14, marginBottom: 12 } }, "‚≠ê XP Breakdown"), [
    { label: "Base (correct answers)", value: `${correct} √ó 100 = ${baseXP}`, color: TEXT },
    { label: "Combo bonus", value: `${combo} √ó 50 = ${comboXP}`, color: ACCENT2 },
    speedBonus > 0 && { label: "Speed bonus", value: `+${speedBonus}`, color: BLUE },
    perfectBonus > 0 && { label: "Perfect clear!", value: `+${perfectBonus}`, color: ACCENT }
  ].filter(Boolean).map((x, i) => /* @__PURE__ */ React.createElement("div", { key: i, style: { display: "flex", justifyContent: "space-between", padding: "4px 0", borderBottom: `1px solid ${BORDER}` } }, /* @__PURE__ */ React.createElement("span", { style: { color: SUB, fontSize: 13 } }, x.label), /* @__PURE__ */ React.createElement("span", { style: { color: x.color, fontSize: 13, fontWeight: 700 } }, x.value))), /* @__PURE__ */ React.createElement("div", { style: { display: "flex", justifyContent: "space-between", padding: "8px 0 0", marginTop: 4 } }, /* @__PURE__ */ React.createElement("span", { style: { color: TEXT, fontSize: 14, fontWeight: 700 } }, "Total XP"), /* @__PURE__ */ React.createElement("span", { style: { color: PURPLE, fontSize: 16, fontWeight: 900 } }, totalXP.toLocaleString()))), /* @__PURE__ */ React.createElement("div", { style: { display: "flex", gap: 4, marginBottom: 24, background: CARD, borderRadius: 10, padding: 4 } }, [["overview", "Skill Breakdown"], ["detail", "Question Log"], ["next", "What's Next"]].map(([k, l]) => /* @__PURE__ */ React.createElement(
    "button",
    {
      key: k,
      onClick: () => setTab(k),
      style: {
        flex: 1,
        padding: "10px 12px",
        borderRadius: 8,
        border: "none",
        fontWeight: 600,
        fontSize: 13,
        cursor: "pointer",
        background: tab === k ? BORDER : "transparent",
        color: tab === k ? TEXT : MUTED
      }
    },
    l
  ))), tab === "overview" && /* @__PURE__ */ React.createElement("div", { style: { display: "flex", flexDirection: "column", gap: 12 } }, Object.entries(skillBreakdown).map(([s, data2]) => {
    const meta = SKILL_META[s];
    const skillPct = Math.round(data2.correct / data2.total * 100);
    return /* @__PURE__ */ React.createElement("div", { key: s, style: { background: CARD, border: `1px solid ${BORDER}`, borderRadius: 14, padding: 16 } }, /* @__PURE__ */ React.createElement("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 10 } }, /* @__PURE__ */ React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 8 } }, /* @__PURE__ */ React.createElement("span", { style: { fontSize: 16 } }, meta.icon), /* @__PURE__ */ React.createElement("span", { style: { color: TEXT, fontWeight: 700, fontSize: 14 } }, meta.label)), /* @__PURE__ */ React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 6 } }, /* @__PURE__ */ React.createElement("span", { style: { color: meta.color, fontWeight: 800, fontSize: 18 } }, skillPct, "%"), /* @__PURE__ */ React.createElement("span", { style: { color: MUTED, fontSize: 12 } }, "(", data2.correct, "/", data2.total, ")"))), /* @__PURE__ */ React.createElement("div", { style: { height: 8, background: BORDER, borderRadius: 4, overflow: "hidden" } }, /* @__PURE__ */ React.createElement("div", { style: { height: "100%", width: `${skillPct}%`, background: meta.color, borderRadius: 4, transition: "width 1s" } })));
  })), tab === "detail" && /* @__PURE__ */ React.createElement("div", { style: { display: "flex", flexDirection: "column", gap: 6 } }, answers.map((a, i) => {
    const bq = BATTLE_QUESTIONS.find((q) => q.id === a.qid);
    const meta = SKILL_META[a.skill];
    return /* @__PURE__ */ React.createElement("div", { key: i, style: { background: CARD, border: `1px solid ${BORDER}`, borderRadius: 10, padding: "10px 14px", display: "flex", alignItems: "center", gap: 10 } }, /* @__PURE__ */ React.createElement("div", { style: {
      width: 28,
      height: 28,
      borderRadius: 7,
      display: "flex",
      alignItems: "center",
      justifyContent: "center",
      fontWeight: 800,
      fontSize: 12,
      background: a.correct ? `${ACCENT}22` : `${RED}22`,
      color: a.correct ? ACCENT : RED
    } }, i + 1), /* @__PURE__ */ React.createElement("div", { style: { flex: 1, minWidth: 0 } }, /* @__PURE__ */ React.createElement("div", { style: { color: TEXT, fontSize: 12, fontWeight: 600 } }, meta.label), /* @__PURE__ */ React.createElement("div", { style: { color: MUTED, fontSize: 11 } }, "Phase ", bq?.phase, " ‚Ä¢ ", bq?.diff)), /* @__PURE__ */ React.createElement("div", { style: { color: "#475569", fontSize: 11 } }, Math.round(a.ms / 1e3), "s"), /* @__PURE__ */ React.createElement("span", { style: { fontSize: 14 } }, a.correct ? "‚úÖ" : "‚ùå"));
  })), tab === "next" && /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { style: { background: `linear-gradient(135deg,${ACCENT}11,${CARD})`, border: `1px solid ${ACCENT}33`, borderRadius: 16, padding: 24, marginBottom: 20 } }, /* @__PURE__ */ React.createElement("div", { style: { color: ACCENT, fontWeight: 800, fontSize: 16, marginBottom: 8 } }, defeated ? "üåü Unit 1 Complete!" : "üí™ Keep Training"), /* @__PURE__ */ React.createElement("p", { style: { color: SUB, fontSize: 14, lineHeight: 1.7 } }, defeated ? "You've conquered all of Standard English Conventions! You now have the grammar foundation that covers ~26% of the SAT R&W section. Unit 2 opens up the Vocabulary & Craft domain ‚Äî where Words in Context questions live." : pct >= 60 ? "You're close! Review the skills where you missed questions, especially in Phase 3. The harder questions often combine multiple rules ‚Äî like a dangling modifier inside a sentence with a tense shift. Replay to sharpen your instincts." : "Focus on the fundamentals: go back to the modules for the skill types you missed most. Once boundaries, agreement, and modifiers each feel automatic on their own, they'll be much easier to handle when mixed together.")), (() => {
    const weakest = Object.entries(skillBreakdown).sort((a, b) => a[1].correct / a[1].total - b[1].correct / b[1].total)[0];
    if (!weakest) return null;
    const [sk, d] = weakest;
    const meta = SKILL_META[sk];
    const wPct = Math.round(d.correct / d.total * 100);
    if (wPct >= 80) return null;
    return /* @__PURE__ */ React.createElement("div", { style: { background: `${meta.color}11`, border: `1px solid ${meta.color}33`, borderRadius: 14, padding: 20, marginBottom: 20 } }, /* @__PURE__ */ React.createElement("div", { style: { color: meta.color, fontWeight: 700, fontSize: 14, marginBottom: 6 } }, meta.icon, " Weakest Skill: ", meta.label, " (", wPct, "%)"), /* @__PURE__ */ React.createElement("div", { style: { color: SUB, fontSize: 13, lineHeight: 1.6 } }, sk === "boundary" && "Review Module 1: Sentence Boundaries. Focus on comma splice identification and the semicolon rule (both sides must be independent).", sk === "agreement" && "Review Module 2: Agreement & Verb Tense. Practice the cross-out method for intervening phrases and the Subject Hunt game.", sk === "modifier" && "Review Module 3: Modifiers. The key rule: after an introductory phrase, the subject must be the one performing that action.", sk === "parallel" && "Review Module 3: Parallelism. Check every list for matching forms and verify correlative pairs (not only/but also).", sk === "comparison" && 'Review Module 3: Comparisons. Always check: am I comparing the same TYPE of thing on both sides of "than" or "like"?', sk === "tense" && "Review Module 2: Verb Tense. Look for time markers and remember: past perfect (had + verb) for events before other past events."));
  })(), /* @__PURE__ */ React.createElement("div", { style: { background: CARD, border: `1px solid ${BORDER}`, borderRadius: 14, padding: 20 } }, /* @__PURE__ */ React.createElement("div", { style: { color: TEXT, fontWeight: 700, fontSize: 15, marginBottom: 12 } }, "Module Roadmap"), [
    { n: "1-3", label: "Conventions (Complete!)", note: "Boundaries, Agreement, Structure", color: ACCENT, done: true },
    { n: "4", label: "Boss Battle", note: defeated ? "Defeated!" : "In progress...", color: RED, done: defeated },
    { n: "5-6", label: "Vocabulary & Craft", note: "Words in Context, tone, precision", color: ACCENT2, done: false },
    { n: "7-8", label: "Advanced Craft", note: "Text structure, cross-text, boss battle", color: ACCENT2, done: false },
    { n: "9-11", label: "Information & Ideas", note: "Comprehension, evidence, inference", color: BLUE, done: false }
  ].map((m, i) => /* @__PURE__ */ React.createElement("div", { key: i, style: { display: "flex", alignItems: "center", gap: 12, padding: "8px 0", borderBottom: i < 4 ? `1px solid ${BORDER}` : "none" } }, /* @__PURE__ */ React.createElement("div", { style: { width: 24, height: 24, borderRadius: 12, background: m.done ? `${m.color}22` : BORDER, border: `2px solid ${m.done ? m.color : BORDER}`, display: "flex", alignItems: "center", justifyContent: "center" } }, m.done && /* @__PURE__ */ React.createElement("span", { style: { color: m.color, fontSize: 12 } }, "‚úì")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { style: { color: m.done ? TEXT : MUTED, fontSize: 13, fontWeight: 600 } }, "M", m.n, ": ", m.label), /* @__PURE__ */ React.createElement("div", { style: { color: MUTED, fontSize: 11 } }, m.note)))))));
}
function App() {
  const [screen, setScreen] = useState("welcome");
  const [fade, setFade] = useState(true);
  const [battleData, setBattleData] = useState(null);
  const go = useCallback((to) => {
    setFade(false);
    setTimeout(() => {
      setScreen(to);
      window.scrollTo(0, 0);
      setFade(true);
    }, 350);
  }, []);
  return /* @__PURE__ */ React.createElement("div", { style: { minHeight: "100vh", background: DARK, color: TEXT, fontFamily: "'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif" } }, /* @__PURE__ */ React.createElement("div", { style: {
    position: "fixed",
    inset: 0,
    pointerEvents: "none",
    opacity: 0.03,
    backgroundImage: "linear-gradient(rgba(255,255,255,.1) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.1) 1px,transparent 1px)",
    backgroundSize: "40px 40px"
  } }), /* @__PURE__ */ React.createElement("div", { style: { position: "relative", zIndex: 1, transition: "opacity .35s,transform .35s", opacity: fade ? 1 : 0, transform: fade ? "translateY(0)" : "translateY(8px)" } }, screen === "welcome" && /* @__PURE__ */ React.createElement(Welcome, { onNext: () => go("battle") }), screen === "battle" && /* @__PURE__ */ React.createElement(BattleArena, { onComplete: (d) => {
    setBattleData(d);
    go("results");
  } }), screen === "results" && battleData && /* @__PURE__ */ React.createElement(Results, { data: battleData })));
}
const { createRoot } = ReactDOM;
createRoot(document.getElementById("root")).render(React.createElement(App));
</script></body></html>
