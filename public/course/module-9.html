<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 9: Full Practice Test & Deep Error Analysis ‚Äî PantherPrep</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--ink:#f0f0f0;--paper:#121212;--accent:#C8102E;--accent-light:rgba(200,16,46,.15);--border:#2a2a2a;--muted:#999;--surface:#1a1a1a;--craft:#60a5fa;--info:#34d399;--express:#fbbf24;--convention:#f87171;--correct:#22c55e;--correct-bg:rgba(34,197,94,.12);--wrong:#ef4444;--wrong-bg:rgba(239,68,68,.12);--purple:#a78bfa}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);line-height:1.65}
.top-stripe{height:4px;background:linear-gradient(90deg,#C8102E 0%,#C8102E 50%,#fff 50%,#fff 100%);position:fixed;top:0;left:0;right:0;z-index:100}
.container{max-width:800px;margin:0 auto;padding:20px 20px 60px}
.back-link{display:inline-flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem;padding:8px 0;margin-top:8px;cursor:pointer;text-decoration:none}
.back-link:hover{color:var(--accent)}
.mod-header{padding:40px 0 30px;border-bottom:1px solid var(--border);margin-bottom:32px}
.mod-badge{display:inline-block;background:var(--accent);color:#fff;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:14px}
.mod-header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700;margin-bottom:6px}
.mod-header .subtitle{color:var(--muted);font-size:1rem}
.mod-meta{display:flex;gap:20px;margin-top:14px;font-size:.82rem;color:var(--muted)}
.section{margin-bottom:36px}
.section-label{font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:6px}
.section h2{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:700;margin-bottom:12px}
.section p{color:#ccc;font-size:.93rem;margin-bottom:12px;line-height:1.7}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:12px}
.card-accent{border-left:3px solid var(--accent)}
.callout{background:var(--accent-light);border:1px solid rgba(200,16,46,.3);border-radius:10px;padding:14px 18px;margin-bottom:16px;font-size:.9rem}
.callout strong{color:var(--accent)}

/* CHECKLIST */
.checklist{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:20px;margin-bottom:16px}
.checklist h3{font-family:'Cormorant Garamond',serif;font-size:1.2rem;margin-bottom:12px}
.cl-item{display:flex;align-items:flex-start;gap:10px;padding:8px 0;border-bottom:1px solid var(--border);font-size:.9rem;color:#ccc;cursor:pointer;transition:opacity .2s}
.cl-item:last-child{border-bottom:none}
.cl-item.done{opacity:.5;text-decoration:line-through}
.cl-check{flex-shrink:0;width:22px;height:22px;border:2px solid var(--border);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:.7rem;transition:all .15s}
.cl-item.done .cl-check{background:var(--correct);border-color:var(--correct);color:#fff}
.cl-progress{font-size:.82rem;color:var(--muted);margin-top:8px;text-align:right}

/* PROTOCOL STEPS */
.protocol{background:var(--surface);border:2px solid var(--accent);border-radius:14px;overflow:hidden;margin-bottom:16px}
.protocol-title{background:var(--accent);padding:12px 20px;font-weight:700;font-size:.95rem}
.protocol-step{display:flex;gap:14px;padding:14px 20px;border-bottom:1px solid var(--border);font-size:.9rem;color:#ccc;align-items:flex-start}
.protocol-step:last-child{border-bottom:none}
.step-num{flex-shrink:0;width:28px;height:28px;border-radius:50%;background:var(--accent-light);border:1px solid var(--accent);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.82rem;color:var(--accent);font-family:'JetBrains Mono',monospace}

/* PATTERN REPORT */
.report{background:var(--surface);border:2px solid var(--craft);border-radius:14px;padding:22px;margin-bottom:16px}
.report h3{font-family:'Cormorant Garamond',serif;font-size:1.3rem;margin-bottom:4px}
.report-sub{font-size:.85rem;color:var(--muted);margin-bottom:16px}
.report-section{margin-bottom:20px}
.report-section-label{font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
.report-section-label.rs-blue{color:var(--craft)}
.report-section-label.rs-green{color:var(--info)}
.report-section-label.rs-yellow{color:var(--express)}
.report-section-label.rs-red{color:var(--convention)}
.report-section-label.rs-purple{color:var(--purple)}
.report-row{display:flex;align-items:center;gap:10px;margin-bottom:6px}
.report-label{flex:1;font-size:.88rem;color:#ccc}
.report-input{width:60px;padding:6px 8px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:.9rem;text-align:center}
.report-input:focus{border-color:var(--craft);outline:none}
.report-bar{flex:2;height:8px;background:var(--border);border-radius:4px;overflow:hidden;max-width:200px}
.report-bar-fill{height:100%;border-radius:4px;transition:width .3s}
.report-total{display:flex;align-items:center;gap:12px;padding:12px 0;border-top:1px solid var(--border);margin-top:8px}
.report-total-label{font-weight:700;font-size:.9rem}
.report-total-val{font-family:'JetBrains Mono',monospace;font-size:1.3rem;font-weight:700}
.report-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}

/* PRIORITY AREA */
.priority-box{background:var(--paper);border:2px dashed var(--express);border-radius:12px;padding:16px;margin-top:16px}
.priority-title{font-weight:700;font-size:.95rem;color:var(--express);margin-bottom:10px}
.priority-item{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.priority-num{width:24px;height:24px;border-radius:50%;background:var(--express);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.78rem;flex-shrink:0}
.priority-input{flex:1;padding:6px 10px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.88rem}
.priority-input:focus{border-color:var(--express);outline:none}

/* ERROR CLASSIFICATION EXERCISE */
.ec-box{background:var(--surface);border:2px solid var(--info);border-radius:14px;padding:22px;margin-bottom:16px}
.ec-item{background:var(--paper);border-radius:10px;padding:14px;margin-bottom:10px}
.ec-scenario{font-size:.92rem;line-height:1.6;margin-bottom:10px;color:#ddd}
.ec-options{display:flex;flex-wrap:wrap;gap:6px}
.ec-opt{padding:6px 14px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.82rem;transition:all .15s}
.ec-opt:hover:not(.ec-dis){border-color:var(--accent);background:var(--accent-light)}
.ec-opt.ec-correct{border-color:var(--correct);background:var(--correct-bg);color:var(--correct)}
.ec-opt.ec-wrong{border-color:var(--wrong);background:var(--wrong-bg);color:var(--wrong)}
.ec-opt.ec-dis{pointer-events:none;opacity:.6}
.ec-fb{margin-top:8px;font-size:.82rem;color:var(--muted);display:none;line-height:1.4}
.ec-fb.show{display:block}

/* VISUALIZATIONS */
.viz-donut{position:relative;width:160px;height:160px;margin:0 auto 12px}
.viz-center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}
.viz-center-val{font-family:'JetBrains Mono',monospace;font-size:1.5rem;font-weight:700}
.viz-center-label{font-size:.72rem;color:var(--muted);text-transform:uppercase}
.viz-legend{display:flex;flex-wrap:wrap;justify-content:center;gap:12px;font-size:.8rem;color:#ccc}
.viz-legend-item{display:flex;align-items:center;gap:4px}
.viz-dot{width:10px;height:10px;border-radius:50%}

.btn{display:inline-block;background:var(--accent);color:#fff;font-family:inherit;font-size:.9rem;font-weight:600;padding:10px 24px;border:none;border-radius:8px;cursor:pointer;transition:all .2s}
.btn:hover{background:#a00d24}
.btn-sm{padding:8px 16px;font-size:.82rem}
.btn-blue{background:var(--craft)}.btn-blue:hover{background:#4b8fda}
.btn-outline{background:transparent;border:2px solid var(--accent);color:var(--accent)}
.btn-outline:hover{background:var(--accent-light)}

/* NAV */
.mod-nav{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-top:1px solid var(--border);margin-top:40px}
.mod-nav a{color:var(--accent);text-decoration:none;font-weight:600;font-size:.9rem;display:flex;align-items:center;gap:6px}
.mod-nav a:hover{text-decoration:underline}

@media(max-width:600px){.mod-meta{flex-wrap:wrap;gap:10px}.report-grid{grid-template-columns:1fr}.ec-options{flex-direction:column}}
</style>
</head>
<body>
<div class="top-stripe"></div>
<div class="container">
<a class="back-link" href="index.html">‚Üê Back to Course</a>

<div class="mod-header">
  <div class="mod-badge">Module 9</div>
  <h1>Full Practice Test & Deep Error Analysis</h1>
  <p class="subtitle">Everything comes together. Take a full test, then analyze it to unlock your final gains.</p>
  <div class="mod-meta">
    <span>‚è± 2 full sessions</span>
    <span>üìã Session 1: Test ¬∑ Session 2: Analysis</span>
    <span>üîÑ Phase 4: Reflect</span>
  </div>
</div>

<!-- INTRO -->
<div class="section">
  <div class="section-label">The Purpose</div>
  <h2>Why This Module Matters</h2>
  <div class="callout">
    <strong>This is not "just another practice test."</strong> Module 9 is where you apply everything from Modules 1‚Äì8 under real conditions ‚Äî and then conduct the most thorough error analysis of the entire program. The test itself is only half the value. The analysis afterward is where the real learning happens.
  </div>
  <p>You've built content knowledge (vocabulary, grammar, reading strategies) and layered test-taking strategies on top (POE, POOD, Second Half First). Now it's time to see how it all performs under pressure ‚Äî and identify the 2‚Äì3 highest-impact areas for your final push.</p>
</div>

<!-- PRE-TEST CHECKLIST -->
<div class="section">
  <div class="section-label">Before the Test</div>
  <h2>Pre-Test Checklist</h2>
  <p>Make sure all of these are in place before starting your practice test.</p>
  <div class="checklist" id="preChecklist"></div>
</div>

<!-- PRACTICE TEST PROTOCOL -->
<div class="section">
  <div class="section-label">Session 1</div>
  <h2>Practice Test Protocol</h2>
  <div class="protocol">
    <div class="protocol-title">Full Practice Test Protocol</div>
    <div class="protocol-step"><div class="step-num">1</div><div>Open the Bluebook app (or your practice materials). Set up a full R&W section: Module 1 (27 questions, 32 minutes) + Module 2 (27 questions, 32 minutes).</div></div>
    <div class="protocol-step"><div class="step-num">2</div><div>Enforce strict timing. No pauses between questions. Use a real timer. Treat this as test day ‚Äî no phone, no distractions, no bathroom breaks during a module.</div></div>
    <div class="protocol-step"><div class="step-num">3</div><div>Use your strategies: Second Half First (if practiced), POE with strikethrough, Letter of the Day for guesses, Mark for Review on uncertain questions.</div></div>
    <div class="protocol-step"><div class="step-num">4</div><div>After EACH module, self-score immediately using the answer key.</div></div>
    <div class="protocol-step"><div class="step-num">5</div><div>Mark every question you were unsure about, even if you got it correct. These "lucky guesses" reveal hidden weaknesses.</div></div>
    <div class="protocol-step"><div class="step-num">6</div><div>Complete the Error Analysis Worksheet (Module 1) for every missed AND uncertain question.</div></div>
  </div>
  <div class="callout"><strong>Important:</strong> The practice test should be taken on the <a href="https://bluebook.collegeboard.org/" target="_blank" style="color:var(--craft)">College Board Bluebook app</a> if possible. It's the only tool that accurately simulates the Digital SAT experience, including the adaptive Module 2.</div>
</div>

<!-- POST-TEST CHECKLIST -->
<div class="section">
  <div class="section-label">After the Test</div>
  <h2>Post-Test Checklist</h2>
  <div class="checklist" id="postChecklist"></div>
</div>

<!-- ERROR CLASSIFICATION EXERCISE -->
<div class="section">
  <div class="section-label">Interactive Exercise</div>
  <h2>Error Classification Practice</h2>
  <p>Before you analyze your own errors, practice classifying these sample scenarios. Correctly identifying your error type is the key to knowing what to fix.</p>
  <div class="ec-box" id="ecBox"></div>
  <div id="ecScore" style="text-align:center;padding:10px 0;font-size:.88rem;color:var(--muted)"></div>
</div>

<!-- PATTERN REPORT -->
<div class="section">
  <div class="section-label">Session 2: Interactive Tool</div>
  <h2>Pattern Report Builder</h2>
  <p>Enter your error counts from the practice test. The tool will calculate your patterns and help identify your top priority areas. All data stays in your browser.</p>
  <div class="report" id="patternReport"></div>
</div>

<!-- INTERPRETING RESULTS -->
<div class="section">
  <div class="section-label">Analysis</div>
  <h2>How to Interpret Your Pattern Report</h2>

  <div class="card card-accent">
    <h4 style="margin-bottom:8px">If most errors are Content Gaps:</h4>
    <p style="margin:0;font-size:.9rem;color:#ccc">You need more study time on specific rules or concepts. Go back to the relevant module and review. This is the most fixable error type.</p>
  </div>
  <div class="card" style="border-left:3px solid var(--express)">
    <h4 style="margin-bottom:8px">If most errors are Careless Errors:</h4>
    <p style="margin:0;font-size:.9rem;color:#ccc">You know the material but are making avoidable mistakes. Slow down, read more carefully, and use POE systematically. Check: are you reading ALL four answer choices?</p>
  </div>
  <div class="card" style="border-left:3px solid var(--convention)">
    <h4 style="margin-bottom:8px">If most errors are Time Pressure:</h4>
    <p style="margin:0;font-size:.9rem;color:#ccc">Practice the Second Half First strategy and work on pace. Consider: are you spending too long on hard questions? Flag and move on after 90 seconds.</p>
  </div>
  <div class="card" style="border-left:3px solid var(--craft)">
    <h4 style="margin-bottom:8px">If most errors are Misread/Trap:</h4>
    <p style="margin:0;font-size:.9rem;color:#ccc">You're falling for distractor answers. Practice POE more aggressively ‚Äî cross out wrong answers before choosing. Ask: "Can I point to text that supports this?"</p>
  </div>
  <div class="card" style="border-left:3px solid var(--purple)">
    <h4 style="margin-bottom:8px">If most errors are Strategy Gaps:</h4>
    <p style="margin:0;font-size:.9rem;color:#ccc">Review Module 8 strategies. You may know the content but not the most efficient way to apply it under test conditions.</p>
  </div>
</div>

<!-- SCORE COMPARISON -->
<div class="section">
  <div class="section-label">Interactive Tool</div>
  <h2>Progress Tracker</h2>
  <p>Compare your Module 1 diagnostic score with your practice test score to see your growth.</p>
  <div class="card" style="border:2px solid var(--correct)">
    <div style="display:grid;grid-template-columns:1fr auto 1fr;gap:16px;align-items:center;text-align:center">
      <div>
        <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px">Module 1 Baseline</div>
        <input type="number" id="baselineScore" placeholder="‚Äî" min="0" max="54" style="width:80px;padding:8px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1.4rem;text-align:center;font-weight:700" oninput="updateProgress()">
        <div style="font-size:.78rem;color:var(--muted);margin-top:4px">out of 54</div>
      </div>
      <div style="font-size:2rem;color:var(--muted)">‚Üí</div>
      <div>
        <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px">Practice Test Score</div>
        <input type="number" id="practiceScore" placeholder="‚Äî" min="0" max="54" style="width:80px;padding:8px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1.4rem;text-align:center;font-weight:700" oninput="updateProgress()">
        <div style="font-size:.78rem;color:var(--muted);margin-top:4px">out of 54</div>
      </div>
    </div>
    <div id="progressResult" style="text-align:center;margin-top:14px;font-size:.9rem;color:var(--muted)">Enter both scores to see your growth.</div>
  </div>
</div>

<!-- KEY TAKEAWAYS -->
<div class="section">
  <div class="section-label">Summary</div>
  <h2>Key Takeaways</h2>
  <div class="card card-accent">
    <ol style="padding-left:18px;font-size:.93rem;color:#ccc;line-height:2">
      <li>The practice test is only half the value ‚Äî the error analysis is where the real learning happens.</li>
      <li>Classify every error by type: Content Gap, Careless, Time Pressure, Misread/Trap, Strategy Gap.</li>
      <li>Look for PATTERNS, not individual mistakes. Your top error type tells you exactly what to fix.</li>
      <li>Identify your 2‚Äì3 highest-impact priority areas for remaining study time.</li>
      <li>"Lucky correct" answers on uncertain questions are hidden weaknesses ‚Äî analyze those too.</li>
      <li>Your Module 10 review should be entirely driven by your Pattern Report results.</li>
    </ol>
  </div>
</div>

<!-- HOMEWORK -->
<div class="section">
  <div class="section-label">Before Module 10</div>
  <h2>What to Do Next</h2>
  <div class="card card-accent" style="font-size:.93rem;color:#ccc">
    <p><strong style="color:var(--ink)">1. Complete Your Pattern Report</strong> ‚Äî Fill in every section of the Pattern Report Builder above. Export or screenshot your results.</p>
    <p><strong style="color:var(--ink)">2. Identify Your Top 3 Priorities</strong> ‚Äî Write them in the priority area section. These will drive your Module 10 review.</p>
    <p><strong style="color:var(--ink)">3. Review Your Highest-Error Module</strong> ‚Äî Go back to the module that corresponds to your weakest domain and review the lesson content.</p>
    <p style="margin:0"><strong style="color:var(--ink)">4. Practice 10 Questions</strong> ‚Äî Focus exclusively on your weakest question type. Quality over quantity.</p>
  </div>
</div>

<div class="mod-nav">
  <a href="module-8.html">‚Üê Module 8: Test Strategy</a>
  <a href="module-10.html">Module 10: Final Review ‚Üí</a>
</div>
</div>

<script>
// ============ CHECKLISTS ============
const PRE_ITEMS=[
  'Bluebook app downloaded, updated, and logged in (or alternative practice test printed)',
  'Quiet testing environment ‚Äî no distractions, door closed',
  'Timer ready (phone timer or clock visible)',
  'Scratch paper and pencil available',
  'Phone silenced and out of reach',
  'Water and snack available for break between modules',
  'Strategy plan decided: Second Half First? POE? LOTD letter chosen?',
  'Error Analysis Worksheet ready (Module 1 worksheet or blank paper)',
];
const POST_ITEMS=[
  'Self-scored both modules immediately using answer key',
  'Marked every uncertain question (even if answered correctly)',
  'Completed Error Analysis Worksheet for each incorrect answer',
  'Completed Error Analysis Worksheet for each uncertain-but-correct answer',
  'Filled in the Pattern Report Builder below',
  'Identified top 3 priority areas for remaining study time',
  'Compared baseline score to practice test score',
  'Created a plan for Module 10 targeted review',
];

function renderChecklist(items,containerId,storageKey){
  const saved=JSON.parse(localStorage.getItem(storageKey)||'{}');
  const el=document.getElementById(containerId);
  const done=Object.values(saved).filter(v=>v).length;
  el.innerHTML=`<h3>${containerId==='preChecklist'?'‚úÖ Pre-Test Setup':'‚úÖ Post-Test Actions'}</h3>`+
    items.map((item,i)=>{
      const checked=saved[i]||false;
      return `<div class="cl-item${checked?' done':''}" onclick="toggleCheck('${storageKey}',${i})">
        <div class="cl-check">${checked?'‚úì':''}</div><div>${item}</div></div>`;
    }).join('')+
    `<div class="cl-progress">${done}/${items.length} completed</div>`;
}
function toggleCheck(key,i){
  const saved=JSON.parse(localStorage.getItem(key)||'{}');
  saved[i]=!saved[i];
  localStorage.setItem(key,JSON.stringify(saved));
  if(key==='pp_m9_pre')renderChecklist(PRE_ITEMS,'preChecklist','pp_m9_pre');
  else renderChecklist(POST_ITEMS,'postChecklist','pp_m9_post');
}
renderChecklist(PRE_ITEMS,'preChecklist','pp_m9_pre');
renderChecklist(POST_ITEMS,'postChecklist','pp_m9_post');

// ============ ERROR CLASSIFICATION EXERCISE ============
const EC_ITEMS=[
  {scenario:'You missed a subject-verb agreement question. Looking back, you realize you\'ve never learned the rule about collective nouns taking singular verbs. You chose "have" instead of "has" for "the committee."',
   correct:'Content Gap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],
   fb:'You didn\'t know the rule. That\'s a content gap ‚Äî go back to Module 3, Rule 3.'},
  {scenario:'You answered a main idea question correctly on the first read, but then changed your answer in the last minute because another choice "sounded better." Your original answer was right.',
   correct:'Careless Error',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],
   fb:'You knew the answer but changed it. Classic careless error ‚Äî trust your first instinct when you\'ve read carefully.'},
  {scenario:'You ran out of time with 4 questions left and had to guess randomly on all of them. You got 1 right and 3 wrong.',
   correct:'Time Pressure',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],
   fb:'Running out of time is a time pressure error. Practice pacing and the Second Half First strategy.'},
  {scenario:'On a vocabulary question, you chose "provocative" because the passage was about a controversial study. But the question asked about the researcher\'s approach (which was "nuanced"), not the topic.',
   correct:'Misread/Trap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],
   fb:'You fell for a trap ‚Äî "provocative" relates to the topic but not to what the question actually asked. Read the question stem more carefully.'},
  {scenario:'You got a rhetorical synthesis question wrong. You understood all the bullet points, but you didn\'t read the goal statement carefully enough and chose an answer that was factually correct but didn\'t accomplish the stated purpose.',
   correct:'Strategy Gap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],
   fb:'You didn\'t apply the rhetorical synthesis strategy (read the GOAL first). This is a strategy gap ‚Äî review Module 7.'},
  {scenario:'On a transition question, you chose "furthermore" instead of "however." Looking back, Sentence 2 clearly contrasted Sentence 1, but you were moving too fast to notice.',
   correct:'Careless Error',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],
   fb:'You know the difference between continuation and contrast transitions, but you rushed and didn\'t identify the relationship. Slow down on transitions.'},
  {scenario:'You missed an inference question because you chose an answer that made a reasonable conclusion ‚Äî but it required an assumption that wasn\'t in the passage. The correct answer was more boring and directly text-supported.',
   correct:'Misread/Trap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],
   fb:'You fell for an attractive but unsupported inference. Remember: SAT inferences are boring. The correct answer is always the most conservative, text-supported conclusion.'},
  {scenario:'You missed a question about comma usage with nonessential clauses. You\'ve studied this rule but still confuse essential and nonessential in complex sentences.',
   correct:'Content Gap',options:['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'],
   fb:'Even though you\'ve studied the rule, you haven\'t mastered it yet for complex cases. This is still a content gap ‚Äî practice more Module 3, Rule 2 examples.'},
];

let ecAns={};
function renderEC(){
  document.getElementById('ecBox').innerHTML=EC_ITEMS.map((e,i)=>{
    const ans=ecAns[i];const has=ans!==undefined;
    return `<div class="ec-item">
      <div style="font-size:.78rem;font-weight:700;color:var(--muted);margin-bottom:6px">Scenario ${i+1}</div>
      <div class="ec-scenario">${e.scenario}</div>
      <div class="ec-options">${e.options.map(o=>{
        let cls='ec-opt';
        if(has){cls+=' ec-dis';if(o===e.correct)cls+=' ec-correct';else if(o===ans&&o!==e.correct)cls+=' ec-wrong';}
        return `<div class="${cls}" onclick="ansEC(${i},'${o}')">${o}</div>`;
      }).join('')}</div>
      <div class="ec-fb${has?' show':''}">${has?(ans===e.correct?'‚úì Correct! ':'‚úó Incorrect. ')+e.fb:''}</div>
    </div>`;
  }).join('');
  const t=EC_ITEMS.length,a=Object.keys(ecAns).length,c=Object.entries(ecAns).filter(([i,v])=>v===EC_ITEMS[i].correct).length;
  document.getElementById('ecScore').innerHTML=a===t?`<strong style="color:${c>=6?'var(--correct)':c>=4?'var(--express)':'var(--wrong)'}">${c}/${t} correct</strong> ‚Äî ${c>=6?'You\'re ready to classify your own errors accurately!':c>=4?'Good ‚Äî review the ones you missed.':'Review the 5 error types before analyzing your test.'}`:`${a}/${t} completed`;
}
function ansEC(i,v){if(ecAns[i]!==undefined)return;ecAns[i]=v;renderEC();}
renderEC();

// ============ PATTERN REPORT ============
const REPORT_KEY='pp_m9_report';
function loadReport(){return JSON.parse(localStorage.getItem(REPORT_KEY)||'{}');}
function saveReport(d){localStorage.setItem(REPORT_KEY,JSON.stringify(d));}

const ERROR_TYPES=['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'];
const ET_COLORS=['#C8102E','#f59e0b','#ef4444','#60a5fa','#a78bfa'];
const DOMAINS=['Information & Ideas','Craft & Structure','Expression of Ideas','Standard English Conventions'];
const DOM_COLORS=['#34d399','#60a5fa','#fbbf24','#f87171'];
const Q_TYPES=['Vocabulary','Main Idea','Evidence','Inference','Dual Passage','Data','Transitions','Rhetorical Synthesis','Grammar','Punctuation'];

function renderReport(){
  const d=loadReport();
  const el=document.getElementById('patternReport');

  function makeRows(items,prefix,colors){
    return items.map((item,i)=>{
      const val=d[prefix+i]||0;
      return `<div class="report-row">
        <div class="report-label">${item}</div>
        <input class="report-input" type="number" min="0" max="54" value="${val||''}" placeholder="0"
          onchange="updateReport('${prefix+i}',this.value)">
        <div class="report-bar"><div class="report-bar-fill" style="width:${Math.min(val*8,100)}%;background:${colors[i%colors.length]}"></div></div>
      </div>`;
    }).join('');
  }

  const etTotal=ERROR_TYPES.reduce((s,_,i)=>s+(parseInt(d['et'+i])||0),0);
  const domTotal=DOMAINS.reduce((s,_,i)=>s+(parseInt(d['dom'+i])||0),0);
  const qtTotal=Q_TYPES.reduce((s,_,i)=>s+(parseInt(d['qt'+i])||0),0);

  el.innerHTML=`
    <h3>üìä Pattern Report Builder</h3>
    <div class="report-sub">Enter the number of errors for each category. Data auto-saves in your browser.</div>

    <div class="report-grid">
      <div>
        <div class="report-section">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="report-section-label rs-blue">Scores</div>
          </div>
          <div class="report-row">
            <div class="report-label">Module 1 Raw Score</div>
            <input class="report-input" type="number" min="0" max="27" value="${d.m1score||''}" placeholder="/27"
              onchange="updateReport('m1score',this.value)">
          </div>
          <div class="report-row">
            <div class="report-label">Module 2 Raw Score</div>
            <input class="report-input" type="number" min="0" max="27" value="${d.m2score||''}" placeholder="/27"
              onchange="updateReport('m2score',this.value)">
          </div>
          <div class="report-total">
            <div class="report-total-label">Total Raw Score:</div>
            <div class="report-total-val">${(parseInt(d.m1score)||0)+(parseInt(d.m2score)||0)}/54</div>
          </div>
        </div>
      </div>
      <div>
        <div class="report-section">
          <div class="report-section-label rs-red">Errors by Type (${etTotal} total)</div>
          ${makeRows(ERROR_TYPES,'et',ET_COLORS)}
        </div>
      </div>
    </div>

    <div class="report-section" style="margin-top:16px">
      <div class="report-section-label rs-green">Errors by Domain (${domTotal} total)</div>
      <div class="report-grid">${DOMAINS.map((dom,i)=>{
        const val=d['dom'+i]||0;
        return `<div class="report-row">
          <div class="report-label">${dom}</div>
          <input class="report-input" type="number" min="0" max="54" value="${val||''}" placeholder="0"
            onchange="updateReport('dom${i}',this.value)">
          <div class="report-bar"><div class="report-bar-fill" style="width:${Math.min(val*8,100)}%;background:${DOM_COLORS[i]}"></div></div>
        </div>`;
      }).join('')}</div>
    </div>

    <div class="report-section" style="margin-top:16px">
      <div class="report-section-label rs-yellow">Errors by Question Type (${qtTotal} total)</div>
      <div class="report-grid">${makeRows(Q_TYPES,'qt',['#C8102E','#60a5fa','#34d399','#a78bfa','#f59e0b','#06b6d4','#60a5fa','#fbbf24','#f87171','#f87171'])}</div>
    </div>

    <div class="priority-box">
      <div class="priority-title">üéØ Top 3 Priority Areas for Remaining Study Time</div>
      <div class="priority-item"><div class="priority-num">1</div><input class="priority-input" placeholder="e.g., Grammar ‚Äî nonessential clauses" value="${d.p1||''}" oninput="updateReport('p1',this.value)"></div>
      <div class="priority-item"><div class="priority-num">2</div><input class="priority-input" placeholder="e.g., Reading ‚Äî inference trap answers" value="${d.p2||''}" oninput="updateReport('p2',this.value)"></div>
      <div class="priority-item"><div class="priority-num">3</div><input class="priority-input" placeholder="e.g., Time management ‚Äî pacing on Module 1" value="${d.p3||''}" oninput="updateReport('p3',this.value)"></div>
    </div>

    <div style="margin-top:14px;text-align:center">
      <button class="btn btn-sm btn-blue" onclick="exportReport()">üìã Export Report to Clipboard</button>
      <button class="btn btn-sm btn-outline" onclick="if(confirm('Clear all report data?')){localStorage.removeItem('${REPORT_KEY}');renderReport()}" style="margin-left:8px">Reset</button>
    </div>
  `;
}

function updateReport(key,val){
  const d=loadReport();
  d[key]=val;
  saveReport(d);
  renderReport();
}

function exportReport(){
  const d=loadReport();
  let txt='PATTERN REPORT ‚Äî PantherPrep SAT R&W Course\n';
  txt+='‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
  txt+=`Module 1 Raw Score: ${d.m1score||'‚Äî'}/27\n`;
  txt+=`Module 2 Raw Score: ${d.m2score||'‚Äî'}/27\n`;
  txt+=`Total: ${(parseInt(d.m1score)||0)+(parseInt(d.m2score)||0)}/54\n\n`;
  txt+='ERRORS BY TYPE:\n';
  ERROR_TYPES.forEach((t,i)=>txt+=`  ${t}: ${d['et'+i]||0}\n`);
  txt+='\nERRORS BY DOMAIN:\n';
  DOMAINS.forEach((t,i)=>txt+=`  ${t}: ${d['dom'+i]||0}\n`);
  txt+='\nERRORS BY QUESTION TYPE:\n';
  Q_TYPES.forEach((t,i)=>txt+=`  ${t}: ${d['qt'+i]||0}\n`);
  txt+='\nTOP 3 PRIORITIES:\n';
  txt+=`  1. ${d.p1||'‚Äî'}\n  2. ${d.p2||'‚Äî'}\n  3. ${d.p3||'‚Äî'}\n`;
  navigator.clipboard.writeText(txt).then(()=>alert('Report copied to clipboard!')).catch(()=>{
    const ta=document.createElement('textarea');ta.value=txt;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);alert('Report copied!');
  });
}
renderReport();

// ============ PROGRESS TRACKER ============
function updateProgress(){
  const b=parseInt(document.getElementById('baselineScore').value);
  const p=parseInt(document.getElementById('practiceScore').value);
  const el=document.getElementById('progressResult');
  if(isNaN(b)||isNaN(p)){el.textContent='Enter both scores to see your growth.';el.style.color='var(--muted)';return;}
  const diff=p-b;
  if(diff>0){
    el.innerHTML=`<strong style="color:var(--correct)">+${diff} questions improved!</strong> That's a <strong>${Math.round(diff/b*100)}%</strong> improvement from your baseline. Great progress! üéâ`;
  }else if(diff===0){
    el.innerHTML=`<span style="color:var(--express)">Same score as baseline.</span> Check your Pattern Report ‚Äî are you making different errors now? That can still be progress even if the score hasn't changed yet.`;
  }else{
    el.innerHTML=`<span style="color:var(--wrong)">${diff} from baseline.</span> Don't worry ‚Äî this can happen when you're learning new strategies. Check your Pattern Report to see what shifted. The strategies may need more practice time.`;
  }
}
</script>
<script src="/translate.js"></script></body>
</html>
