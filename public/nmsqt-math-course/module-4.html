<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 4: Problem-Solving & Data Analysis ‚Äî PSAT/NMSQT Math ‚Äî PantherPrep</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--ink:#f0f0f0;--paper:#121212;--accent:#C8102E;--accent-light:rgba(200,16,46,.15);--border:#2a2a2a;--muted:#999;--surface:#1a1a1a;--math:#60a5fa;--math-bg:rgba(96,165,250,.1);--algebra:#34d399;--advanced:#a78bfa;--adv-bg:rgba(167,139,250,.1);--psda:#fbbf24;--psda-bg:rgba(251,191,36,.1);--geotrig:#f87171;--correct:#22c55e;--correct-bg:rgba(34,197,94,.12);--wrong:#ef4444;--wrong-bg:rgba(239,68,68,.12)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);line-height:1.65}
.top-stripe{height:4px;background:linear-gradient(90deg,#C8102E 0%,#C8102E 50%,#fff 50%,#fff 100%);position:fixed;top:0;left:0;right:0;z-index:100}
.progress-bar{position:fixed;top:4px;left:0;right:0;height:3px;background:var(--border);z-index:99}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--psda));width:0%;transition:width .3s ease}
.container{max-width:800px;margin:0 auto;padding:20px 20px 60px}
.back-link{display:inline-flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem;padding:8px 0;margin-top:8px;cursor:pointer;text-decoration:none}
.back-link:hover{color:var(--accent)}
.mod-header{padding:40px 0 30px;border-bottom:1px solid var(--border);margin-bottom:32px}
.mod-badge{display:inline-block;background:var(--psda);color:#111;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:14px}
.mod-header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700;margin-bottom:6px}
.mod-header .subtitle{color:var(--muted);font-size:1rem}
.mod-meta{display:flex;gap:20px;margin-top:14px;font-size:.82rem;color:var(--muted)}
.section{margin-bottom:36px}
.section-label{font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--psda);margin-bottom:6px}
.section h2{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:700;margin-bottom:12px}
.section p{color:#ccc;font-size:.93rem;margin-bottom:12px;line-height:1.7}
.callout{background:var(--accent-light);border:1px solid rgba(200,16,46,.3);border-radius:10px;padding:14px 18px;margin-bottom:16px;font-size:.9rem}
.callout strong{color:var(--accent)}
.callout-blue{background:var(--math-bg);border-color:rgba(96,165,250,.3)}
.callout-blue strong{color:var(--math)}
.callout-yellow{background:var(--psda-bg);border-color:rgba(251,191,36,.3)}
.callout-yellow strong{color:var(--psda)}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:12px}
.card-accent{border-left:3px solid var(--accent)}

/* FORMULA GRID */
.fm-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:16px}
.fm-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center}
.fm-name{font-weight:700;font-size:.82rem;color:var(--psda);margin-bottom:4px}
.fm-eq{font-family:'JetBrains Mono',monospace;font-size:.88rem}

/* TOPICS */
.topic{background:var(--surface);border:1px solid var(--border);border-radius:14px;margin-bottom:10px;overflow:hidden}
.topic-header{display:flex;align-items:center;gap:12px;padding:14px 18px;cursor:pointer}
.topic-header:hover{background:rgba(251,191,36,.05)}
.topic-title{font-weight:700;font-size:.95rem;flex:1}
.topic-arrow{color:var(--muted);font-size:.9rem;transition:transform .2s;flex-shrink:0}
.topic.open .topic-arrow{transform:rotate(90deg)}
.topic-body{display:none;padding:0 18px 18px;font-size:.93rem;color:#ccc;line-height:1.7}
.topic.open .topic-body{display:block}
.topic-body h4{color:var(--ink);font-size:.9rem;margin:14px 0 6px;text-transform:uppercase;letter-spacing:.5px}
.topic-body ul{padding-left:18px;margin-bottom:10px}
.topic-body li{margin-bottom:6px}

/* EXERCISES */
.exercise{background:var(--surface);border:2px solid var(--psda);border-radius:14px;padding:22px;margin-bottom:16px}
.exercise h3{font-family:'Cormorant Garamond',serif;font-size:1.15rem;margin-bottom:4px}
.exercise-sub{font-size:.82rem;color:var(--muted);margin-bottom:14px}
.ex-item{background:var(--paper);border-radius:10px;padding:14px;margin-bottom:10px;border:1px solid var(--border)}
.ex-prompt{font-size:.93rem;margin-bottom:10px;line-height:1.6;color:#ddd}
.ex-prompt code{background:var(--psda-bg);color:var(--psda);padding:1px 6px;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:.85rem}
.ex-input-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.ex-input{padding:8px 12px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:.95rem;width:120px}
.ex-input:focus{border-color:var(--psda);outline:none}
.ex-btn{padding:8px 16px;background:var(--psda);color:#111;border:none;border-radius:6px;cursor:pointer;font-family:inherit;font-size:.85rem;font-weight:600}
.ex-btn:hover{background:#e0a800}
.ex-fb{font-size:.85rem;padding:8px 12px;border-radius:6px;margin-top:8px;display:none;line-height:1.5}
.ex-fb.show{display:block}
.ex-fb.correct{background:var(--correct-bg);color:var(--correct);border:1px solid var(--correct)}
.ex-fb.wrong{background:var(--wrong-bg);color:var(--wrong);border:1px solid var(--wrong)}

/* CLASSIFY OPTIONS */
.classify-opts{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:4px}
.classify-opt{padding:6px 14px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.82rem;transition:all .15s}
.classify-opt:hover:not(.cl-dis){border-color:var(--psda);background:var(--psda-bg)}
.classify-opt.cl-correct{border-color:var(--correct);background:var(--correct-bg);color:var(--correct)}
.classify-opt.cl-wrong{border-color:var(--wrong);background:var(--wrong-bg);color:var(--wrong)}
.classify-opt.cl-dis{pointer-events:none;opacity:.7}

/* MC CHOICES */
.mc-choices{display:flex;flex-direction:column;gap:6px}
.mc-choice{padding:10px 14px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.88rem;transition:all .15s;display:flex;align-items:center;gap:10px}
.mc-choice:hover:not(.mc-dis){border-color:var(--psda);background:var(--psda-bg)}
.mc-letter{font-weight:700;color:var(--muted);min-width:24px;font-family:'JetBrains Mono',monospace}
.mc-choice.mc-correct{border-color:var(--correct);background:var(--correct-bg)}
.mc-choice.mc-wrong{border-color:var(--wrong);background:var(--wrong-bg)}
.mc-choice.mc-dis{pointer-events:none;opacity:.7}
.mc-choice.mc-correct .mc-letter{color:var(--correct)}
.mc-choice.mc-wrong .mc-letter{color:var(--wrong)}
.mc-fb{font-size:.85rem;padding:8px 12px;border-radius:6px;margin-top:8px;display:none;line-height:1.5;border-left:3px solid var(--correct);background:var(--paper);color:var(--muted)}
.mc-fb.show{display:block}

/* SCORE BAR */
.score-bar{display:flex;align-items:center;gap:10px;margin-top:14px;padding-top:10px;border-top:1px solid var(--border)}
.score-bar-label{font-size:.78rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1px}
.score-bar-track{flex:1;height:8px;background:var(--border);border-radius:4px;overflow:hidden}
.score-bar-fill{height:100%;background:var(--correct);border-radius:4px;transition:width .4s ease}
.score-bar-val{font-family:'JetBrains Mono',monospace;font-size:.88rem;font-weight:700;color:var(--correct)}

/* STATS EXPLORER */
.stat-exp{background:var(--surface);border:2px solid var(--psda);border-radius:14px;padding:22px;margin-bottom:16px}
.stat-input{width:100%;padding:10px 14px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:.95rem;margin-bottom:14px}
.stat-input:focus{border-color:var(--psda);outline:none}
.stat-results{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.stat-result{background:var(--paper);border-radius:8px;padding:12px;text-align:center}
.stat-val{font-family:'JetBrains Mono',monospace;font-size:1.2rem;font-weight:700}
.stat-label{font-size:.72rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-top:2px}

/* DATA TABLE */
.data-table{width:100%;border-collapse:collapse;font-size:.88rem;margin-bottom:16px}
.data-table th,.data-table td{padding:10px 12px;border:1px solid var(--border);text-align:center}
.data-table th{background:var(--surface);font-weight:700;font-size:.78rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted)}
.data-table td{color:#ccc}
.data-table .highlight{font-weight:700;color:var(--psda);background:var(--psda-bg)}

.tier{font-size:.68rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:2px 8px;border-radius:4px;margin-right:8px}
.tier-1{background:rgba(52,211,153,.15);color:var(--algebra)}
.tier-2{background:var(--math-bg);color:var(--math)}
.tier-3{background:var(--adv-bg);color:var(--advanced)}

/* NAV */
.mod-nav{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-top:1px solid var(--border);margin-top:40px}
.mod-nav a{color:var(--accent);text-decoration:none;font-weight:600;font-size:.9rem;display:flex;align-items:center;gap:6px}
.mod-nav a:hover{text-decoration:underline}

@media(max-width:600px){.mod-meta{flex-wrap:wrap;gap:10px}.fm-grid{grid-template-columns:1fr 1fr}.stat-results{grid-template-columns:1fr 1fr}.classify-opts{flex-direction:column}}
</style>
</head>
<body>
<div class="top-stripe"></div>
<div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
<div class="container">
<a class="back-link" href="index.html">‚Üê Back to PSAT Math Course</a>

<div class="mod-header">
  <div class="mod-badge">Module 4</div>
  <h1>Problem-Solving & Data Analysis</h1>
  <p class="subtitle">Real-world math: ratios, percentages, statistics, probability, and experimental design. ~15% of the PSAT.</p>
  <div class="mod-meta">
    <span>‚è± ~60 min</span>
    <span>üìã 4 topics</span>
    <span>üî® Phase 2: Build</span>
  </div>
</div>

<div class="callout-yellow callout"><strong>Why This Domain Matters:</strong> These 5‚Äì7 questions are often the most "readable" on the test ‚Äî they're word problems grounded in real-world scenarios. Students who struggle with abstract algebra sometimes <em>thrive</em> here. Accuracy in this domain is very achievable.</div>

<!-- ==================== TOPIC 4A ==================== -->
<div class="section">
  <div class="section-label">Topic 4A</div>
  <h2>Ratios, Rates & Proportions</h2>

  <div class="fm-grid">
    <div class="fm-card"><div class="fm-name">Proportion</div><div class="fm-eq">a/b = c/d ‚Üí ad = bc</div></div>
    <div class="fm-card"><div class="fm-name">Unit Rate</div><div class="fm-eq">"per" = √∑</div></div>
    <div class="fm-card"><div class="fm-name">Percent</div><div class="fm-eq">part/whole √ó 100</div></div>
    <div class="fm-card"><div class="fm-name">Percent Change</div><div class="fm-eq">(new ‚àí old)/old √ó 100</div></div>
    <div class="fm-card"><div class="fm-name">Percent Increase</div><div class="fm-eq">new = old √ó (1 + r)</div></div>
    <div class="fm-card"><div class="fm-name">Percent Decrease</div><div class="fm-eq">new = old √ó (1 ‚àí r)</div></div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Unit Conversion & Dimensional Analysis</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p>Multiply by conversion factors so unwanted units cancel:</p>
      <p><strong>Example:</strong> Convert 60 mph to feet per second:</p>
      <p><code>60 miles/hr √ó 5280 ft/mile √ó 1 hr/3600 sec = 88 ft/sec</code></p>
      <p>Set up fractions so units cancel. Miles cancel with miles, hours cancel with hours.</p>
      <div class="callout"><strong>PSAT Trap:</strong> The question gives data in minutes but asks for hours, or gives miles but asks for feet. Always check the units!</div>
    </div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Direct vs. Inverse Proportion</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p><strong>Direct:</strong> y = kx. As x increases, y increases. Doubling x doubles y.</p>
      <p><strong>Inverse:</strong> y = k/x. As x increases, y decreases. Doubling x halves y.</p>
      <p>To identify: if xy is constant ‚Üí inverse. If y/x is constant ‚Üí direct.</p>
    </div>
  </div>
</div>

<!-- ==================== EXERCISE 1: RATIO & PERCENT ==================== -->
<div class="section">
  <div class="section-label">Interactive Exercise 1</div>
  <h2>Ratio & Percent Problems</h2>
  <p>Solve each problem. Type your numerical answer (no % sign needed).</p>
  <div class="exercise" id="ratioEx"></div>
</div>

<!-- ==================== TOPIC 4B ==================== -->
<div class="section">
  <div class="section-label">Topic 4B</div>
  <h2>Statistics: Center, Spread & Shape</h2>

  <div class="topic open" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Mean vs. Median ‚Äî When It Matters</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p><strong>Mean</strong> = sum √∑ count. Sensitive to outliers.</p>
      <p><strong>Median</strong> = middle value (sorted). Resistant to outliers.</p>
      <p><strong>The PSAT's favorite question:</strong> "A very high value is added. Which measure changes more?"</p>
      <p>Answer: The <strong>mean</strong> is always more affected. The median barely budges.</p>
      <p><strong>Example:</strong> Data: 10, 12, 14, 15, 16. Mean = 13.4, Median = 14.<br>
      Add outlier (100): Mean jumps to 27.8. Median only changes to 14.5.</p>
    </div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Standard Deviation & Spread</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p><strong>Range</strong> = max ‚àí min. Simplest measure of spread.</p>
      <p><strong>Standard deviation</strong> = how spread out values are from the mean. You don't need to calculate it ‚Äî just understand:</p>
      <ul>
        <li>Clustered tightly ‚Üí SMALL standard deviation</li>
        <li>Spread far apart ‚Üí LARGE standard deviation</li>
        <li>Adding a constant to every value does NOT change standard deviation</li>
        <li>Multiplying every value by a constant DOES change it (by that factor)</li>
      </ul>
    </div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Distribution Shape & Skew</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p><strong>Symmetric:</strong> Mean ‚âà Median. Bell-shaped.</p>
      <p><strong>Skewed right (positive):</strong> Tail goes right. Mean &gt; Median. (High outliers pull mean up.)</p>
      <p><strong>Skewed left (negative):</strong> Tail goes left. Mean &lt; Median. (Low outliers pull mean down.)</p>
      <p><strong>Tip:</strong> "Which direction is the skew?" ‚Üí look for the long tail.</p>
    </div>
  </div>
</div>

<!-- ==================== EXERCISE 2: STATISTICS EXPLORER ==================== -->
<div class="section">
  <div class="section-label">Interactive Tool</div>
  <h2>Statistics Explorer</h2>
  <p>Enter comma-separated numbers to see mean, median, range, and count instantly. Try adding an outlier!</p>
  <div class="stat-exp">
    <input class="stat-input" id="statInput" value="12, 15, 18, 20, 22, 25, 28" placeholder="Enter numbers separated by commas‚Ä¶" oninput="calcStats()">
    <div class="stat-results" id="statResults"></div>
    <div id="statInsight" style="margin-top:10px;font-size:.85rem;color:var(--muted)"></div>
  </div>
</div>

<!-- ==================== TOPIC 4C ==================== -->
<div class="section">
  <div class="section-label">Topic 4C</div>
  <h2>Data Interpretation & Scatterplots</h2>

  <div class="topic open" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Scatterplots & Line of Best Fit</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p><strong>Correlation:</strong> Positive (both increase ‚Üó), Negative (one up, other down ‚Üò), None (random).</p>
      <p><strong>Line of best fit:</strong> Slope = rate of change in context. Y-intercept = predicted value when x = 0.</p>
      <p><strong>Interpolation</strong> = predicting WITHIN data range (reliable).</p>
      <p><strong>Extrapolation</strong> = predicting BEYOND data range (unreliable).</p>
      <p><strong>Residuals</strong> = actual ‚àí predicted. Good model: residuals scattered randomly around zero. Pattern in residuals ‚Üí bad model fit.</p>
    </div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Two-Way Frequency Tables</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p><strong>Marginal frequencies:</strong> Row/column totals.</p>
      <p><strong>Joint frequencies:</strong> Values inside the table.</p>
      <p><strong>Conditional probability:</strong> P(A|B) = "given B, what's the probability of A?"</p>
      <p>Formula: P(A|B) = (count of A AND B) / (total count of B)</p>
      <div class="callout"><strong>PSAT Trap:</strong> Confusing P(A|B) with P(B|A). "Given they play sports, probability of having a job" is NOT the same as "given they have a job, probability of playing sports." The denominator changes!</div>
    </div>
  </div>

  <div class="callout-blue callout"><strong>Desmos Regression:</strong> Enter data as a table, then type <code>y‚ÇÅ ~ mx‚ÇÅ + b</code> for linear or <code>y‚ÇÅ ~ ax‚ÇÅ¬≤ + bx‚ÇÅ + c</code> for quadratic. Desmos finds the best-fit equation automatically.</div>
</div>

<!-- ==================== EXERCISE 3: TWO-WAY TABLE ==================== -->
<div class="section">
  <div class="section-label">Interactive Exercise 2</div>
  <h2>Two-Way Table & Probability</h2>
  <p>Use the table below to answer probability questions.</p>
  <div class="exercise">
    <h3>üìä Student Activity Survey</h3>
    <div class="exercise-sub">200 students were surveyed about extracurricular activities.</div>
    <table class="data-table">
      <tr><th></th><th>Plays Sport</th><th>No Sport</th><th>Total</th></tr>
      <tr><td style="font-weight:700;text-align:left">Has a Job</td><td>45</td><td>35</td><td class="highlight">80</td></tr>
      <tr><td style="font-weight:700;text-align:left">No Job</td><td>55</td><td>65</td><td class="highlight">120</td></tr>
      <tr><td style="font-weight:700;text-align:left">Total</td><td class="highlight">100</td><td class="highlight">100</td><td class="highlight">200</td></tr>
    </table>
    <div id="tableQs"></div>
  </div>
</div>

<!-- ==================== EXERCISE 4: SPOT THE MISLEADING STATISTIC ==================== -->
<div class="section">
  <div class="section-label">Interactive Exercise 3 ‚Äî New!</div>
  <h2>Spot the Misleading Statistic</h2>
  <p>The PSAT tests whether you can identify flaws in statistical reasoning. For each claim, identify why it's misleading or invalid.</p>
  <div class="exercise" style="border-color:var(--accent)" id="misleadEx"></div>
</div>

<!-- ==================== TOPIC 4D ==================== -->
<div class="section">
  <div class="section-label">Topic 4D</div>
  <h2>Probability & Study Design</h2>

  <div class="topic open" onclick="if(event.target.closest('.topic-body'))return;this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Probability Basics</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p><strong>P(event) = favorable outcomes / total outcomes</strong></p>
      <p>Always between 0 (impossible) and 1 (certain).</p>
      <p><strong>Complement:</strong> P(not A) = 1 ‚àí P(A)</p>
      <p><strong>"At least one"</strong> problems: P(at least one) = 1 ‚àí P(none). This is almost always easier than counting directly.</p>
    </div>
  </div>

  <div class="topic" onclick="this.classList.toggle('open')">
    <div class="topic-header"><div class="topic-title">Study Design ‚Äî The PSAT's Favorite Trick</div><div class="topic-arrow">‚ñ∏</div></div>
    <div class="topic-body">
      <p>Three key rules for what conclusions are valid:</p>
      <ul>
        <li><strong>Random sampling</strong> ‚Üí can generalize to the population</li>
        <li><strong>Random assignment to groups</strong> ‚Üí can establish causation (this makes it an experiment)</li>
        <li><strong>No random assignment</strong> ‚Üí correlation only, NOT causation</li>
      </ul>
      <p><strong>Confounding variables:</strong> Other factors that could explain the result. "Students who eat breakfast score higher" ‚Äî is it breakfast, or are they more organized generally?</p>
      <p><strong>Margin of error:</strong> Larger sample ‚Üí smaller margin of error. That's the whole concept for the PSAT.</p>
    </div>
  </div>
</div>

<!-- ==================== EXERCISE 5: STUDY DESIGN ==================== -->
<div class="section">
  <div class="section-label">Interactive Exercise 4</div>
  <h2>Study Design Classifier</h2>
  <p>For each scenario, decide what valid conclusions can be drawn.</p>
  <div class="exercise" style="border-color:var(--advanced)" id="studyEx"></div>
</div>

<!-- ==================== PSAT PRACTICE ==================== -->
<div class="section">
  <div class="section-label">PSAT-Style Practice</div>
  <h2>Practice Questions</h2>
  <p>8 questions at three difficulty tiers. Every question comes with a full worked explanation.</p>
  <div id="psatPractice"></div>
</div>

<!-- KEY TAKEAWAYS -->
<div class="section">
  <div class="section-label">Summary</div>
  <h2>Key Takeaways</h2>
  <div class="card card-accent">
    <ol style="padding-left:18px;font-size:.93rem;color:#ccc;line-height:2">
      <li>Percent change = (new ‚àí old) / <strong>old</strong> √ó 100. The OLD value is always the denominator.</li>
      <li>Mean is sensitive to outliers; median is resistant. The PSAT tests this constantly.</li>
      <li>On scatterplots, slope = rate of change in context. Y-intercept = starting value.</li>
      <li>Conditional probability from two-way tables: P(A|B) = (A and B) / (total B). The denominator changes based on the "given."</li>
      <li>Only <strong>experiments with random assignment</strong> can establish causation. Everything else is correlation.</li>
      <li>Larger sample size ‚Üí smaller margin of error.</li>
      <li>A 10% increase followed by a 10% decrease does NOT return to the original ‚Äî it's 1% less.</li>
    </ol>
  </div>
</div>

<div class="mod-nav">
  <a href="module-3.html">‚Üê Module 3: Advanced Math</a>
  <a href="module-5.html">Module 5: Geometry & Trig ‚Üí</a>
</div>
</div>

<script>
// ============ PROGRESS BAR ============
window.addEventListener('scroll',()=>{
  const h=document.documentElement.scrollHeight-window.innerHeight;
  document.getElementById('progressFill').style.width=Math.min(h>0?(window.scrollY/h)*100:0,100)+'%';
});

// ============ EXERCISE 1: RATIO & PERCENT ============
const RATIO_QS=[
  {prompt:'A store marks up a $40 item by 25%. What is the selling price?',answer:50,solution:'$40 √ó 1.25 = $50. Or: 25% of 40 = 10, so 40 + 10 = 50.'},
  {prompt:'A shirt was $80, now $60. What is the percent decrease?',answer:25,solution:'(80 ‚àí 60)/80 √ó 100 = 20/80 √ó 100 = 25%. Remember: divide by the OLD value.'},
  {prompt:'If 3 workers paint a house in 12 hours, how many hours for 4 workers? (Inverse proportion)',answer:9,solution:'workers √ó hours = constant. 3 √ó 12 = 36. So 4 √ó h = 36, h = 9.'},
  {prompt:'A recipe for 6 servings uses 2 cups of flour. How many cups for 15 servings?',answer:5,solution:'2/6 = x/15. Cross multiply: 6x = 30, x = 5 cups.'},
  {prompt:'A car travels 240 miles on 8 gallons. Miles per gallon?',answer:30,solution:'Unit rate: 240 √∑ 8 = 30 mpg.'},
  {prompt:'A population grows from 5,000 to 6,500. What is the percent increase?',answer:30,solution:'(6500 ‚àí 5000)/5000 √ó 100 = 1500/5000 √ó 100 = 30%.'},
];
function renderRatios(){
  document.getElementById('ratioEx').innerHTML=`<h3>üìè Ratios & Percentages</h3><div class="exercise-sub">Type your numerical answer (no % sign).</div>`+
    RATIO_QS.map((q,i)=>`<div class="ex-item">
      <div class="ex-prompt">${q.prompt}</div>
      <div class="ex-input-row">
        <input class="ex-input" type="number" step="any" id="rInp${i}" placeholder="?" onkeydown="if(event.key==='Enter')checkRatio(${i})">
        <button class="ex-btn" onclick="checkRatio(${i})">Check</button>
      </div>
      <div class="ex-fb" id="rFb${i}"></div>
    </div>`).join('');
}
function checkRatio(i){
  const v=parseFloat(document.getElementById('rInp'+i).value);
  const fb=document.getElementById('rFb'+i);
  if(isNaN(v)){fb.className='ex-fb show wrong';fb.textContent='Enter a number.';return;}
  if(Math.abs(v-RATIO_QS[i].answer)<0.1){fb.className='ex-fb show correct';fb.textContent='‚úì Correct! '+RATIO_QS[i].solution;}
  else{fb.className='ex-fb show wrong';fb.textContent='‚úó Not quite. '+RATIO_QS[i].solution;}
}
renderRatios();

// ============ STATISTICS EXPLORER ============
function calcStats(){
  const raw=document.getElementById('statInput').value;
  const nums=raw.split(',').map(s=>parseFloat(s.trim())).filter(n=>!isNaN(n));
  if(!nums.length){document.getElementById('statResults').innerHTML='';document.getElementById('statInsight').innerHTML='';return;}
  const sorted=[...nums].sort((a,b)=>a-b);
  const n=nums.length,sum=nums.reduce((a,b)=>a+b,0),mean=sum/n;
  const median=n%2===1?sorted[Math.floor(n/2)]:(sorted[n/2-1]+sorted[n/2])/2;
  const range=sorted[n-1]-sorted[0];
  document.getElementById('statResults').innerHTML=[
    {label:'Count',val:n,color:'var(--ink)'},
    {label:'Mean',val:+(mean.toFixed(2)),color:'var(--psda)'},
    {label:'Median',val:+(median.toFixed(2)),color:'var(--algebra)'},
    {label:'Range',val:+(range.toFixed(2)),color:'var(--geotrig)'},
    {label:'Min',val:sorted[0],color:'var(--muted)'},
    {label:'Max',val:sorted[n-1],color:'var(--muted)'},
  ].map(s=>`<div class="stat-result"><div class="stat-val" style="color:${s.color}">${s.val}</div><div class="stat-label">${s.label}</div></div>`).join('');
  let insight='';
  if(Math.abs(mean-median)>range*0.15)insight=mean>median?'‚ö†Ô∏è Mean > Median ‚Üí <strong>skewed right</strong> (high values pulling mean up).':'‚ö†Ô∏è Mean < Median ‚Üí <strong>skewed left</strong> (low values pulling mean down).';
  else insight='‚úì Mean ‚âà Median ‚Üí roughly <strong>symmetric</strong> distribution.';
  document.getElementById('statInsight').innerHTML=insight;
}
calcStats();

// ============ TWO-WAY TABLE ============
const TABLE_QS=[
  {q:'What proportion of ALL students play a sport?',
   opts:['100/200 = 0.50','45/200 = 0.225','100/80 = 1.25','55/200 = 0.275'],correct:0,
   fb:'Total who play sport = 100. Total students = 200. P = 100/200 = 0.50 (50%).'},
  {q:'What is P(has a job | plays a sport)?',
   opts:['45/200 = 0.225','45/100 = 0.45','45/80 = 0.5625','80/200 = 0.40'],correct:1,
   fb:'Given "plays a sport" ‚Üí denominator is 100 (sport total). Of those, 45 have a job. P = 45/100 = 0.45.'},
  {q:'What is P(plays a sport | has a job)?',
   opts:['45/100 = 0.45','45/200 = 0.225','45/80 = 0.5625','80/100 = 0.80'],correct:2,
   fb:'Given "has a job" ‚Üí denominator is 80 (job total). Of those, 45 play a sport. P = 45/80 = 0.5625. Notice this is DIFFERENT from the previous question!'},
  {q:'What fraction of non-sport students have a job?',
   opts:['35/200 = 0.175','35/100 = 0.35','65/100 = 0.65','35/80 = 0.4375'],correct:1,
   fb:'Non-sport column total = 100. Of those, 35 have a job. P = 35/100 = 0.35.'},
  {q:'Are "plays a sport" and "has a job" independent events?',
   opts:['Yes ‚Äî both columns total 100','No ‚Äî P(job|sport) ‚â† P(job)','Yes ‚Äî the probabilities are equal','Cannot determine'],correct:1,
   fb:'P(job) = 80/200 = 0.40. P(job|sport) = 45/100 = 0.45. Since 0.40 ‚â† 0.45, NOT independent.'},
];
let tableAns={};
function renderTable(){
  const total=TABLE_QS.length;const correct=Object.entries(tableAns).filter(([i,v])=>v===TABLE_QS[i].correct).length;
  document.getElementById('tableQs').innerHTML=TABLE_QS.map((q,i)=>{
    const a=tableAns[i];const has=a!==undefined;
    return `<div class="ex-item">
      <div class="ex-prompt">${q.q}</div>
      <div class="classify-opts">${q.opts.map((o,oi)=>{
        let cls='classify-opt';
        if(has){cls+=' cl-dis';if(oi===q.correct)cls+=' cl-correct';else if(oi===a&&oi!==q.correct)cls+=' cl-wrong';}
        return `<div class="${cls}" onclick="ansTable(${i},${oi})">${o}</div>`;
      }).join('')}</div>
      <div class="ex-fb${has?' show':''}${has?(a===q.correct?' correct':' wrong'):''}">${has?(a===q.correct?'‚úì Correct! ':'‚úó Incorrect. ')+q.fb:''}</div>
    </div>`;
  }).join('')+
  `<div class="score-bar"><div class="score-bar-label">Score</div><div class="score-bar-track"><div class="score-bar-fill" style="width:${total?correct/total*100:0}%"></div></div><div class="score-bar-val">${correct}/${total}</div></div>`;
}
function ansTable(i,v){if(tableAns[i]!==undefined)return;tableAns[i]=v;renderTable();}
renderTable();

// ============ SPOT THE MISLEADING STATISTIC ============
const MISLEAD_QS=[
  {claim:'"Our product increased sales by 200%!" (Sales went from 1 unit to 3 units.)',
   opts:['The percentage is mathematically wrong','Small sample ‚Äî 200% of almost nothing','The time period is too short','No issue ‚Äî the claim is valid'],correct:1,
   fb:'200% increase on 1 unit = 3 units. Technically correct, but deeply misleading. A 200% increase sounds impressive but the absolute numbers are tiny. The PSAT tests whether you can distinguish between relative (percent) and absolute changes.'},
  {claim:'"90% of dentists recommend our toothpaste." (Only 10 dentists were surveyed.)',
   opts:['The percentage is wrong','Sample size too small to generalize','Dentists are biased','Survey is valid'],correct:1,
   fb:'9 out of 10 is 90%, but with only 10 dentists the margin of error is enormous. You can\'t generalize from such a tiny sample.'},
  {claim:'"Students who use our app score 50 points higher on the PSAT." (Students self-selected to use the app.)',
   opts:['No random assignment ‚Äî could be self-selection bias','The 50-point difference is too small','The app doesn\'t cover all domains','Sample size issue'],correct:0,
   fb:'Students who choose to use a study app are probably already more motivated. Without random assignment, you can\'t say the app <em>caused</em> the improvement. Classic self-selection bias.'},
  {claim:'"The average household income in our town is $180,000." (A few billionaires live there.)',
   opts:['The calculation is wrong','Should use median instead of mean','Sample is too small','Income data is unreliable'],correct:1,
   fb:'A few extremely high incomes skew the mean dramatically upward. The median would be much more representative of a typical household. This is the mean vs. median concept the PSAT loves to test.'},
  {claim:'"Crime has doubled in the past year!" (Went from 2 incidents to 4 in a town of 50,000.)',
   opts:['The percentage is wrong','Small absolute numbers make % misleading','Time period is wrong','Crime data is unreliable'],correct:1,
   fb:'From 2 to 4 is technically a 100% increase, but in a town of 50,000, these are negligibly small numbers. Percent change on small base numbers is inherently misleading.'},
];
let misleadAns={};
function renderMislead(){
  const total=MISLEAD_QS.length;const correct=Object.entries(misleadAns).filter(([i,v])=>v===MISLEAD_QS[i].correct).length;
  document.getElementById('misleadEx').innerHTML=`<h3>üîç Find the Flaw</h3><div class="exercise-sub">Each claim uses statistics in a misleading way. Identify the problem.</div>`+
    MISLEAD_QS.map((q,i)=>{
      const a=misleadAns[i];const has=a!==undefined;
      return `<div class="ex-item">
        <div class="ex-prompt" style="font-style:italic">${q.claim}</div>
        <div class="classify-opts">${q.opts.map((o,oi)=>{
          let cls='classify-opt';
          if(has){cls+=' cl-dis';if(oi===q.correct)cls+=' cl-correct';else if(oi===a&&oi!==q.correct)cls+=' cl-wrong';}
          return `<div class="${cls}" onclick="ansMislead(${i},${oi})">${o}</div>`;
        }).join('')}</div>
        <div class="ex-fb${has?' show':''}${has?(a===q.correct?' correct':' wrong'):''}">${has?(a===q.correct?'‚úì ':'‚úó ')+q.fb:''}</div>
      </div>`;
    }).join('')+
    `<div class="score-bar"><div class="score-bar-label">Score</div><div class="score-bar-track"><div class="score-bar-fill" style="width:${total?correct/total*100:0}%"></div></div><div class="score-bar-val">${correct}/${total}</div></div>`;
}
function ansMislead(i,v){if(misleadAns[i]!==undefined)return;misleadAns[i]=v;renderMislead();}
renderMislead();

// ============ STUDY DESIGN CLASSIFIER ============
const STUDY_QS=[
  {scenario:'Researchers randomly selected 500 adults from a city and found that those who exercised regularly had lower blood pressure.',
   opts:['Causation ‚Äî exercise lowers blood pressure','Association ‚Äî can generalize to city','Association ‚Äî cannot generalize','No valid conclusion'],correct:1,
   fb:'Random sampling ‚Üí can generalize. No random assignment ‚Üí association only, not causation.'},
  {scenario:'100 volunteers were randomly assigned to drink green tea or water daily for 3 months. The tea group showed improved focus.',
   opts:['Causation ‚Äî can generalize to all adults','Causation ‚Äî but only for volunteers','Association ‚Äî can generalize','Association ‚Äî cannot generalize'],correct:1,
   fb:'Random assignment ‚Üí causation. But volunteers (not random sample) ‚Üí can\'t generalize beyond these participants.'},
  {scenario:'A researcher surveys students at her school and finds a correlation between screen time and lower grades.',
   opts:['Causation ‚Äî screens lower grades','Association ‚Äî can generalize','Association ‚Äî cannot generalize','Causation ‚Äî but only for this school'],correct:2,
   fb:'No random assignment ‚Üí no causation. No random sampling (just one school) ‚Üí can\'t generalize.'},
  {scenario:'A national organization randomly selects 10,000 people and randomly assigns half to take Vitamin D. After 1 year, the supplement group has fewer colds.',
   opts:['Causation ‚Äî can generalize','Association ‚Äî can generalize','Causation ‚Äî only for sample','Association ‚Äî cannot generalize'],correct:0,
   fb:'Random sampling AND random assignment ‚Üí causation AND generalizability. This is the gold standard.'},
  {scenario:'Countries with more chocolate consumption per capita have more Nobel Prize winners.',
   opts:['Causation ‚Äî chocolate helps','Correlation ‚Äî confounding variables likely','Causation ‚Äî can generalize','Association ‚Äî can generalize'],correct:1,
   fb:'This is a famous real study! Wealth is a confounding variable ‚Äî wealthier countries have both more chocolate and more Nobel winners.'},
  {scenario:'To reduce margin of error from ¬±5% to ¬±2.5%, a researcher should:',
   opts:['Increase sample size','Use different polling method','Ask more questions','Survey different population'],correct:0,
   fb:'Larger sample ‚Üí smaller margin of error. To halve margin of error, quadruple sample size.'},
];
let studyAns={};
function renderStudy(){
  const total=STUDY_QS.length;const correct=Object.entries(studyAns).filter(([i,v])=>v===STUDY_QS[i].correct).length;
  document.getElementById('studyEx').innerHTML=`<h3>üî¨ Study Design Classifier</h3><div class="exercise-sub">What conclusions are valid?</div>`+
    STUDY_QS.map((q,i)=>{
      const a=studyAns[i];const has=a!==undefined;
      return `<div class="ex-item">
        <div class="ex-prompt">${q.scenario}</div>
        <div class="classify-opts">${q.opts.map((o,oi)=>{
          let cls='classify-opt';
          if(has){cls+=' cl-dis';if(oi===q.correct)cls+=' cl-correct';else if(oi===a&&oi!==q.correct)cls+=' cl-wrong';}
          return `<div class="${cls}" onclick="ansStudy(${i},${oi})">${o}</div>`;
        }).join('')}</div>
        <div class="ex-fb${has?' show':''}${has?(a===q.correct?' correct':' wrong'):''}">${has?(a===q.correct?'‚úì ':'‚úó ')+q.fb:''}</div>
      </div>`;
    }).join('')+
    `<div class="score-bar"><div class="score-bar-label">Score</div><div class="score-bar-track"><div class="score-bar-fill" style="width:${total?correct/total*100:0}%"></div></div><div class="score-bar-val">${correct}/${total}</div></div>`;
}
function ansStudy(i,v){if(studyAns[i]!==undefined)return;studyAns[i]=v;renderStudy();}
renderStudy();

// ============ PSAT PRACTICE ============
const PSAT_QS=[
  {tier:1,q:'If 40% of 250 students passed an exam, how many students passed?',
   choices:['40','80','100','160'],correct:2,
   fb:'40% of 250 = 0.40 √ó 250 = 100 students.'},
  {tier:1,q:'Data set: 3, 5, 7, 9, 11. What is the mean?',
   choices:['5','7','9','35'],correct:1,
   fb:'Mean = (3+5+7+9+11)/5 = 35/5 = 7.'},
  {tier:1,q:'A bag contains 4 red, 6 blue, and 10 green marbles. What is the probability of drawing a blue marble?',
   choices:['6/20 = 0.30','6/10 = 0.60','6/4 = 1.50','6/16 = 0.375'],correct:0,
   fb:'Total marbles = 4+6+10 = 20. P(blue) = 6/20 = 0.30 (30%).'},
  {tier:2,q:'A jacket costs $120 after a 20% discount. What was the original price?',
   choices:['$96','$140','$144','$150'],correct:3,
   fb:'After 20% off, you pay 80%. So 0.80 √ó original = 120 ‚Üí original = $150. Trap: $144 is wrong (that\'s 120 √ó 1.20).'},
  {tier:2,q:'A scatterplot shows the line of best fit: <code>y = 2.5x + 15</code>, where x = hours studied and y = test score. What does 2.5 represent?',
   choices:['The minimum score','The score when x = 0','The predicted score increase per hour','The total hours studied'],correct:2,
   fb:'Slope = rate of change. Each additional hour predicts a 2.5-point score increase.'},
  {tier:2,q:'A data set has mean 50 and median 45. The distribution is most likely:',
   choices:['Symmetric','Skewed left','Skewed right','Bimodal'],correct:2,
   fb:'Mean > Median ‚Üí skewed right. High values pull the mean above the median.'},
  {tier:3,q:'A store raises prices 10%, then offers a 10% discount. Compared to the original, the final price is:',
   choices:['The same','1% less','1% more','10% less'],correct:1,
   fb:'Start $100 ‚Üí +10% = $110 ‚Üí ‚àí10% of $110 = $99. That\'s 1% less. The increases and decreases do NOT cancel.'},
  {tier:3,q:'A two-way table shows P(A|B) = 0.6 and P(A) = 0.4. Events A and B are:',
   choices:['Independent','Not independent','Mutually exclusive','Complementary'],correct:1,
   fb:'If independent, P(A|B) would equal P(A). Since 0.6 ‚â† 0.4, they are NOT independent. Knowing B increases the probability of A.'},
];
let psatAns={};
function renderPSAT(){
  document.getElementById('psatPractice').innerHTML=PSAT_QS.map((q,i)=>{
    const a=psatAns[i];const has=a!==undefined;
    return `<div class="ex-item" style="border-color:${q.tier===1?'var(--algebra)':q.tier===2?'var(--math)':'var(--advanced)'}">
      <div style="margin-bottom:6px"><span class="tier tier-${q.tier}">${q.tier===1?'Easy':q.tier===2?'Medium':'Hard'}</span></div>
      <div class="ex-prompt">${q.q}</div>
      <div class="mc-choices">${q.choices.map((ch,ci)=>{
        let cls='mc-choice';
        if(has){cls+=' mc-dis';if(ci===q.correct)cls+=' mc-correct';else if(ci===a&&ci!==q.correct)cls+=' mc-wrong';}
        return `<div class="${cls}" onclick="ansPSAT(${i},${ci})"><div class="mc-letter">${'ABCD'[ci]}</div><div>${ch}</div></div>`;
      }).join('')}</div>
      <div class="mc-fb${has?' show':''}">${has?(a===q.correct?'‚úì Correct! ':'‚úó Incorrect. ')+q.fb:''}</div>
    </div>`;
  }).join('');
}
function ansPSAT(i,ci){if(psatAns[i]!==undefined)return;psatAns[i]=ci;renderPSAT();}
renderPSAT();
</script>
<script src="/translate.js"></script>
</body>
</html>
