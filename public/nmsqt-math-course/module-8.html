<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 8: Practice Test, Error Analysis & Test-Day Prep ‚Äî PSAT/NMSQT Math ‚Äî PantherPrep</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--ink:#f0f0f0;--paper:#121212;--accent:#C8102E;--accent-light:rgba(200,16,46,.15);--border:#2a2a2a;--muted:#999;--surface:#1a1a1a;--math:#60a5fa;--math-bg:rgba(96,165,250,.1);--psda:#fbbf24;--psda-bg:rgba(251,191,36,.1);--correct:#22c55e;--correct-bg:rgba(34,197,94,.12);--wrong:#ef4444;--wrong-bg:rgba(239,68,68,.12);--adv:#a78bfa;--adv-bg:rgba(167,139,250,.1);--geo:#f87171;--algebra:#34d399;--des:#06b6d4}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);line-height:1.65}
.top-stripe{height:4px;background:linear-gradient(90deg,#C8102E 0%,#C8102E 50%,#fff 50%,#fff 100%);position:fixed;top:0;left:0;right:0;z-index:100}
.progress-bar{position:fixed;top:4px;left:0;right:0;height:3px;background:var(--border);z-index:99}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--adv));width:0%;transition:width .3s ease}
.container{max-width:800px;margin:0 auto;padding:20px 20px 60px}
.back-link{display:inline-flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem;padding:8px 0;margin-top:8px;cursor:pointer;text-decoration:none}
.back-link:hover{color:var(--accent)}
.mod-header{padding:40px 0 30px;border-bottom:1px solid var(--border);margin-bottom:32px}
.mod-badge{display:inline-block;background:var(--adv);color:#000;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:16px;margin-bottom:14px}
.mod-header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700;margin-bottom:6px}
.mod-header .subtitle{color:var(--muted);font-size:1rem}
.mod-meta{display:flex;gap:20px;margin-top:14px;font-size:.82rem;color:var(--muted)}
.section{margin-bottom:36px}
.section-label{font-size:.7rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:6px}
.section h2{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:700;margin-bottom:12px}
.section p{color:#ccc;font-size:.93rem;margin-bottom:12px;line-height:1.7}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:12px}
.card-accent{border-left:3px solid var(--accent)}
.callout{background:var(--accent-light);border:1px solid rgba(200,16,46,.3);border-radius:10px;padding:14px 18px;margin-bottom:16px;font-size:.9rem}
.callout strong{color:var(--accent)}

/* PROTOCOL */
.protocol{background:var(--surface);border:2px solid var(--accent);border-radius:14px;overflow:hidden;margin-bottom:16px}
.protocol-title{background:var(--accent);padding:12px 20px;font-weight:700;font-size:.95rem}
.protocol-step{display:flex;gap:14px;padding:14px 20px;border-bottom:1px solid var(--border);font-size:.9rem;color:#ccc;align-items:flex-start}
.protocol-step:last-child{border-bottom:none}
.step-num{flex-shrink:0;width:28px;height:28px;border-radius:50%;background:var(--accent-light);border:1px solid var(--accent);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.82rem;color:var(--accent);font-family:'JetBrains Mono',monospace}

/* CHECKLIST */
.checklist{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:20px;margin-bottom:16px}
.checklist h3{font-family:'Cormorant Garamond',serif;font-size:1.2rem;margin-bottom:12px}
.cl-item{display:flex;align-items:flex-start;gap:10px;padding:7px 0;border-bottom:1px solid var(--border);font-size:.9rem;color:#ccc;cursor:pointer;transition:opacity .2s}
.cl-item:last-child{border-bottom:none}
.cl-item.done{opacity:.5;text-decoration:line-through}
.cl-check{flex-shrink:0;width:22px;height:22px;border:2px solid var(--border);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:.7rem;transition:all .15s}
.cl-item.done .cl-check{background:var(--correct);border-color:var(--correct);color:#fff}
.cl-progress{font-size:.82rem;color:var(--muted);margin-top:8px;text-align:right}

/* ERROR CLASSIFICATION */
.ec-box{background:var(--surface);border:2px solid var(--math);border-radius:14px;padding:22px;margin-bottom:16px}
.ec-item{background:var(--paper);border-radius:10px;padding:14px;margin-bottom:10px}
.ec-scenario{font-size:.92rem;line-height:1.6;margin-bottom:10px;color:#ddd}
.ec-options{display:flex;flex-wrap:wrap;gap:6px}
.ec-opt{padding:6px 14px;background:var(--surface);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:.82rem;transition:all .15s}
.ec-opt:hover:not(.ec-dis){border-color:var(--accent);background:var(--accent-light)}
.ec-opt.ec-correct{border-color:var(--correct);background:var(--correct-bg);color:var(--correct)}
.ec-opt.ec-wrong{border-color:var(--wrong);background:var(--wrong-bg);color:var(--wrong)}
.ec-opt.ec-dis{pointer-events:none;opacity:.6}
.ec-fb{margin-top:8px;font-size:.82rem;color:var(--muted);display:none;line-height:1.4}
.ec-fb.show{display:block}

/* REPORT */
.report{background:var(--surface);border:2px solid var(--math);border-radius:14px;padding:22px;margin-bottom:16px}
.report h3{font-family:'Cormorant Garamond',serif;font-size:1.3rem;margin-bottom:4px}
.report-sub{font-size:.85rem;color:var(--muted);margin-bottom:16px}
.report-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.report-section{margin-bottom:16px}
.report-section-label{font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
.rs-blue{color:var(--math)}.rs-green{color:var(--algebra)}.rs-yellow{color:var(--psda)}.rs-red{color:var(--geo)}.rs-purple{color:var(--adv)}.rs-cyan{color:var(--des)}
.report-row{display:flex;align-items:center;gap:10px;margin-bottom:6px}
.report-label{flex:1;font-size:.88rem;color:#ccc}
.report-input{width:60px;padding:6px 8px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:.9rem;text-align:center}
.report-input:focus{border-color:var(--math);outline:none}
.report-bar{flex:2;height:8px;background:var(--border);border-radius:4px;overflow:hidden;max-width:200px}
.report-bar-fill{height:100%;border-radius:4px;transition:width .3s}
.report-total{display:flex;align-items:center;gap:12px;padding:12px 0;border-top:1px solid var(--border);margin-top:8px}
.report-total-label{font-weight:700;font-size:.9rem}
.report-total-val{font-family:'JetBrains Mono',monospace;font-size:1.3rem;font-weight:700}
.priority-box{background:var(--paper);border:2px dashed var(--psda);border-radius:12px;padding:16px;margin-top:16px}
.priority-title{font-weight:700;font-size:.95rem;color:var(--psda);margin-bottom:10px}
.priority-item{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.priority-num{width:24px;height:24px;border-radius:50%;background:var(--psda);color:#000;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.78rem;flex-shrink:0}
.priority-input{flex:1;padding:6px 10px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.88rem}
.priority-input:focus{border-color:var(--psda);outline:none}

/* SCORE PROJECTOR */
.projector{background:var(--surface);border:2px solid var(--correct);border-radius:14px;padding:22px;margin-bottom:16px}
.proj-inputs{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:16px}
.proj-field{display:flex;flex-direction:column;gap:4px}
.proj-field label{font-size:.78rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.5px}
.proj-field input,.proj-field select{padding:8px 12px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1rem;text-align:center;width:100px}
.proj-field select{width:120px;font-family:inherit;font-size:.88rem}
.proj-field input:focus,.proj-field select:focus{border-color:var(--correct);outline:none}
.proj-results{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.proj-result{background:var(--paper);border-radius:10px;padding:14px;text-align:center}
.proj-val{font-family:'JetBrains Mono',monospace;font-size:1.5rem;font-weight:700}
.proj-label{font-size:.72rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;margin-top:2px}

/* CONSERVATION TABLE */
.cons-table{width:100%;border-collapse:collapse;font-size:.86rem;margin-bottom:16px}
.cons-table th,.cons-table td{padding:10px 12px;border:1px solid var(--border);text-align:left}
.cons-table th{background:var(--surface);font-weight:700;font-size:.76rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted)}

.btn{display:inline-block;background:var(--accent);color:#fff;font-family:inherit;font-size:.9rem;font-weight:600;padding:10px 24px;border:none;border-radius:8px;cursor:pointer;transition:all .2s}
.btn:hover{background:#a00d24}
.btn-sm{padding:8px 16px;font-size:.82rem}
.btn-blue{background:var(--math)}.btn-blue:hover{background:#4b8fda}
.btn-outline{background:transparent;border:2px solid var(--accent);color:var(--accent)}
.btn-outline:hover{background:var(--accent-light)}

.mod-nav{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-top:1px solid var(--border);margin-top:40px}
.mod-nav a{color:var(--accent);text-decoration:none;font-weight:600;font-size:.9rem;display:flex;align-items:center;gap:6px}
.mod-nav a:hover{text-decoration:underline}

@media(max-width:600px){.mod-meta{flex-wrap:wrap;gap:10px}.report-grid{grid-template-columns:1fr}.ec-options{flex-direction:column}.proj-results{grid-template-columns:1fr 1fr}.proj-inputs{flex-direction:column}}
</style>
</head>
<body>
<div class="top-stripe"></div>
<div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
<div class="container">
<a class="back-link" href="index.html">‚Üê Back to PSAT Math Course</a>

<div class="mod-header">
  <div class="mod-badge">Module 8</div>
  <h1>Full Practice Test, Error Analysis & Test-Day Prep</h1>
  <p class="subtitle">Take a full timed test, analyze your errors, project your score, and prepare for test day.</p>
  <div class="mod-meta">
    <span>‚è± 2 sessions</span>
    <span>üìã Test + Analysis</span>
    <span>üîÑ Phase 4: Reflect</span>
  </div>
</div>

<!-- INTRO -->
<div class="section">
  <div class="section-label">Purpose</div>
  <h2>Why This Module Matters</h2>
  <div class="callout"><strong>This is not just another practice test.</strong> The test is only half the value. The error analysis ‚Äî classifying mistakes, checking Desmos usage, identifying patterns ‚Äî is where the real score gains happen.</div>
  <p>You've built content knowledge (Modules 2‚Äì5), mastered Desmos (Module 6), and layered strategy on top (Module 7). Now it's time to see how it all performs under pressure ‚Äî and identify the 2‚Äì3 highest-impact areas for your final push.</p>
</div>

<!-- PRE-TEST CHECKLIST -->
<div class="section">
  <div class="section-label">Before the Test</div>
  <h2>Pre-Test Checklist</h2>
  <div class="checklist" id="preChecklist"></div>
</div>

<!-- PROTOCOL -->
<div class="section">
  <div class="section-label">Session 1</div>
  <h2>Practice Test Protocol</h2>
  <div class="protocol">
    <div class="protocol-title">Full PSAT Math Section Protocol</div>
    <div class="protocol-step"><div class="step-num">1</div><div>Open the <a href="https://bluebook.collegeboard.org/" target="_blank" style="color:var(--math)">Bluebook app</a>. Select a full practice test ‚Äî use a <strong>DIFFERENT</strong> one than your Module 1 diagnostic baseline.</div></div>
    <div class="protocol-step"><div class="step-num">2</div><div>Full conditions: <strong>44 questions, 70 minutes</strong> (two 35-minute adaptive modules). No interruptions, phone silenced.</div></div>
    <div class="protocol-step"><div class="step-num">3</div><div>Implement ALL strategies: 5-Second Decision Tree, Desmos on ~‚Öì of questions, Plug In / Backsolve, LOTD for guesses.</div></div>
    <div class="protocol-step"><div class="step-num">4</div><div>After each module: <strong>self-score immediately</strong>. Note which Module 2 you received (harder or easier).</div></div>
    <div class="protocol-step"><div class="step-num">5</div><div>Mark every question you were <strong>unsure about</strong>, even if correct. These reveal hidden weaknesses.</div></div>
    <div class="protocol-step"><div class="step-num">6</div><div>Complete the Pattern Report Builder below for every missed AND uncertain question.</div></div>
  </div>
</div>

<!-- POST-TEST CHECKLIST -->
<div class="section">
  <div class="section-label">After the Test</div>
  <h2>Post-Test Checklist</h2>
  <div class="checklist" id="postChecklist"></div>
</div>

<!-- ERROR CLASSIFICATION -->
<div class="section">
  <div class="section-label">Interactive Exercise</div>
  <h2>Error Classification Practice</h2>
  <p>Before analyzing your own test, practice classifying these error scenarios.</p>
  <div class="ec-box" id="ecBox"></div>
  <div id="ecScore" style="text-align:center;padding:10px 0;font-size:.88rem;color:var(--muted)"></div>
</div>

<!-- PATTERN REPORT -->
<div class="section">
  <div class="section-label">Session 2: Interactive Tool</div>
  <h2>PSAT Pattern Report Builder</h2>
  <p>Enter error data from your practice test. Auto-saves in your browser.</p>
  <div class="report" id="patternReport"></div>
</div>

<!-- SCORE PROJECTOR -->
<div class="section">
  <div class="section-label">Score Projector</div>
  <h2>PSAT Score & National Merit Estimator</h2>
  <p>Enter your raw scores to see estimated scaled scores and Selection Index. These are approximations ‚Äî actual conversions vary by test form.</p>
  <div class="projector">
    <div class="proj-inputs">
      <div class="proj-field"><label>Math Raw Score</label><input type="number" id="projMathRaw" min="0" max="44" placeholder="/44" oninput="calcProj()"></div>
      <div class="proj-field"><label>RW Raw Score</label><input type="number" id="projRWRaw" min="0" max="54" placeholder="/54" oninput="calcProj()"></div>
      <div class="proj-field"><label>Module 2 Type</label>
        <select id="projM2" onchange="calcProj()"><option value="">Select‚Ä¶</option><option value="hard">Harder</option><option value="easy">Easier</option></select>
      </div>
    </div>
    <div class="proj-results" id="projResults">
      <div class="proj-result"><div class="proj-val" style="color:var(--muted)">‚Äî</div><div class="proj-label">Math Score (160‚Äì760)</div></div>
      <div class="proj-result"><div class="proj-val" style="color:var(--muted)">‚Äî</div><div class="proj-label">RW Score (160‚Äì760)</div></div>
      <div class="proj-result"><div class="proj-val" style="color:var(--muted)">‚Äî</div><div class="proj-label">Selection Index (48‚Äì228)</div></div>
    </div>
    <div id="projInsight" style="margin-top:12px;font-size:.85rem;color:var(--muted);text-align:center"></div>
  </div>
</div>

<!-- INTERPRETING RESULTS -->
<div class="section">
  <div class="section-label">Analysis</div>
  <h2>How to Read Your Pattern Report</h2>
  <div class="card" style="border-left:3px solid var(--algebra)"><h4 style="margin-bottom:6px">Most errors in Algebra?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Review <a href="module-2.html" style="color:var(--algebra)">Module 2</a>. Focus on systems of equations and linear inequalities.</p></div>
  <div class="card" style="border-left:3px solid var(--adv)"><h4 style="margin-bottom:6px">Most errors in Advanced Math?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Review <a href="module-3.html" style="color:var(--adv)">Module 3</a>. Quadratic forms and exponential functions are highest-yield.</p></div>
  <div class="card" style="border-left:3px solid var(--psda)"><h4 style="margin-bottom:6px">Most errors in Problem-Solving & Data?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Review <a href="module-4.html" style="color:var(--psda)">Module 4</a>. Focus on percent change, conditional probability, and study design.</p></div>
  <div class="card" style="border-left:3px solid var(--geo)"><h4 style="margin-bottom:6px">Most errors in Geometry & Trig?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Review <a href="module-5.html" style="color:var(--geo)">Module 5</a>. Circle equations and special right triangles are most tested.</p></div>
  <div class="card" style="border-left:3px solid var(--des)"><h4 style="margin-bottom:6px">"Should have used Desmos" count high?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Review <a href="module-6.html" style="color:var(--des)">Module 6</a>. You're leaving points on the table.</p></div>
  <div class="card card-accent"><h4 style="margin-bottom:6px">Most errors are Careless/Misread?</h4><p style="margin:0;font-size:.9rem;color:#ccc">Slow down on easy questions. Re-read what the question asks BEFORE answering. Use Desmos to verify.</p></div>
</div>

<!-- PRACTICE TEST CONSERVATION -->
<div class="section">
  <div class="section-label">Planning</div>
  <h2>Practice Test Conservation Plan</h2>
  <p>College Board provides limited official practice tests. Use them strategically.</p>
  <table class="cons-table">
    <tr><th>Test</th><th>When</th><th>Purpose</th></tr>
    <tr><td><strong>Practice Test 1</strong></td><td>Module 1 (Baseline)</td><td>Establish starting score</td></tr>
    <tr><td><strong>Practice Test 2</strong></td><td>Module 8 (Now)</td><td>Measure progress; identify gaps</td></tr>
    <tr><td><strong>Practice Test 3</strong></td><td>2 weeks before PSAT</td><td>Full simulation</td></tr>
    <tr><td><strong>Practice Test 4</strong></td><td>1 week before PSAT</td><td>Final assessment ‚Äî then stop testing</td></tr>
    <tr><td><strong>Remaining</strong></td><td>Reserve</td><td>Only if needed; light review last few days</td></tr>
  </table>
</div>

<!-- SCORE COMPARISON -->
<div class="section">
  <div class="section-label">Progress</div>
  <h2>Score Comparison</h2>
  <p>Compare your Module 1 baseline diagnostic with this practice test.</p>
  <div class="card" style="border:2px solid var(--correct)">
    <div style="display:grid;grid-template-columns:1fr auto 1fr;gap:16px;align-items:center;text-align:center">
      <div>
        <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px">Module 1 Baseline</div>
        <input type="number" id="baseScore" placeholder="‚Äî" min="0" max="44" style="width:80px;padding:8px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1.4rem;text-align:center;font-weight:700" oninput="updateProgress()">
        <div style="font-size:.78rem;color:var(--muted);margin-top:4px">out of 44</div>
      </div>
      <div style="font-size:2rem;color:var(--muted)">‚Üí</div>
      <div>
        <div style="font-size:.78rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:6px">Practice Test Score</div>
        <input type="number" id="practScore" placeholder="‚Äî" min="0" max="44" style="width:80px;padding:8px;background:var(--paper);border:1px solid var(--border);border-radius:8px;color:var(--ink);font-family:'JetBrains Mono',monospace;font-size:1.4rem;text-align:center;font-weight:700" oninput="updateProgress()">
        <div style="font-size:.78rem;color:var(--muted);margin-top:4px">out of 44</div>
      </div>
    </div>
    <div id="progressResult" style="text-align:center;margin-top:14px;font-size:.9rem;color:var(--muted)">Enter both scores to see growth.</div>
  </div>
</div>

<!-- TEST DAY PREP -->
<div class="section">
  <div class="section-label">Test Day</div>
  <h2>PSAT Test-Day Checklist</h2>
  <div class="checklist" id="testDayChecklist"></div>
</div>

<!-- KEY TAKEAWAYS -->
<div class="section">
  <div class="section-label">Summary</div>
  <h2>Key Takeaways</h2>
  <div class="card card-accent">
    <ol style="padding-left:18px;font-size:.93rem;color:#ccc;line-height:2">
      <li>The practice test is half the value ‚Äî the <strong>error analysis</strong> is where real learning happens.</li>
      <li>Classify every error: Content Gap, Careless, Time Pressure, Misread/Trap, Strategy Gap.</li>
      <li>Check Desmos usage: "Should have used Desmos" reveals strategy gaps worth easy points.</li>
      <li>Your top error domain tells you exactly which module to review.</li>
      <li>Did you reach harder Module 2? That's the gateway to 700+ and National Merit territory.</li>
      <li>Conserve practice tests ‚Äî use them at strategic intervals, not all at once.</li>
      <li>Night before: review formulas, pack supplies, set alarm, get 8+ hours of sleep.</li>
    </ol>
  </div>
</div>

<div class="mod-nav">
  <a href="module-7.html">‚Üê Module 7: Strategy Toolkit</a>
  <a href="index.html">Back to Course Index ‚Üí</a>
</div>
</div>

<script>
// ============ PROGRESS BAR ============
window.addEventListener('scroll',()=>{
  const h=document.documentElement.scrollHeight-window.innerHeight;
  document.getElementById('progressFill').style.width=Math.min(h>0?(window.scrollY/h)*100:0,100)+'%';
});

// ============ CHECKLISTS ============
const PRE_ITEMS=['Bluebook app downloaded, updated, and logged in','Using a DIFFERENT practice test than Module 1 baseline','Quiet environment ‚Äî no distractions, door closed','Timer managed by Bluebook (35 min per module)','Scratch paper and pencil available','Phone silenced and out of reach','Water available for break between modules','Strategy plan set: LOTD letter chosen, 5-Second Decision Tree memorized','Desmos shortcuts memorized (^ _ ~ | sqrt pi)'];
const POST_ITEMS=['Self-scored both modules immediately','Noted which Module 2 you received (harder or easier)','Marked every uncertain question (even if correct)','For each error: identified domain, topic, and error type','For each error: checked if Desmos could have helped','For each error: checked if Plug In / Backsolve would have been faster','Filled in the Pattern Report Builder below','Identified top 3 priority areas','Compared baseline to practice test score'];
const TD_ITEMS=['Calculator charged (Desmos is built-in but school may provide TI)','Two #2 pencils sharpened','Valid student ID / school knows you\'re taking it','Light breakfast ‚Äî protein + carbs, not just sugar','Arrive 15 min early ‚Äî don\'t rush','Quick formula review: special triangles, circle equation, quadratic formula','LOTD letter chosen for all guesses','Positive mindset: you\'ve prepared, trust your training','Get 8+ hours of sleep the night before'];

function renderCL(items,id,key){
  const saved=JSON.parse(localStorage.getItem(key)||'{}');
  const done=Object.values(saved).filter(v=>v).length;
  const titles={'preChecklist':'‚úÖ Pre-Test Setup','postChecklist':'‚úÖ Post-Test Actions','testDayChecklist':'üìã Test-Day Checklist'};
  document.getElementById(id).innerHTML=`<h3>${titles[id]}</h3>`+
    items.map((item,i)=>`<div class="cl-item${saved[i]?' done':''}" onclick="toggleCL('${key}',${i},'${id}')">
      <div class="cl-check">${saved[i]?'‚úì':''}</div><div>${item}</div></div>`).join('')+
    `<div class="cl-progress">${done}/${items.length} completed</div>`;
}
function toggleCL(key,i,id){
  const s=JSON.parse(localStorage.getItem(key)||'{}');s[i]=!s[i];localStorage.setItem(key,JSON.stringify(s));
  const map={'pp_psat8_pre':PRE_ITEMS,'pp_psat8_post':POST_ITEMS,'pp_psat8_td':TD_ITEMS};
  renderCL(map[key],id,key);
}
renderCL(PRE_ITEMS,'preChecklist','pp_psat8_pre');
renderCL(POST_ITEMS,'postChecklist','pp_psat8_post');
renderCL(TD_ITEMS,'testDayChecklist','pp_psat8_td');

// ============ ERROR CLASSIFICATION ============
const EC_ITEMS=[
  {scenario:'You missed a circle equation question. You identified center (3,‚àí2) from (x‚àí3)¬≤+(y+2)¬≤=16, but chose radius=16 instead of 4 because you forgot to take the square root.',
   correct:'Content Gap',fb:'Forgetting r¬≤=16 means r=4 is a content gap. Review Module 5, circles topic.'},
  {scenario:'You solved a system correctly but wrote (3,5) when the question asked for x+y. Correct answer was 8.',
   correct:'Misread/Trap',fb:'Classic PSAT trap! You solved correctly but answered the wrong thing. Re-read what they ask.'},
  {scenario:'Variables in all four answer choices. You spent 3 min on complex algebra. Plugging in x=2 would have taken 30 seconds.',
   correct:'Strategy Gap',fb:'Variables in choices = Plug In. Review Module 7\'s Decision Tree.'},
  {scenario:'Ran out of time with 5 questions left. Used LOTD and got 1 right.',
   correct:'Time Pressure',fb:'Pacing issue. First pass ~25 min, flag hard ones, return in second pass.'},
  {scenario:'Quadratic didn\'t factor nicely. Spent 2 min trying. Desmos would have solved it in 10 seconds.',
   correct:'Strategy Gap',fb:'When factoring fails, switch to Desmos or quadratic formula. Review Module 6.'},
  {scenario:'Solved 3(x+4)=27 but expanded as 3x+4 instead of 3x+12, getting x=23/3 instead of x=5.',
   correct:'Careless Error',fb:'You know distribution ‚Äî just did it wrong. Slow down and double-check arithmetic.'},
  {scenario:'Statistics question: which measure is most affected by an outlier? You chose median instead of mean.',
   correct:'Content Gap',fb:'Mean is sensitive to outliers; median is resistant. Review Module 4, statistics topic.'},
  {scenario:'Exponential growth question: selected decay answer because you confused (1+r) with (1‚àír).',
   correct:'Content Gap',fb:'Growth = (1+r), Decay = (1‚àír). Review Module 3, exponentials topic.'},
];
let ecAns={};
function renderEC(){
  document.getElementById('ecBox').innerHTML=EC_ITEMS.map((e,i)=>{
    const ans=ecAns[i];const has=ans!==undefined;
    return `<div class="ec-item"><div style="font-size:.78rem;font-weight:700;color:var(--muted);margin-bottom:6px">Scenario ${i+1}</div>
      <div class="ec-scenario">${e.scenario}</div>
      <div class="ec-options">${['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'].map(o=>{
        let cls='ec-opt';if(has){cls+=' ec-dis';if(o===e.correct)cls+=' ec-correct';else if(o===ans&&o!==e.correct)cls+=' ec-wrong';}
        return `<div class="${cls}" onclick="ecAns[${i}]='${o}';renderEC()">${o}</div>`;
      }).join('')}</div>
      <div class="ec-fb${has?' show':''}">${has?(ans===e.correct?'‚úì Correct! ':'‚úó Incorrect. ')+e.fb:''}</div></div>`;
  }).join('');
  const t=EC_ITEMS.length,a=Object.keys(ecAns).length,c=Object.entries(ecAns).filter(([i,v])=>v===EC_ITEMS[i].correct).length;
  document.getElementById('ecScore').innerHTML=a===t?`<strong style="color:${c>=6?'var(--correct)':c>=4?'var(--psda)':'var(--wrong)'}">${c}/${t} correct</strong>`:a>0?`${a}/${t} completed`:'';
}
renderEC();

// ============ PATTERN REPORT ============
const RK='pp_psat8_report';
function loadR(){return JSON.parse(localStorage.getItem(RK)||'{}');}
function saveR(d){localStorage.setItem(RK,JSON.stringify(d));}
const ERROR_TYPES=['Content Gap','Careless Error','Time Pressure','Misread/Trap','Strategy Gap'];
const ET_COLORS=['#C8102E','#f59e0b','#ef4444','#60a5fa','#a78bfa'];
const DOMAINS=['Algebra','Advanced Math','Problem-Solving & Data','Geometry & Trig'];
const DOM_COLORS=['#34d399','#a78bfa','#fbbf24','#f87171'];

function renderReport(){
  const d=loadR();
  function rows(items,pre,colors){
    return items.map((item,i)=>{const v=d[pre+i]||0;
      return `<div class="report-row"><div class="report-label">${item}</div>
        <input class="report-input" type="number" min="0" max="44" value="${v||''}" placeholder="0" onchange="updateR('${pre+i}',this.value)">
        <div class="report-bar"><div class="report-bar-fill" style="width:${Math.min(v*8,100)}%;background:${colors[i]}"></div></div></div>`;}).join('');}
  const etT=ERROR_TYPES.reduce((s,_,i)=>s+(parseInt(d['et'+i])||0),0);
  document.getElementById('patternReport').innerHTML=`
    <h3>üìä PSAT Pattern Report Builder</h3><div class="report-sub">Enter error counts from your practice test. Data auto-saves.</div>
    <div class="report-grid">
      <div><div class="report-section"><div class="report-section-label rs-blue">Scores</div>
        <div class="report-row"><div class="report-label">Module 1 Raw</div><input class="report-input" type="number" min="0" max="22" value="${d.m1||''}" placeholder="/22" onchange="updateR('m1',this.value)"></div>
        <div class="report-row"><div class="report-label">Module 2 Raw</div><input class="report-input" type="number" min="0" max="22" value="${d.m2||''}" placeholder="/22" onchange="updateR('m2',this.value)"></div>
        <div class="report-row"><div class="report-label">Module 2 Type</div>
          <select style="padding:6px 8px;background:var(--paper);border:1px solid var(--border);border-radius:6px;color:var(--ink);font-family:inherit;font-size:.85rem" onchange="updateR('m2type',this.value)">
            <option value="">Select‚Ä¶</option><option${d.m2type==='Harder'?' selected':''}>Harder</option><option${d.m2type==='Easier'?' selected':''}>Easier</option></select></div>
        <div class="report-total"><div class="report-total-label">Total:</div><div class="report-total-val">${(parseInt(d.m1)||0)+(parseInt(d.m2)||0)}/44</div></div></div></div>
      <div><div class="report-section"><div class="report-section-label rs-red">Errors by Type (${etT})</div>${rows(ERROR_TYPES,'et',ET_COLORS)}</div></div></div>
    <div class="report-section" style="margin-top:16px"><div class="report-section-label rs-green">Errors by Domain</div>
      <div class="report-grid">${DOMAINS.map((dom,i)=>{const v=d['dom'+i]||0;
        return `<div class="report-row"><div class="report-label">${dom}</div><input class="report-input" type="number" min="0" max="44" value="${v||''}" placeholder="0" onchange="updateR('dom${i}',this.value)">
          <div class="report-bar"><div class="report-bar-fill" style="width:${Math.min(v*8,100)}%;background:${DOM_COLORS[i]}"></div></div></div>`;}).join('')}</div></div>
    <div class="report-section" style="margin-top:16px"><div class="report-section-label rs-cyan">Desmos & Strategy Check</div>
      <div class="report-grid">
        <div class="report-row"><div class="report-label">Should have used Desmos</div><input class="report-input" type="number" min="0" max="44" value="${d.desY||''}" placeholder="0" onchange="updateR('desY',this.value)"></div>
        <div class="report-row"><div class="report-label">Desmos was slower</div><input class="report-input" type="number" min="0" max="44" value="${d.desN||''}" placeholder="0" onchange="updateR('desN',this.value)"></div>
        <div class="report-row"><div class="report-label">Plug In would have helped</div><input class="report-input" type="number" min="0" max="44" value="${d.plugIn||''}" placeholder="0" onchange="updateR('plugIn',this.value)"></div>
        <div class="report-row"><div class="report-label">Backsolve would have helped</div><input class="report-input" type="number" min="0" max="44" value="${d.backsolve||''}" placeholder="0" onchange="updateR('backsolve',this.value)"></div></div></div>
    <div class="priority-box"><div class="priority-title">üéØ Top 3 Priority Areas</div>
      <div class="priority-item"><div class="priority-num">1</div><input class="priority-input" placeholder="e.g., Quadratic equations ‚Äî vertex form" value="${d.p1||''}" oninput="updateR('p1',this.value)"></div>
      <div class="priority-item"><div class="priority-num">2</div><input class="priority-input" placeholder="e.g., Desmos ‚Äî regression on data tables" value="${d.p2||''}" oninput="updateR('p2',this.value)"></div>
      <div class="priority-item"><div class="priority-num">3</div><input class="priority-input" placeholder="e.g., Time management ‚Äî flagging hard questions" value="${d.p3||''}" oninput="updateR('p3',this.value)"></div></div>
    <div style="margin-top:14px;text-align:center">
      <button class="btn btn-sm btn-blue" onclick="exportReport()">üìã Export Report</button>
      <button class="btn btn-sm btn-outline" onclick="if(confirm('Clear all report data?')){localStorage.removeItem('${RK}');renderReport()}" style="margin-left:8px">Reset</button></div>`;
}
function updateR(k,v){const d=loadR();d[k]=v;saveR(d);renderReport();}
function exportReport(){
  const d=loadR();
  let t='PSAT MATH PATTERN REPORT ‚Äî PantherPrep\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
  t+=`Module 1: ${d.m1||'‚Äî'}/22\nModule 2: ${d.m2||'‚Äî'}/22 (${d.m2type||'‚Äî'})\nTotal: ${(parseInt(d.m1)||0)+(parseInt(d.m2)||0)}/44\n\n`;
  t+='ERRORS BY TYPE:\n';ERROR_TYPES.forEach((_,i)=>t+=`  ${ERROR_TYPES[i]}: ${d['et'+i]||0}\n`);
  t+='\nERRORS BY DOMAIN:\n';DOMAINS.forEach((_,i)=>t+=`  ${DOMAINS[i]}: ${d['dom'+i]||0}\n`);
  t+=`\nDESMOS: Should have used: ${d.desY||0} | Was slower: ${d.desN||0}`;
  t+=`\nSTRATEGY: Plug In: ${d.plugIn||0} | Backsolve: ${d.backsolve||0}\n`;
  t+=`\nTOP 3 PRIORITIES:\n  1. ${d.p1||'‚Äî'}\n  2. ${d.p2||'‚Äî'}\n  3. ${d.p3||'‚Äî'}\n`;
  navigator.clipboard.writeText(t).then(()=>alert('Report copied to clipboard!')).catch(()=>alert('Copy failed ‚Äî try selecting the text manually.'));
}
renderReport();

// ============ SCORE PROJECTOR ============
function calcProj(){
  const mr=parseInt(document.getElementById('projMathRaw').value);
  const rwr=parseInt(document.getElementById('projRWRaw').value);
  const m2=document.getElementById('projM2').value;
  if(isNaN(mr)&&isNaN(rwr)){document.getElementById('projResults').innerHTML='<div class="proj-result"><div class="proj-val" style="color:var(--muted)">‚Äî</div><div class="proj-label">Math Score</div></div><div class="proj-result"><div class="proj-val" style="color:var(--muted)">‚Äî</div><div class="proj-label">RW Score</div></div><div class="proj-result"><div class="proj-val" style="color:var(--muted)">‚Äî</div><div class="proj-label">Selection Index</div></div>';document.getElementById('projInsight').innerHTML='';return;}
  // Approximate PSAT scaling (rough ‚Äî varies by test form)
  const mathPct=isNaN(mr)?0:mr/44;
  const rwPct=isNaN(rwr)?0:rwr/54;
  const hardBonus=m2==='hard'?20:m2==='easy'?-20:0;
  const mathScaled=isNaN(mr)?null:Math.round(160+mathPct*540+hardBonus+(Math.random()*10-5));
  const rwScaled=isNaN(rwr)?null:Math.round(160+rwPct*540+(Math.random()*10-5));
  const ms=mathScaled?Math.min(760,Math.max(160,mathScaled)):null;
  const rs=rwScaled?Math.min(760,Math.max(160,rwScaled)):null;
  const si=(ms&&rs)?Math.round((rs*2+ms)/10):null;

  document.getElementById('projResults').innerHTML=
    `<div class="proj-result"><div class="proj-val" style="color:${ms?ms>=700?'var(--correct)':ms>=600?'var(--psda)':'var(--wrong)':'var(--muted)'}">${ms||'‚Äî'}</div><div class="proj-label">Math Score (160‚Äì760)</div></div>`+
    `<div class="proj-result"><div class="proj-val" style="color:${rs?rs>=700?'var(--correct)':rs>=600?'var(--psda)':'var(--wrong)':'var(--muted)'}">${rs||'‚Äî'}</div><div class="proj-label">RW Score (160‚Äì760)</div></div>`+
    `<div class="proj-result"><div class="proj-val" style="color:${si?si>=215?'var(--correct)':si>=200?'var(--psda)':'var(--muted)':'var(--muted)'}">${si||'‚Äî'}</div><div class="proj-label">Selection Index (48‚Äì228)</div></div>`;

  let insight='';
  if(si){
    if(si>=220)insight='üî• <strong style="color:var(--correct)">National Merit Semifinalist range!</strong> This is competitive in most states.';
    else if(si>=215)insight='üí™ <strong style="color:var(--psda)">Approaching Semifinalist territory.</strong> Focus on your weakest areas for a few more points.';
    else if(si>=200)insight='üìà <strong>Commended Scholar range.</strong> Solid work ‚Äî targeted practice can push you higher.';
    else insight='Keep working through the modules. Every point of improvement in your raw score translates to Selection Index gains.';
  }
  if(!isNaN(mr)&&m2==='')insight+=' <em>(Select Module 2 type for better accuracy.)</em>';
  document.getElementById('projInsight').innerHTML=insight;
}
calcProj();

// ============ PROGRESS COMPARISON ============
function updateProgress(){
  const b=parseInt(document.getElementById('baseScore').value);
  const p=parseInt(document.getElementById('practScore').value);
  const el=document.getElementById('progressResult');
  if(isNaN(b)||isNaN(p)){el.textContent='Enter both scores to see growth.';return;}
  const diff=p-b;
  if(diff>0)el.innerHTML=`<strong style="color:var(--correct)">+${diff} questions improved!</strong> That's ~${Math.round(diff/b*100)}% growth. Great progress! üéâ`;
  else if(diff===0)el.innerHTML=`<span style="color:var(--psda)">Same score.</span> Check your Pattern Report ‚Äî different error types can still mean progress.`;
  else el.innerHTML=`<span style="color:var(--wrong)">${diff} from baseline.</span> Check Pattern Report to see what shifted. New strategies sometimes need more practice.`;
}
</script>
<script src="/translate.js"></script>
</body>
</html>
